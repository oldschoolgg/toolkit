"use strict";var ga=Object.create;var Ut=Object.defineProperty;var ya=Object.getOwnPropertyDescriptor;var ba=Object.getOwnPropertyNames;var va=Object.getPrototypeOf,_a=Object.prototype.hasOwnProperty;var c=(t,e)=>Ut(t,"name",{value:e,configurable:!0});var C=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),wa=(t,e)=>{for(var r in e)Ut(t,r,{get:e[r],enumerable:!0})},js=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of ba(e))!_a.call(t,s)&&s!==r&&Ut(t,s,{get:()=>e[s],enumerable:!(n=ya(e,s))||n.enumerable});return t};var Yr=(t,e,r)=>(r=t!=null?ga(va(t)):{},js(e||!t||!t.__esModule?Ut(r,"default",{value:t,enumerable:!0}):r,t)),xa=t=>js(Ut({},"__esModule",{value:!0}),t);var sn=C(R=>{"use strict";var ne;Object.defineProperty(R,"__esModule",{value:!0}),(ne=R.Time||(R.Time={}))[ne.Millisecond=1]="Millisecond",ne[ne.Second=1e3]="Second",ne[ne.Minute=6e4]="Minute",ne[ne.Hour=36e5]="Hour",ne[ne.Day=864e5]="Day",ne[ne.Month=2592e6]="Month",ne[ne.Year=31536e6]="Year";var ti=["string","bigint","number","boolean"];function $s(t){return!(typeof t!="object"||!t)&&t.constructor===Object}c($s,"r");function Js(t){return ti.includes(typeof t)}c(Js,"n");function Xs(t,e){return Math.floor(Math.random()*(e-t+1)+t)}c(Xs,"o");function ei(t,e){return Math.random()*(e-t)+t}c(ei,"u");R.calcPercentOfNum=function(t,e){return t*e/100},R.calcWhatPercent=function(t,e){return 100*t/e},R.chunk=function(t,e){if(e<1)throw new RangeError("chunkSize must be 1 or greater.");if(!Number.isInteger(e))throw new TypeError("chunkSize must be an integer.");let r=t.slice(),n=[];for(;r.length;)n.push(r.splice(0,e));return n},R.clamp=function(t,e,r){return Math.min(r,Math.max(e,t))},R.debounce=(t,e)=>{let r=null;return(...n)=>{r!==null&&(clearTimeout(r),r=null),r=setTimeout(()=>t(...n),e)}},R.deepClone=c(function t(e){if(e===null||Js(e))return e;if(Array.isArray(e)){let r=[];for(let n of e)r.push(t(n));return r}if($s(e)){let r={};for(let[n,s]of Object.entries(e))r[n]=t(s);return r}if(e instanceof Map){let r=new e.constructor;for(let[n,s]of e.entries())r.set(n,t(s));return r}if(e instanceof Set){let r=new e.constructor;for(let n of e.values())r.add(t(n));return r}return e},"e"),R.increaseNumByPercent=function(t,e){return e<=0?t:t+t*(e/100)},R.isFunction=function(t){return typeof t=="function"},R.isObject=$s,R.isPrimitive=Js,R.noOp=function(){},R.notEmpty=function(t){return t!=null},R.objectEntries=function(t){return Object.entries(t)},R.objectKeys=function(t){return Object.keys(t)},R.objectValues=function(t){return Object.values(t)},R.partition=function(t,e){let r=[],n=[];for(let s of t)(e(s)?r:n).push(s);return[r,n]},R.percentChance=function(t){return ei(0,100)<t},R.primitiveTypes=ti,R.randArrItem=function(t){return t[Math.floor(Math.random()*t.length)]},R.randFloat=ei,R.randInt=Xs,R.reduceNumByPercent=function(t,e){return e<=0?t:t-t*(e/100)},R.removeFromArr=function(t,e){return t.filter(r=>r!==e)},R.roll=function(t){return Xs(1,t)===1},R.round=function(t,e=1){let r=Math.pow(10,e||0);return Math.round(t*r)/r},R.scaleNumber=function(t,e,r,n,s){return(t-e)*(s-n)/(r-e)+n},R.shuffleArr=function(t){let e=[...t];for(let r=e.length-1;r>0;r--){let n=Math.floor(Math.random()*(r+1));[e[r],e[n]]=[e[n],e[r]]}return e},R.sleep=function(t){return new Promise(e=>setTimeout(e,t))},R.stripNonAlphanumeric=function(t){return t.replace(/[^a-zA-Z0-9]/g,"")},R.sumArr=function(t){return t.reduce((e,r)=>e+r,0)},R.uniqueArr=function(t){return[...new Set(t)]}});var xt=C(oe=>{"use strict";var yc=oe&&oe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oe,"__esModule",{value:!0});oe.getKeyIndexes=oe.hasFlag=oe.exists=oe.list=void 0;var gr=yc(require("./commands-SQ6UUKDC.json"));oe.list=Object.keys(gr.default);var un={};oe.list.forEach(t=>{un[t]=gr.default[t].flags.reduce(function(e,r){return e[r]=!0,e},{})});function bc(t){return!!gr.default[t]}c(bc,"exists");oe.exists=bc;function vc(t,e){if(!un[t])throw new Error("Unknown command "+t);return!!un[t][e]}c(vc,"hasFlag");oe.hasFlag=vc;function _c(t,e,r){let n=gr.default[t];if(!n)throw new Error("Unknown command "+t);if(!Array.isArray(e))throw new Error("Expect args to be an array");let s=[],i=!!(r&&r.parseExternalKey),o=c((u,l)=>{let f=[],d=Number(u[l]);for(let h=0;h<d;h++)f.push(h+l+1);return f},"takeDynamicKeys"),a=c((u,l,f)=>{for(let d=l;d<u.length-1;d+=1)if(String(u[d]).toLowerCase()===f.toLowerCase())return d+1;return null},"takeKeyAfterToken");switch(t){case"zunionstore":case"zinterstore":case"zdiffstore":s.push(0,...o(e,1));break;case"eval":case"evalsha":case"eval_ro":case"evalsha_ro":case"fcall":case"fcall_ro":case"blmpop":case"bzmpop":s.push(...o(e,1));break;case"sintercard":case"lmpop":case"zunion":case"zinter":case"zmpop":case"zintercard":case"zdiff":{s.push(...o(e,0));break}case"georadius":{s.push(0);let u=a(e,5,"STORE");u&&s.push(u);let l=a(e,5,"STOREDIST");l&&s.push(l);break}case"georadiusbymember":{s.push(0);let u=a(e,4,"STORE");u&&s.push(u);let l=a(e,4,"STOREDIST");l&&s.push(l);break}case"sort":case"sort_ro":s.push(0);for(let u=1;u<e.length-1;u++){let l=e[u];if(typeof l!="string")continue;let f=l.toUpperCase();f==="GET"?(u+=1,l=e[u],l!=="#"&&(i?s.push([u,si(l)]):s.push(u))):f==="BY"?(u+=1,i?s.push([u,si(e[u])]):s.push(u)):f==="STORE"&&(u+=1,s.push(u))}break;case"migrate":if(e[2]==="")for(let u=5;u<e.length-1;u++){let l=e[u];if(typeof l=="string"&&l.toUpperCase()==="KEYS"){for(let f=u+1;f<e.length;f++)s.push(f);break}}else s.push(2);break;case"xreadgroup":case"xread":for(let u=t==="xread"?0:3;u<e.length-1;u++)if(String(e[u]).toUpperCase()==="STREAMS"){for(let l=u+1;l<=u+(e.length-1-u)/2;l++)s.push(l);break}break;default:if(n.step>0){let u=n.keyStart-1,l=n.keyStop>0?n.keyStop:e.length+n.keyStop+1;for(let f=u;f<l;f+=n.step)s.push(f)}break}return s}c(_c,"getKeyIndexes");oe.getKeyIndexes=_c;function si(t){typeof t!="string"&&(t=String(t));let e=t.indexOf("->");return e===-1?t.length:e}c(si,"getExternalKeyNameLength")});var ii=C(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.tryCatch=De.errorObj=void 0;De.errorObj={e:{}};var ln;function wc(t,e){try{let r=ln;return ln=null,r.apply(this,arguments)}catch(r){return De.errorObj.e=r,De.errorObj}}c(wc,"tryCatcher");function xc(t){return ln=t,wc}c(xc,"tryCatch");De.tryCatch=xc});var Fe=C(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});var Ct=ii();function oi(t){setTimeout(function(){throw t},0)}c(oi,"throwLater");function Cc(t,e,r){return typeof e=="function"&&t.then(n=>{let s;r!==void 0&&Object(r).spread&&Array.isArray(n)?s=Ct.tryCatch(e).apply(void 0,[null].concat(n)):s=n===void 0?Ct.tryCatch(e)(null):Ct.tryCatch(e)(null,n),s===Ct.errorObj&&oi(s.e)},n=>{if(!n){let i=new Error(n+"");Object.assign(i,{cause:n}),n=i}let s=Ct.tryCatch(e)(n);s===Ct.errorObj&&oi(s.e)}),t}c(Cc,"asCallback");fn.default=Cc});var ui=C((Sh,ci)=>{"use strict";var ai=require("assert"),Vt=require("util");function Et(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}c(Et,"RedisError");Vt.inherits(Et,Error);Object.defineProperty(Et.prototype,"name",{value:"RedisError",configurable:!0,writable:!0});function dn(t,e,r){ai(e),ai.strictEqual(typeof r,"number"),Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0});let n=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=n,this.offset=r,this.buffer=e}c(dn,"ParserError");Vt.inherits(dn,Et);Object.defineProperty(dn.prototype,"name",{value:"ParserError",configurable:!0,writable:!0});function hn(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0});let e=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=e}c(hn,"ReplyError");Vt.inherits(hn,Et);Object.defineProperty(hn.prototype,"name",{value:"ReplyError",configurable:!0,writable:!0});function yr(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}c(yr,"AbortError");Vt.inherits(yr,Et);Object.defineProperty(yr.prototype,"name",{value:"AbortError",configurable:!0,writable:!0});function pn(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}c(pn,"InterruptError");Vt.inherits(pn,yr);Object.defineProperty(pn.prototype,"name",{value:"InterruptError",configurable:!0,writable:!0});ci.exports={RedisError:Et,ParserError:dn,ReplyError:hn,AbortError:yr,InterruptError:pn}});var di=C((Ah,fi)=>{"use strict";var li=require("assert"),St=class extends Error{static{c(this,"RedisError")}get name(){return this.constructor.name}},mn=class extends St{static{c(this,"ParserError")}constructor(e,r,n){li(r),li.strictEqual(typeof n,"number");let s=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=s,this.offset=n,this.buffer=r}get name(){return this.constructor.name}},gn=class extends St{static{c(this,"ReplyError")}constructor(e){let r=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=r}get name(){return this.constructor.name}},br=class extends St{static{c(this,"AbortError")}get name(){return this.constructor.name}},yn=class extends br{static{c(this,"InterruptError")}get name(){return this.constructor.name}};fi.exports={RedisError:St,ParserError:mn,ReplyError:gn,AbortError:br,InterruptError:yn}});var tt=C((Oh,hi)=>{"use strict";var Ec=process.version.charCodeAt(1)<55&&process.version.charCodeAt(2)===46?ui():di();hi.exports=Ec});var vr=C((Mh,bn)=>{var pi=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],Sc=c(function(e){for(var r,n=0,s=0,i=[],o=e.length;n<o;n++)r=e.charCodeAt(n),r<128?i[s++]=r:r<2048?(i[s++]=r>>6|192,i[s++]=r&63|128):(r&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++n)&1023),i[s++]=r>>18|240,i[s++]=r>>12&63|128,i[s++]=r>>6&63|128,i[s++]=r&63|128):(i[s++]=r>>12|224,i[s++]=r>>6&63|128,i[s++]=r&63|128);return i},"toUTF8Array"),mi=bn.exports=c(function(e){for(var r,n=0,s=-1,i=0,o=0,a=typeof e=="string"?Sc(e):e,u=a.length;n<u;){if(r=a[n++],s===-1)r===123&&(s=n);else if(r!==125)o=pi[(r^o>>8)&255]^o<<8;else if(n-1!==s)return o&16383;i=pi[(r^i>>8)&255]^i<<8}return i&16383},"generate");bn.exports.generateMulti=c(function(e){for(var r=1,n=e.length,s=mi(e[0]);r<n;)if(mi(e[r++])!==s)return-1;return s},"generateMulti")});var Ci=C((Nh,xi)=>{var yi=9007199254740991,kc="[object Arguments]",Ac="[object Function]",Tc="[object GeneratorFunction]",Oc=/^(?:0|[1-9]\d*)$/;function bi(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}c(bi,"apply");function Mc(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}c(Mc,"baseTimes");var Gt=Object.prototype,Ht=Gt.hasOwnProperty,vi=Gt.toString,Rc=Gt.propertyIsEnumerable,gi=Math.max;function Nc(t,e){var r=Uc(t)||Qc(t)?Mc(t.length,String):[],n=r.length,s=!!n;for(var i in t)(e||Ht.call(t,i))&&!(s&&(i=="length"||wi(i,n)))&&r.push(i);return r}c(Nc,"arrayLikeKeys");function Ic(t,e,r,n){return t===void 0||vn(t,Gt[r])&&!Ht.call(n,r)?e:t}c(Ic,"assignInDefaults");function Bc(t,e,r){var n=t[e];(!(Ht.call(t,e)&&vn(n,r))||r===void 0&&!(e in t))&&(t[e]=r)}c(Bc,"assignValue");function Pc(t){if(!wn(t))return Lc(t);var e=qc(t),r=[];for(var n in t)n=="constructor"&&(e||!Ht.call(t,n))||r.push(n);return r}c(Pc,"baseKeysIn");function _i(t,e){return e=gi(e===void 0?t.length-1:e,0),function(){for(var r=arguments,n=-1,s=gi(r.length-e,0),i=Array(s);++n<s;)i[n]=r[e+n];n=-1;for(var o=Array(e+1);++n<e;)o[n]=r[n];return o[e]=i,bi(t,this,o)}}c(_i,"baseRest");function jc(t,e,r,n){r||(r={});for(var s=-1,i=e.length;++s<i;){var o=e[s],a=n?n(r[o],t[o],o,r,t):void 0;Bc(r,o,a===void 0?t[o]:a)}return r}c(jc,"copyObject");function Dc(t){return _i(function(e,r){var n=-1,s=r.length,i=s>1?r[s-1]:void 0,o=s>2?r[2]:void 0;for(i=t.length>3&&typeof i=="function"?(s--,i):void 0,o&&Fc(r[0],r[1],o)&&(i=s<3?void 0:i,s=1),e=Object(e);++n<s;){var a=r[n];a&&t(e,a,n,i)}return e})}c(Dc,"createAssigner");function wi(t,e){return e=e??yi,!!e&&(typeof t=="number"||Oc.test(t))&&t>-1&&t%1==0&&t<e}c(wi,"isIndex");function Fc(t,e,r){if(!wn(r))return!1;var n=typeof e;return(n=="number"?_n(r)&&wi(e,r.length):n=="string"&&e in r)?vn(r[e],t):!1}c(Fc,"isIterateeCall");function qc(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Gt;return t===r}c(qc,"isPrototype");function Lc(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}c(Lc,"nativeKeysIn");function vn(t,e){return t===e||t!==t&&e!==e}c(vn,"eq");function Qc(t){return Zc(t)&&Ht.call(t,"callee")&&(!Rc.call(t,"callee")||vi.call(t)==kc)}c(Qc,"isArguments");var Uc=Array.isArray;function _n(t){return t!=null&&Vc(t.length)&&!zc(t)}c(_n,"isArrayLike");function Zc(t){return Gc(t)&&_n(t)}c(Zc,"isArrayLikeObject");function zc(t){var e=wn(t)?vi.call(t):"";return e==Ac||e==Tc}c(zc,"isFunction");function Vc(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=yi}c(Vc,"isLength");function wn(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}c(wn,"isObject");function Gc(t){return!!t&&typeof t=="object"}c(Gc,"isObjectLike");var Hc=Dc(function(t,e,r,n){jc(e,Yc(e),t,n)}),Wc=_i(function(t){return t.push(void 0,Ic),bi(Hc,void 0,t)});function Yc(t){return _n(t)?Nc(t,!0):Pc(t)}c(Yc,"keysIn");xi.exports=Wc});var ki=C((Bh,Si)=>{var Kc=9007199254740991,$c="[object Arguments]",Jc="[object Function]",Xc="[object GeneratorFunction]",xn=Object.prototype,eu=xn.hasOwnProperty,Ei=xn.toString,tu=xn.propertyIsEnumerable;function ru(t){return su(t)&&eu.call(t,"callee")&&(!tu.call(t,"callee")||Ei.call(t)==$c)}c(ru,"isArguments");function nu(t){return t!=null&&ou(t.length)&&!iu(t)}c(nu,"isArrayLike");function su(t){return cu(t)&&nu(t)}c(su,"isArrayLikeObject");function iu(t){var e=au(t)?Ei.call(t):"";return e==Jc||e==Xc}c(iu,"isFunction");function ou(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Kc}c(ou,"isLength");function au(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}c(au,"isObject");function cu(t){return!!t&&typeof t=="object"}c(cu,"isObjectLike");Si.exports=ru});var _r=C(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.isArguments=qe.defaults=qe.noop=void 0;var uu=Ci();qe.defaults=uu;var lu=ki();qe.isArguments=lu;function fu(){}c(fu,"noop");qe.noop=fu});var Ti=C((Fh,Ai)=>{var kt=1e3,At=kt*60,Tt=At*60,rt=Tt*24,du=rt*7,hu=rt*365.25;Ai.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return pu(t);if(r==="number"&&isFinite(t))return e.long?gu(t):mu(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function pu(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*hu;case"weeks":case"week":case"w":return r*du;case"days":case"day":case"d":return r*rt;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Tt;case"minutes":case"minute":case"mins":case"min":case"m":return r*At;case"seconds":case"second":case"secs":case"sec":case"s":return r*kt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}c(pu,"parse");function mu(t){var e=Math.abs(t);return e>=rt?Math.round(t/rt)+"d":e>=Tt?Math.round(t/Tt)+"h":e>=At?Math.round(t/At)+"m":e>=kt?Math.round(t/kt)+"s":t+"ms"}c(mu,"fmtShort");function gu(t){var e=Math.abs(t);return e>=rt?wr(t,e,rt,"day"):e>=Tt?wr(t,e,Tt,"hour"):e>=At?wr(t,e,At,"minute"):e>=kt?wr(t,e,kt,"second"):t+" ms"}c(gu,"fmtLong");function wr(t,e,r,n){var s=e>=r*1.5;return Math.round(t/r)+" "+n+(s?"s":"")}c(wr,"plural")});var Cn=C((Lh,Oi)=>{function yu(t){r.debug=r,r.default=r,r.coerce=u,r.disable=i,r.enable=s,r.enabled=o,r.humanize=Ti(),r.destroy=l,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let d=0;for(let h=0;h<f.length;h++)d=(d<<5)-d+f.charCodeAt(h),d|=0;return r.colors[Math.abs(d)%r.colors.length]}c(e,"selectColor"),r.selectColor=e;function r(f){let d,h=null,p,v;function x(...P){if(!x.enabled)return;let I=x,H=Number(new Date),B=H-(d||H);I.diff=B,I.prev=d,I.curr=H,d=H,P[0]=r.coerce(P[0]),typeof P[0]!="string"&&P.unshift("%O");let U=0;P[0]=P[0].replace(/%([a-zA-Z%])/g,(ie,Qt)=>{if(ie==="%%")return"%";U++;let Xe=r.formatters[Qt];if(typeof Xe=="function"){let et=P[U];ie=Xe.call(I,et),P.splice(U,1),U--}return ie}),r.formatArgs.call(I,P),(I.log||r.log).apply(I,P)}return c(x,"debug"),x.namespace=f,x.useColors=r.useColors(),x.color=r.selectColor(f),x.extend=n,x.destroy=r.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:c(()=>h!==null?h:(p!==r.namespaces&&(p=r.namespaces,v=r.enabled(f)),v),"get"),set:c(P=>{h=P},"set")}),typeof r.init=="function"&&r.init(x),x}c(r,"createDebug");function n(f,d){let h=r(this.namespace+(typeof d>"u"?":":d)+f);return h.log=this.log,h}c(n,"extend");function s(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let d,h=(typeof f=="string"?f:"").split(/[\s,]+/),p=h.length;for(d=0;d<p;d++)h[d]&&(f=h[d].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}c(s,"enable");function i(){let f=[...r.names.map(a),...r.skips.map(a).map(d=>"-"+d)].join(",");return r.enable(""),f}c(i,"disable");function o(f){if(f[f.length-1]==="*")return!0;let d,h;for(d=0,h=r.skips.length;d<h;d++)if(r.skips[d].test(f))return!1;for(d=0,h=r.names.length;d<h;d++)if(r.names[d].test(f))return!0;return!1}c(o,"enabled");function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}c(a,"toNamespace");function u(f){return f instanceof Error?f.stack||f.message:f}c(u,"coerce");function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return c(l,"destroy"),r.enable(r.load()),r}c(yu,"setup");Oi.exports=yu});var Mi=C((ae,xr)=>{ae.formatArgs=vu;ae.save=_u;ae.load=wu;ae.useColors=bu;ae.storage=xu();ae.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ae.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function bu(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}c(bu,"useColors");function vu(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+xr.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(r++,s==="%c"&&(n=r))}),t.splice(n,0,e)}c(vu,"formatArgs");ae.log=console.debug||console.log||(()=>{});function _u(t){try{t?ae.storage.setItem("debug",t):ae.storage.removeItem("debug")}catch{}}c(_u,"save");function wu(){let t;try{t=ae.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}c(wu,"load");function xu(){try{return localStorage}catch{}}c(xu,"localstorage");xr.exports=Cn()(ae);var{formatters:Cu}=xr.exports;Cu.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Ni=C((Zh,Ri)=>{"use strict";Ri.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),s=e.indexOf("--");return n!==-1&&(s===-1||n<s)}});var Pi=C((zh,Bi)=>{"use strict";var Eu=require("os"),Ii=require("tty"),fe=Ni(),{env:z}=process,Le;fe("no-color")||fe("no-colors")||fe("color=false")||fe("color=never")?Le=0:(fe("color")||fe("colors")||fe("color=true")||fe("color=always"))&&(Le=1);"FORCE_COLOR"in z&&(z.FORCE_COLOR==="true"?Le=1:z.FORCE_COLOR==="false"?Le=0:Le=z.FORCE_COLOR.length===0?1:Math.min(parseInt(z.FORCE_COLOR,10),3));function En(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}c(En,"translateLevel");function Sn(t,e){if(Le===0)return 0;if(fe("color=16m")||fe("color=full")||fe("color=truecolor"))return 3;if(fe("color=256"))return 2;if(t&&!e&&Le===void 0)return 0;let r=Le||0;if(z.TERM==="dumb")return r;if(process.platform==="win32"){let n=Eu.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in z)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in z)||z.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in z)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(z.TEAMCITY_VERSION)?1:0;if(z.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in z){let n=parseInt((z.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(z.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(z.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(z.TERM)||"COLORTERM"in z?1:r}c(Sn,"supportsColor");function Su(t){let e=Sn(t,t&&t.isTTY);return En(e)}c(Su,"getSupportLevel");Bi.exports={supportsColor:Su,stdout:En(Sn(!0,Ii.isatty(1))),stderr:En(Sn(!0,Ii.isatty(2)))}});var Di=C((G,Er)=>{var ku=require("tty"),Cr=require("util");G.init=Iu;G.log=Mu;G.formatArgs=Tu;G.save=Ru;G.load=Nu;G.useColors=Au;G.destroy=Cr.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");G.colors=[6,2,3,4,5,1];try{let t=Pi();t&&(t.stderr||t).level>=2&&(G.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}G.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(s,i)=>i.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function Au(){return"colors"in G.inspectOpts?!!G.inspectOpts.colors:ku.isatty(process.stderr.fd)}c(Au,"useColors");function Tu(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,s="\x1B[3"+(n<8?n:"8;5;"+n),i=`  ${s};1m${e} \x1B[0m`;t[0]=i+t[0].split(`
`).join(`
`+i),t.push(s+"m+"+Er.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=Ou()+e+" "+t[0]}c(Tu,"formatArgs");function Ou(){return G.inspectOpts.hideDate?"":new Date().toISOString()+" "}c(Ou,"getDate");function Mu(...t){return process.stderr.write(Cr.format(...t)+`
`)}c(Mu,"log");function Ru(t){t?process.env.DEBUG=t:delete process.env.DEBUG}c(Ru,"save");function Nu(){return process.env.DEBUG}c(Nu,"load");function Iu(t){t.inspectOpts={};let e=Object.keys(G.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=G.inspectOpts[e[r]]}c(Iu,"init");Er.exports=Cn()(G);var{formatters:ji}=Er.exports;ji.o=function(t){return this.inspectOpts.colors=this.useColors,Cr.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};ji.O=function(t){return this.inspectOpts.colors=this.useColors,Cr.inspect(t,this.inspectOpts)}});var Fi=C((Hh,kn)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?kn.exports=Mi():kn.exports=Di()});var Qi=C(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.genRedactedString=Ae.getStringValue=Ae.MAX_ARGUMENT_LENGTH=void 0;var Bu=Fi(),An=200;Ae.MAX_ARGUMENT_LENGTH=An;var Pu="ioredis";function qi(t){if(t!==null)switch(typeof t){case"boolean":return;case"number":return;case"object":if(Buffer.isBuffer(t))return t.toString("hex");if(Array.isArray(t))return t.join(",");try{return JSON.stringify(t)}catch{return}case"string":return t}}c(qi,"getStringValue");Ae.getStringValue=qi;function Li(t,e){let{length:r}=t;return r<=e?t:t.slice(0,e)+' ... <REDACTED full-length="'+r+'">'}c(Li,"genRedactedString");Ae.genRedactedString=Li;function ju(t){let e=(0,Bu.default)(`${Pu}:${t}`);function r(...n){if(e.enabled){for(let s=1;s<n.length;s++){let i=qi(n[s]);typeof i=="string"&&i.length>An&&(n[s]=Li(i,An))}return e.apply(null,n)}}return c(r,"wrappedDebug"),Object.defineProperties(r,{namespace:{get(){return e.namespace}},enabled:{get(){return e.enabled}},destroy:{get(){return e.destroy}},log:{get(){return e.log},set(n){e.log=n}}}),r}c(ju,"genDebugFunction");Ae.default=ju});var Zi=C(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});var Ui=`-----BEGIN CERTIFICATE-----
MIIDTzCCAjegAwIBAgIJAKSVpiDswLcwMA0GCSqGSIb3DQEBBQUAMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTAeFw0xMzEwMDExMjE0NTVaFw0yMzA5MjkxMjE0NTVaMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALZqkh/DczWP
JnxnHLQ7QL0T4B4CDKWBKCcisriGbA6ZePWVNo4hfKQC6JrzfR+081NeD6VcWUiz
rmd+jtPhIY4c+WVQYm5PKaN6DT1imYdxQw7aqO5j2KUCEh/cznpLxeSHoTxlR34E
QwF28Wl3eg2vc5ct8LjU3eozWVk3gb7alx9mSA2SgmuX5lEQawl++rSjsBStemY2
BDwOpAMXIrdEyP/cVn8mkvi/BDs5M5G+09j0gfhyCzRWMQ7Hn71u1eolRxwVxgi3
TMn+/vTaFSqxKjgck6zuAYjBRPaHe7qLxHNr1So/Mc9nPy+3wHebFwbIcnUojwbp
4nctkWbjb2cCAwEAAaNQME4wHQYDVR0OBBYEFP1whtcrydmW3ZJeuSoKZIKjze3w
MB8GA1UdIwQYMBaAFP1whtcrydmW3ZJeuSoKZIKjze3wMAwGA1UdEwQFMAMBAf8w
DQYJKoZIhvcNAQEFBQADggEBAG2erXhwRAa7+ZOBs0B6X57Hwyd1R4kfmXcs0rta
lbPpvgULSiB+TCbf3EbhJnHGyvdCY1tvlffLjdA7HJ0PCOn+YYLBA0pTU/dyvrN6
Su8NuS5yubnt9mb13nDGYo1rnt0YRfxN+8DM3fXIVr038A30UlPX2Ou1ExFJT0MZ
uFKY6ZvLdI6/1cbgmguMlAhM+DhKyV6Sr5699LM3zqeI816pZmlREETYkGr91q7k
BpXJu/dtHaGxg1ZGu6w/PCsYGUcECWENYD4VQPd8N32JjOfu6vEgoEAwfPP+3oGp
Z4m3ewACcWOAenqflb+cQYC4PsF7qbXDmRaWrbKntOlZ3n0=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIGMTCCBBmgAwIBAgICEAAwDQYJKoZIhvcNAQELBQAwajELMAkGA1UEBhMCVVMx
CzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJzMS0w
KwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcN
MTgwMjI1MTUzNzM3WhcNMjgwMjIzMTUzNzM3WjBfMQswCQYDVQQGEwJVUzELMAkG
A1UECAwCQ0ExEjAQBgNVBAoMCVJlZGlzTGFiczEvMC0GA1UEAwwmUkNQIEludGVy
bWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwggIiMA0GCSqGSIb3DQEBAQUA
A4ICDwAwggIKAoICAQDf9dqbxc8Bq7Ctq9rWcxrGNKKHivqLAFpPq02yLPx6fsOv
Tq7GsDChAYBBc4v7Y2Ap9RD5Vs3dIhEANcnolf27QwrG9RMnnvzk8pCvp1o6zSU4
VuOE1W66/O1/7e2rVxyrnTcP7UgK43zNIXu7+tiAqWsO92uSnuMoGPGpeaUm1jym
hjWKtkAwDFSqvHY+XL5qDVBEjeUe+WHkYUg40cAXjusAqgm2hZt29c2wnVrxW25W
P0meNlzHGFdA2AC5z54iRiqj57dTfBTkHoBczQxcyw6hhzxZQ4e5I5zOKjXXEhZN
r0tA3YC14CTabKRus/JmZieyZzRgEy2oti64tmLYTqSlAD78pRL40VNoaSYetXLw
hhNsXCHgWaY6d5bLOc/aIQMAV5oLvZQKvuXAF1IDmhPA+bZbpWipp0zagf1P1H3s
UzsMdn2KM0ejzgotbtNlj5TcrVwpmvE3ktvUAuA+hi3FkVx1US+2Gsp5x4YOzJ7u
P1WPk6ShF0JgnJH2ILdj6kttTWwFzH17keSFICWDfH/+kM+k7Y1v3EXMQXE7y0T9
MjvJskz6d/nv+sQhY04xt64xFMGTnZjlJMzfQNi7zWFLTZnDD0lPowq7l3YiPoTT
t5Xky83lu0KZsZBo0WlWaDG00gLVdtRgVbcuSWxpi5BdLb1kRab66JptWjxwXQID
AQABo4HrMIHoMDoGA1UdHwQzMDEwL6AtoCuGKWh0dHBzOi8vcmwtY2Etc2VydmVy
LnJlZGlzbGFicy5jb20vdjEvY3JsMEYGCCsGAQUFBwEBBDowODA2BggrBgEFBQcw
AYYqaHR0cHM6Ly9ybC1jYS1zZXJ2ZXIucmVkaXNsYWJzLmNvbS92MS9vY3NwMB0G
A1UdDgQWBBQHar5OKvQUpP2qWt6mckzToeCOHDAfBgNVHSMEGDAWgBQi42wH6hM4
L2sujEvLM0/u8lRXTzASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIB
hjANBgkqhkiG9w0BAQsFAAOCAgEAirEn/iTsAKyhd+pu2W3Z5NjCko4NPU0EYUbr
AP7+POK2rzjIrJO3nFYQ/LLuC7KCXG+2qwan2SAOGmqWst13Y+WHp44Kae0kaChW
vcYLXXSoGQGC8QuFSNUdaeg3RbMDYFT04dOkqufeWVccoHVxyTSg9eD8LZuHn5jw
7QDLiEECBmIJHk5Eeo2TAZrx4Yx6ufSUX5HeVjlAzqwtAqdt99uCJ/EL8bgpWbe+
XoSpvUv0SEC1I1dCAhCKAvRlIOA6VBcmzg5Am12KzkqTul12/VEFIgzqu0Zy2Jbc
AUPrYVu/+tOGXQaijy7YgwH8P8n3s7ZeUa1VABJHcxrxYduDDJBLZi+MjheUDaZ1
jQRHYevI2tlqeSBqdPKG4zBY5lS0GiAlmuze5oENt0P3XboHoZPHiqcK3VECgTVh
/BkJcuudETSJcZDmQ8YfoKfBzRQNg2sv/hwvUv73Ss51Sco8GEt2lD8uEdib1Q6z
zDT5lXJowSzOD5ZA9OGDjnSRL+2riNtKWKEqvtEG3VBJoBzu9GoxbAc7wIZLxmli
iF5a/Zf5X+UXD3s4TMmy6C4QZJpAA2egsSQCnraWO2ULhh7iXMysSkF/nzVfZn43
iqpaB8++9a37hWq14ZmOv0TJIDz//b2+KC4VFXWQ5W5QC6whsjT+OlG4p5ZYG0jo
616pxqo=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIFujCCA6KgAwIBAgIJAJ1aTT1lu2ScMA0GCSqGSIb3DQEBCwUAMGoxCzAJBgNV
BAYTAlVTMQswCQYDVQQIDAJDQTELMAkGA1UEBwwCQ0ExEjAQBgNVBAoMCVJlZGlz
TGFiczEtMCsGA1UEAwwkUmVkaXNMYWJzIFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9y
aXR5MB4XDTE4MDIyNTE1MjA0MloXDTM4MDIyMDE1MjA0MlowajELMAkGA1UEBhMC
VVMxCzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJz
MS0wKwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkw
ggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDLEjXy7YrbN5Waau5cd6g1
G5C2tMmeTpZ0duFAPxNU4oE3RHS5gGiok346fUXuUxbZ6QkuzeN2/2Z+RmRcJhQY
Dm0ZgdG4x59An1TJfnzKKoWj8ISmoHS/TGNBdFzXV7FYNLBuqZouqePI6ReC6Qhl
pp45huV32Q3a6IDrrvx7Wo5ZczEQeFNbCeCOQYNDdTmCyEkHqc2AGo8eoIlSTutT
ULOC7R5gzJVTS0e1hesQ7jmqHjbO+VQS1NAL4/5K6cuTEqUl+XhVhPdLWBXJQ5ag
54qhX4v+ojLzeU1R/Vc6NjMvVtptWY6JihpgplprN0Yh2556ewcXMeturcKgXfGJ
xeYzsjzXerEjrVocX5V8BNrg64NlifzTMKNOOv4fVZszq1SIHR8F9ROrqiOdh8iC
JpUbLpXH9hWCSEO6VRMB2xJoKu3cgl63kF30s77x7wLFMEHiwsQRKxooE1UhgS9K
2sO4TlQ1eWUvFvHSTVDQDlGQ6zu4qjbOpb3Q8bQwoK+ai2alkXVR4Ltxe9QlgYK3
StsnPhruzZGA0wbXdpw0bnM+YdlEm5ffSTpNIfgHeaa7Dtb801FtA71ZlH7A6TaI
SIQuUST9EKmv7xrJyx0W1pGoPOLw5T029aTjnICSLdtV9bLwysrLhIYG5bnPq78B
cS+jZHFGzD7PUVGQD01nOQIDAQABo2MwYTAdBgNVHQ4EFgQUIuNsB+oTOC9rLoxL
yzNP7vJUV08wHwYDVR0jBBgwFoAUIuNsB+oTOC9rLoxLyzNP7vJUV08wDwYDVR0T
AQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAYYwDQYJKoZIhvcNAQELBQADggIBAHfg
z5pMNUAKdMzK1aS1EDdK9yKz4qicILz5czSLj1mC7HKDRy8cVADUxEICis++CsCu
rYOvyCVergHQLREcxPq4rc5Nq1uj6J6649NEeh4WazOOjL4ZfQ1jVznMbGy+fJm3
3Hoelv6jWRG9iqeJZja7/1s6YC6bWymI/OY1e4wUKeNHAo+Vger7MlHV+RuabaX+
hSJ8bJAM59NCM7AgMTQpJCncrcdLeceYniGy5Q/qt2b5mJkQVkIdy4TPGGB+AXDJ
D0q3I/JDRkDUFNFdeW0js7fHdsvCR7O3tJy5zIgEV/o/BCkmJVtuwPYOrw/yOlKj
TY/U7ATAx9VFF6/vYEOMYSmrZlFX+98L6nJtwDqfLB5VTltqZ4H/KBxGE3IRSt9l
FXy40U+LnXzhhW+7VBAvyYX8GEXhHkKU8Gqk1xitrqfBXY74xKgyUSTolFSfFVgj
mcM/X4K45bka+qpkj7Kfv/8D4j6aZekwhN2ly6hhC1SmQ8qjMjpG/mrWOSSHZFmf
ybu9iD2AYHeIOkshIl6xYIa++Q/00/vs46IzAbQyriOi0XxlSMMVtPx0Q3isp+ji
n8Mq9eOuxYOEQ4of8twUkUDd528iwGtEdwf0Q01UyT84S62N8AySl1ZBKXJz6W4F
UhWfa/HQYOAPDdEjNgnVwLI23b8t0TozyCWw7q8h
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIEjzCCA3egAwIBAgIQe55B/ALCKJDZtdNT8kD6hTANBgkqhkiG9w0BAQsFADBM
MSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEGA1UEChMKR2xv
YmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjAeFw0yMjAxMjYxMjAwMDBaFw0y
NTAxMjYwMDAwMDBaMFgxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWdu
IG52LXNhMS4wLAYDVQQDEyVHbG9iYWxTaWduIEF0bGFzIFIzIE9WIFRMUyBDQSAy
MDIyIFEyMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmGmg1LW9b7Lf
8zDD83yBDTEkt+FOxKJZqF4veWc5KZsQj9HfnUS2e5nj/E+JImlGPsQuoiosLuXD
BVBNAMcUFa11buFMGMeEMwiTmCXoXRrXQmH0qjpOfKgYc5gHG3BsRGaRrf7VR4eg
ofNMG9wUBw4/g/TT7+bQJdA4NfE7Y4d5gEryZiBGB/swaX6Jp/8MF4TgUmOWmalK
dZCKyb4sPGQFRTtElk67F7vU+wdGcrcOx1tDcIB0ncjLPMnaFicagl+daWGsKqTh
counQb6QJtYHa91KvCfKWocMxQ7OIbB5UARLPmC4CJ1/f8YFm35ebfzAeULYdGXu
jE9CLor0OwIDAQABo4IBXzCCAVswDgYDVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQG
CCsGAQUFBwMBBggrBgEFBQcDAjASBgNVHRMBAf8ECDAGAQH/AgEAMB0GA1UdDgQW
BBSH5Zq7a7B/t95GfJWkDBpA8HHqdjAfBgNVHSMEGDAWgBSP8Et/qC5FJK5NUPpj
move4t0bvDB7BggrBgEFBQcBAQRvMG0wLgYIKwYBBQUHMAGGImh0dHA6Ly9vY3Nw
Mi5nbG9iYWxzaWduLmNvbS9yb290cjMwOwYIKwYBBQUHMAKGL2h0dHA6Ly9zZWN1
cmUuZ2xvYmFsc2lnbi5jb20vY2FjZXJ0L3Jvb3QtcjMuY3J0MDYGA1UdHwQvMC0w
K6ApoCeGJWh0dHA6Ly9jcmwuZ2xvYmFsc2lnbi5jb20vcm9vdC1yMy5jcmwwIQYD
VR0gBBowGDAIBgZngQwBAgIwDAYKKwYBBAGgMgoBAjANBgkqhkiG9w0BAQsFAAOC
AQEAKRic9/f+nmhQU/wz04APZLjgG5OgsuUOyUEZjKVhNGDwxGTvKhyXGGAMW2B/
3bRi+aElpXwoxu3pL6fkElbX3B0BeS5LoDtxkyiVEBMZ8m+sXbocwlPyxrPbX6mY
0rVIvnuUeBH8X0L5IwfpNVvKnBIilTbcebfHyXkPezGwz7E1yhUULjJFm2bt0SdX
y+4X/WeiiYIv+fTVgZZgl+/2MKIsu/qdBJc3f3TvJ8nz+Eax1zgZmww+RSQWeOj3
15Iw6Z5FX+NwzY/Ab+9PosR5UosSeq+9HhtaxZttXG1nVh+avYPGYddWmiMT90J5
ZgKnO/Fx2hBgTxhOTMYaD312kg==
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIDXzCCAkegAwIBAgILBAAAAAABIVhTCKIwDQYJKoZIhvcNAQELBQAwTDEgMB4G
A1UECxMXR2xvYmFsU2lnbiBSb290IENBIC0gUjMxEzARBgNVBAoTCkdsb2JhbFNp
Z24xEzARBgNVBAMTCkdsb2JhbFNpZ24wHhcNMDkwMzE4MTAwMDAwWhcNMjkwMzE4
MTAwMDAwWjBMMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEG
A1UEChMKR2xvYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjCCASIwDQYJKoZI
hvcNAQEBBQADggEPADCCAQoCggEBAMwldpB5BngiFvXAg7aEyiie/QV2EcWtiHL8
RgJDx7KKnQRfJMsuS+FggkbhUqsMgUdwbN1k0ev1LKMPgj0MK66X17YUhhB5uzsT
gHeMCOFJ0mpiLx9e+pZo34knlTifBtc+ycsmWQ1z3rDI6SYOgxXG71uL0gRgykmm
KPZpO/bLyCiR5Z2KYVc3rHQU3HTgOu5yLy6c+9C7v/U9AOEGM+iCK65TpjoWc4zd
QQ4gOsC0p6Hpsk+QLjJg6VfLuQSSaGjlOCZgdbKfd/+RFO+uIEn8rUAVSNECMWEZ
XriX7613t2Saer9fwRPvm2L7DWzgVGkWqQPabumDk3F2xmmFghcCAwEAAaNCMEAw
DgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI/wS3+o
LkUkrk1Q+mOai97i3Ru8MA0GCSqGSIb3DQEBCwUAA4IBAQBLQNvAUKr+yAzv95ZU
RUm7lgAJQayzE4aGKAczymvmdLm6AC2upArT9fHxD4q/c2dKg8dEe3jgr25sbwMp
jjM5RcOO5LlXbKr8EpbsU8Yt5CRsuZRj+9xTaGdWPoO4zzUhw8lo/s7awlOqzJCK
6fBdRoyV3XpYKBovHd7NADdBj+1EbddTKJd+82cEHhXXipa0095MJ6RMG3NzdvQX
mcIfeg7jLQitChws/zyrVQ4PkX4268NXSb7hLi18YIvDQVETI53O9zJrlAGomecs
Mx86OyXShkDOOyyGeMlhLxS67ttVb9+E7gUJTb0o2HLO02JQZR7rkpeDMdmztcpH
WD9f
-----END CERTIFICATE-----`,Du={RedisCloudFixed:{ca:Ui},RedisCloudFlexible:{ca:Ui}};Tn.default=Du});var K=C(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.noop=M.defaults=M.Debug=M.zipMap=M.CONNECTION_CLOSED_ERROR_MSG=M.shuffle=M.sample=M.resolveTLSProfile=M.parseURL=M.optimizeErrorStack=M.toArg=M.convertMapToArray=M.convertObjectToArray=M.timeout=M.packObject=M.isInt=M.wrapMultiResult=M.convertBufferToString=void 0;var zi=require("url"),On=_r();Object.defineProperty(M,"defaults",{enumerable:!0,get:c(function(){return On.defaults},"get")});Object.defineProperty(M,"noop",{enumerable:!0,get:c(function(){return On.noop},"get")});var Fu=Qi();M.Debug=Fu.default;var qu=Zi();function Vi(t,e){if(t instanceof Buffer)return t.toString(e);if(Array.isArray(t)){let r=t.length,n=Array(r);for(let s=0;s<r;++s)n[s]=t[s]instanceof Buffer&&e==="utf8"?t[s].toString():Vi(t[s],e);return n}return t}c(Vi,"convertBufferToString");M.convertBufferToString=Vi;function Lu(t){if(!t)return null;let e=[],r=t.length;for(let n=0;n<r;++n){let s=t[n];s instanceof Error?e.push([s]):e.push([null,s])}return e}c(Lu,"wrapMultiResult");M.wrapMultiResult=Lu;function Gi(t){let e=parseFloat(t);return!isNaN(t)&&(e|0)===e}c(Gi,"isInt");M.isInt=Gi;function Qu(t){let e={},r=t.length;for(let n=1;n<r;n+=2)e[t[n-1]]=t[n];return e}c(Qu,"packObject");M.packObject=Qu;function Uu(t,e){let r=null,n=c(function(){r&&(clearTimeout(r),r=null,t.apply(this,arguments))},"run");return r=setTimeout(n,e,new Error("timeout")),n}c(Uu,"timeout");M.timeout=Uu;function Zu(t){let e=[],r=Object.keys(t);for(let n=0,s=r.length;n<s;n++)e.push(r[n],t[r[n]]);return e}c(Zu,"convertObjectToArray");M.convertObjectToArray=Zu;function zu(t){let e=[],r=0;return t.forEach(function(n,s){e[r]=s,e[r+1]=n,r+=2}),e}c(zu,"convertMapToArray");M.convertMapToArray=zu;function Vu(t){return t===null||typeof t>"u"?"":String(t)}c(Vu,"toArg");M.toArg=Vu;function Gu(t,e,r){let n=e.split(`
`),s="",i;for(i=1;i<n.length&&n[i].indexOf(r)!==-1;++i);for(let o=i;o<n.length;++o)s+=`
`+n[o];if(t.stack){let o=t.stack.indexOf(`
`);t.stack=t.stack.slice(0,o)+s}return t}c(Gu,"optimizeErrorStack");M.optimizeErrorStack=Gu;function Hu(t){if(Gi(t))return{port:t};let e=(0,zi.parse)(t,!0,!0);!e.slashes&&t[0]!=="/"&&(t="//"+t,e=(0,zi.parse)(t,!0,!0));let r=e.query||{},n={};if(e.auth){let s=e.auth.indexOf(":");n.username=s===-1?e.auth:e.auth.slice(0,s),n.password=s===-1?"":e.auth.slice(s+1)}if(e.pathname&&(e.protocol==="redis:"||e.protocol==="rediss:"?e.pathname.length>1&&(n.db=e.pathname.slice(1)):n.path=e.pathname),e.host&&(n.host=e.hostname),e.port&&(n.port=e.port),typeof r.family=="string"){let s=Number.parseInt(r.family,10);Number.isNaN(s)||(n.family=s)}return(0,On.defaults)(n,r),n}c(Hu,"parseURL");M.parseURL=Hu;function Wu(t){let e=t?.tls;typeof e=="string"&&(e={profile:e});let r=qu.default[e?.profile];return r&&(e=Object.assign({},r,e),delete e.profile,t=Object.assign({},t,{tls:e})),t}c(Wu,"resolveTLSProfile");M.resolveTLSProfile=Wu;function Yu(t,e=0){let r=t.length;return e>=r?null:t[e+Math.floor(Math.random()*(r-e))]}c(Yu,"sample");M.sample=Yu;function Ku(t){let e=t.length;for(;e>0;){let r=Math.floor(Math.random()*e);e--,[t[e],t[r]]=[t[r],t[e]]}return t}c(Ku,"shuffle");M.shuffle=Ku;M.CONNECTION_CLOSED_ERROR_MSG="Connection is closed.";function $u(t,e){let r=new Map;return t.forEach((n,s)=>{r.set(n,e[s])}),r}c($u,"zipMap");M.zipMap=$u});var Te=C(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});var Hi=xt(),Ju=vr(),Xu=Fe(),nt=K(),xe=class t{static{c(this,"Command")}constructor(e,r=[],n={},s){if(this.name=e,this.inTransaction=!1,this.isResolved=!1,this.transformed=!1,this.replyEncoding=n.replyEncoding,this.errorStack=n.errorStack,this.args=r.flat(),this.callback=s,this.initPromise(),n.keyPrefix){let i=n.keyPrefix instanceof Buffer,o=i?n.keyPrefix:null;this._iterateKeys(a=>a instanceof Buffer?(o===null&&(o=Buffer.from(n.keyPrefix)),Buffer.concat([o,a])):i?Buffer.concat([n.keyPrefix,Buffer.from(String(a))]):n.keyPrefix+a)}n.readOnly&&(this.isReadOnly=!0)}static checkFlag(e,r){return!!this.getFlagMap()[e][r]}static setArgumentTransformer(e,r){this._transformer.argument[e]=r}static setReplyTransformer(e,r){this._transformer.reply[e]=r}static getFlagMap(){return this.flagMap||(this.flagMap=Object.keys(t.FLAGS).reduce((e,r)=>(e[r]={},t.FLAGS[r].forEach(n=>{e[r][n]=!0}),e),{})),this.flagMap}getSlot(){if(typeof this.slot>"u"){let e=this.getKeys()[0];this.slot=e==null?null:Ju(e)}return this.slot}getKeys(){return this._iterateKeys()}toWritable(e){let r,n="*"+(this.args.length+1)+`\r
$`+Buffer.byteLength(this.name)+`\r
`+this.name+`\r
`;if(this.bufferMode){let s=new Mn;s.push(n);for(let i=0;i<this.args.length;++i){let o=this.args[i];o instanceof Buffer?o.length===0?s.push(`$0\r
\r
`):(s.push("$"+o.length+`\r
`),s.push(o),s.push(`\r
`)):s.push("$"+Buffer.byteLength(o)+`\r
`+o+`\r
`)}r=s.toBuffer()}else{r=n;for(let s=0;s<this.args.length;++s){let i=this.args[s];r+="$"+Buffer.byteLength(i)+`\r
`+i+`\r
`}}return r}stringifyArguments(){for(let e=0;e<this.args.length;++e){let r=this.args[e];typeof r=="string"||(r instanceof Buffer?this.bufferMode=!0:this.args[e]=(0,nt.toArg)(r))}}transformReply(e){this.replyEncoding&&(e=(0,nt.convertBufferToString)(e,this.replyEncoding));let r=t._transformer.reply[this.name];return r&&(e=r(e)),e}setTimeout(e){this._commandTimeoutTimer||(this._commandTimeoutTimer=setTimeout(()=>{this.isResolved||this.reject(new Error("Command timed out"))},e))}initPromise(){let e=new Promise((r,n)=>{if(!this.transformed){this.transformed=!0;let s=t._transformer.argument[this.name];s&&(this.args=s(this.args)),this.stringifyArguments()}this.resolve=this._convertValue(r),this.errorStack?this.reject=s=>{n((0,nt.optimizeErrorStack)(s,this.errorStack.stack,__dirname))}:this.reject=n});this.promise=(0,Xu.default)(e,this.callback)}_iterateKeys(e=r=>r){if(typeof this.keys>"u"&&(this.keys=[],(0,Hi.exists)(this.name))){let r=(0,Hi.getKeyIndexes)(this.name,this.args);for(let n of r)this.args[n]=e(this.args[n]),this.keys.push(this.args[n])}return this.keys}_convertValue(e){return r=>{try{let n=this._commandTimeoutTimer;n&&(clearTimeout(n),delete this._commandTimeoutTimer),e(this.transformReply(r)),this.isResolved=!0}catch(n){this.reject(n)}return this.promise}}};Rn.default=xe;xe.FLAGS={VALID_IN_SUBSCRIBER_MODE:["subscribe","psubscribe","unsubscribe","punsubscribe","ssubscribe","sunsubscribe","ping","quit"],VALID_IN_MONITOR_MODE:["monitor","auth"],ENTER_SUBSCRIBER_MODE:["subscribe","psubscribe","ssubscribe"],EXIT_SUBSCRIBER_MODE:["unsubscribe","punsubscribe","sunsubscribe"],WILL_DISCONNECT:["quit"]};xe._transformer={argument:{},reply:{}};var Wi=c(function(t){if(t.length===1){if(t[0]instanceof Map)return(0,nt.convertMapToArray)(t[0]);if(typeof t[0]=="object"&&t[0]!==null)return(0,nt.convertObjectToArray)(t[0])}return t},"msetArgumentTransformer"),Yi=c(function(t){if(t.length===2){if(t[1]instanceof Map)return[t[0]].concat((0,nt.convertMapToArray)(t[1]));if(typeof t[1]=="object"&&t[1]!==null)return[t[0]].concat((0,nt.convertObjectToArray)(t[1]))}return t},"hsetArgumentTransformer");xe.setArgumentTransformer("mset",Wi);xe.setArgumentTransformer("msetnx",Wi);xe.setArgumentTransformer("hset",Yi);xe.setArgumentTransformer("hmset",Yi);xe.setReplyTransformer("hgetall",function(t){if(Array.isArray(t)){let e={};for(let r=0;r<t.length;r+=2){let n=t[r],s=t[r+1];n in e?Object.defineProperty(e,n,{value:s,configurable:!0,enumerable:!0,writable:!0}):e[n]=s}return e}return t});var Mn=class{static{c(this,"MixedBuffers")}constructor(){this.length=0,this.items=[]}push(e){this.length+=Buffer.byteLength(e),this.items.push(e)}toBuffer(){let e=Buffer.allocUnsafe(this.length),r=0;for(let n of this.items){let s=Buffer.byteLength(n);Buffer.isBuffer(n)?n.copy(e,r):e.write(n,r,s),r+=s}return e}}});var Ki=C(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});var el=tt(),Sr=class extends el.RedisError{static{c(this,"ClusterAllFailedError")}constructor(e,r){super(e),this.lastNodeError=r,Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}};Nn.default=Sr;Sr.defaultMessage="Failed to refresh slots cache."});var kr=C(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});var tl=require("stream"),In=class extends tl.Readable{static{c(this,"ScanStream")}constructor(e){super(e),this.opt=e,this._redisCursor="0",this._redisDrained=!1}_read(){if(this._redisDrained){this.push(null);return}let e=[this._redisCursor];this.opt.key&&e.unshift(this.opt.key),this.opt.match&&e.push("MATCH",this.opt.match),this.opt.type&&e.push("TYPE",this.opt.type),this.opt.count&&e.push("COUNT",String(this.opt.count)),this.opt.redis[this.opt.command](e,(r,n)=>{if(r){this.emit("error",r);return}this._redisCursor=n[0]instanceof Buffer?n[0].toString():n[0],this._redisCursor==="0"&&(this._redisDrained=!0),this.push(n[1])})}close(){this._redisDrained=!0}};Bn.default=In});var ro=C(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.executeWithAutoPipelining=L.getFirstValueInFlattenedArray=L.shouldUseAutoPipelining=L.notAllowedAutoPipelineCommands=L.kCallbacks=L.kExec=void 0;var Ji=_r(),rl=vr(),$i=Fe();L.kExec=Symbol("exec");L.kCallbacks=Symbol("callbacks");L.notAllowedAutoPipelineCommands=["auth","info","script","quit","cluster","pipeline","multi","subscribe","psubscribe","unsubscribe","unpsubscribe","select"];function Xi(t,e){if(t._runningAutoPipelines.has(e)||!t._autoPipelines.has(e))return;t._runningAutoPipelines.add(e);let r=t._autoPipelines.get(e);t._autoPipelines.delete(e);let n=r[L.kCallbacks];r[L.kCallbacks]=null,r.exec(function(s,i){if(t._runningAutoPipelines.delete(e),s)for(let o=0;o<n.length;o++)process.nextTick(n[o],s);else for(let o=0;o<n.length;o++)process.nextTick(n[o],...i[o]);t._autoPipelines.has(e)&&Xi(t,e)})}c(Xi,"executeAutoPipeline");function nl(t,e,r){return e&&t.options.enableAutoPipelining&&!t.isPipeline&&!L.notAllowedAutoPipelineCommands.includes(r)&&!t.options.autoPipeliningIgnoredCommands.includes(r)}c(nl,"shouldUseAutoPipelining");L.shouldUseAutoPipelining=nl;function eo(t){for(let e=0;e<t.length;e++){let r=t[e];if(typeof r=="string")return r;if(Array.isArray(r)||(0,Ji.isArguments)(r)){if(r.length===0)continue;return r[0]}let n=[r].flat();if(n.length>0)return n[0]}}c(eo,"getFirstValueInFlattenedArray");L.getFirstValueInFlattenedArray=eo;function to(t,e,r,n,s){if(t.isCluster&&!t.slots.length)return t.status==="wait"&&t.connect().catch(Ji.noop),(0,$i.default)(new Promise(function(l,f){t.delayUntilReady(d=>{if(d){f(d);return}to(t,e,r,n,null).then(l,f)})}),s);let i=t.options.keyPrefix||"",o=t.isCluster?t.slots[rl(`${i}${eo(n)}`)].join(","):"main";if(!t._autoPipelines.has(o)){let l=t.pipeline();l[L.kExec]=!1,l[L.kCallbacks]=[],t._autoPipelines.set(o,l)}let a=t._autoPipelines.get(o);a[L.kExec]||(a[L.kExec]=!0,setImmediate(Xi,t,o));let u=new Promise(function(l,f){a[L.kCallbacks].push(function(d,h){if(d){f(d);return}l(h)}),e==="call"&&n.unshift(r),a[e](...n)});return(0,$i.default)(u,s)}c(to,"executeWithAutoPipelining");L.executeWithAutoPipelining=to});var no=C(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});var sl=require("crypto"),il=Te(),ol=Fe(),Pn=class{static{c(this,"Script")}constructor(e,r=null,n="",s=!1){this.lua=e,this.numberOfKeys=r,this.keyPrefix=n,this.readOnly=s,this.sha=(0,sl.createHash)("sha1").update(e).digest("hex");let i=this.sha,o=new WeakSet;this.Command=class extends il.default{static{c(this,"CustomScriptCommand")}toWritable(u){let l=this.reject;return this.reject=f=>{f.message.indexOf("NOSCRIPT")!==-1&&o.delete(u),l.call(this,f)},o.has(u)?this.name==="eval"&&(this.name="evalsha",this.args[0]=i):(o.add(u),this.name="eval",this.args[0]=e),super.toWritable(u)}}}execute(e,r,n,s){typeof this.numberOfKeys=="number"&&r.unshift(this.numberOfKeys),this.keyPrefix&&(n.keyPrefix=this.keyPrefix),this.readOnly&&(n.readOnly=!0);let i=new this.Command("evalsha",[this.sha,...r],n);return i.promise=i.promise.catch(o=>{if(o.message.indexOf("NOSCRIPT")===-1)throw o;let a=new this.Command("evalsha",[this.sha,...r],n);return(e.isPipeline?e.redis:e).sendCommand(a)}),(0,ol.default)(i.promise,s),e.sendCommand(i)}};jn.default=Pn});var Tr=C(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});var al=xt(),Ar=ro(),cl=Te(),ul=no(),Oe=class{static{c(this,"Commander")}constructor(){this.options={},this.scriptsSet={},this.addedBuiltinSet=new Set}getBuiltinCommands(){return Dn.slice(0)}createBuiltinCommand(e){return{string:Qe(null,e,"utf8"),buffer:Qe(null,e,null)}}addBuiltinCommand(e){this.addedBuiltinSet.add(e),this[e]=Qe(e,e,"utf8"),this[e+"Buffer"]=Qe(e+"Buffer",e,null)}defineCommand(e,r){let n=new ul.default(r.lua,r.numberOfKeys,this.options.keyPrefix,r.readOnly);this.scriptsSet[e]=n,this[e]=so(e,e,n,"utf8"),this[e+"Buffer"]=so(e+"Buffer",e,n,null)}sendCommand(e,r,n){throw new Error('"sendCommand" is not implemented')}},Dn=al.list.filter(t=>t!=="monitor");Dn.push("sentinel");Dn.forEach(function(t){Oe.prototype[t]=Qe(t,t,"utf8"),Oe.prototype[t+"Buffer"]=Qe(t+"Buffer",t,null)});Oe.prototype.call=Qe("call","utf8");Oe.prototype.callBuffer=Qe("callBuffer",null);Oe.prototype.send_command=Oe.prototype.call;function Qe(t,e,r){return typeof r>"u"&&(r=e,e=null),function(...n){let s=e||n.shift(),i=n[n.length-1];typeof i=="function"?n.pop():i=void 0;let o={errorStack:this.options.showFriendlyErrorStack?new Error:void 0,keyPrefix:this.options.keyPrefix,replyEncoding:r};return(0,Ar.shouldUseAutoPipelining)(this,t,s)?(0,Ar.executeWithAutoPipelining)(this,t,s,n,i):this.sendCommand(new cl.default(s,n,o,i))}}c(Qe,"generateFunction");function so(t,e,r,n){return function(...s){let i=typeof s[s.length-1]=="function"?s.pop():void 0,o={replyEncoding:n};return this.options.showFriendlyErrorStack&&(o.errorStack=new Error),(0,Ar.shouldUseAutoPipelining)(this,t,e)?(0,Ar.executeWithAutoPipelining)(this,t,e,s,i):r.execute(this,s,o,i)}}c(so,"generateScriptingFunction");Fn.default=Oe});var Qn=C(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});var qn=vr(),io=xt(),oo=Fe(),ll=require("util"),fl=Te(),dl=K(),hl=Tr();function pl(t,e){let r=qn(e[0]),n=t._groupsBySlot[r];for(let s=1;s<e.length;s++)if(t._groupsBySlot[qn(e[s])]!==n)return-1;return r}c(pl,"generateMultiWithNodes");var Ue=class extends hl.default{static{c(this,"Pipeline")}constructor(e){super(),this.redis=e,this.isPipeline=!0,this.replyPending=0,this._queue=[],this._result=[],this._transactions=0,this._shaToScript={},this.isCluster=this.redis.constructor.name==="Cluster"||this.redis.isCluster,this.options=e.options,Object.keys(e.scriptsSet).forEach(n=>{let s=e.scriptsSet[n];this._shaToScript[s.sha]=s,this[n]=e[n],this[n+"Buffer"]=e[n+"Buffer"]}),e.addedBuiltinSet.forEach(n=>{this[n]=e[n],this[n+"Buffer"]=e[n+"Buffer"]}),this.promise=new Promise((n,s)=>{this.resolve=n,this.reject=s});let r=this;Object.defineProperty(this,"length",{get:c(function(){return r._queue.length},"get")})}fillResult(e,r){if(this._queue[r].name==="exec"&&Array.isArray(e[1])){let s=e[1].length;for(let i=0;i<s;i++){if(e[1][i]instanceof Error)continue;let o=this._queue[r-(s-i)];try{e[1][i]=o.transformReply(e[1][i])}catch(a){e[1][i]=a}}}if(this._result[r]=e,--this.replyPending)return;if(this.isCluster){let s=!0,i;for(let o=0;o<this._result.length;++o){let a=this._result[o][0],u=this._queue[o];if(a){if(u.name==="exec"&&a.message==="EXECABORT Transaction discarded because of previous errors.")continue;if(!i)i={name:a.name,message:a.message};else if(i.name!==a.name||i.message!==a.message){s=!1;break}}else if(!u.inTransaction&&!((0,io.exists)(u.name)&&(0,io.hasFlag)(u.name,"readonly"))){s=!1;break}}if(i&&s){let o=this,a=i.message.split(" "),u=this._queue,l=!1;this._queue=[];for(let p=0;p<u.length;++p){if(a[0]==="ASK"&&!l&&u[p].name!=="asking"&&(!u[p-1]||u[p-1].name!=="asking")){let v=new fl.default("asking");v.ignore=!0,this.sendCommand(v)}u[p].initPromise(),this.sendCommand(u[p]),l=u[p].inTransaction}let f=!0;typeof this.leftRedirections>"u"&&(this.leftRedirections={});let d=c(function(){o.exec()},"exec"),h=this.redis;if(h.handleError(i,this.leftRedirections,{moved:c(function(p,v){o.preferKey=v,h.slots[a[1]]=[v],h._groupsBySlot[a[1]]=h._groupsIds[h.slots[a[1]].join(";")],h.refreshSlotsCache(),o.exec()},"moved"),ask:c(function(p,v){o.preferKey=v,o.exec()},"ask"),tryagain:d,clusterDown:d,connectionClosed:d,maxRedirections:c(()=>{f=!1},"maxRedirections"),defaults:c(()=>{f=!1},"defaults")}),f)return}}let n=0;for(let s=0;s<this._queue.length-n;++s)this._queue[s+n].ignore&&(n+=1),this._result[s]=this._result[s+n];this.resolve(this._result.slice(0,this._result.length-n))}sendCommand(e){this._transactions>0&&(e.inTransaction=!0);let r=this._queue.length;return e.pipelineIndex=r,e.promise.then(n=>{this.fillResult([null,n],r)}).catch(n=>{this.fillResult([n],r)}),this._queue.push(e),this}addBatch(e){let r,n,s;for(let i=0;i<e.length;++i)r=e[i],n=r[0],s=r.slice(1),this[n].apply(this,s);return this}};Ln.default=Ue;var ml=Ue.prototype.multi;Ue.prototype.multi=function(){return this._transactions+=1,ml.apply(this,arguments)};var ao=Ue.prototype.execBuffer;Ue.prototype.execBuffer=(0,ll.deprecate)(function(){return this._transactions>0&&(this._transactions-=1),ao.apply(this,arguments)},"Pipeline#execBuffer: Use Pipeline#exec instead");Ue.prototype.exec=function(t){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(dl.noop),t&&!this.nodeifiedPromise&&(this.nodeifiedPromise=!0,(0,oo.default)(this.promise,t)),this.redis.delayUntilReady(s=>{if(s){this.reject(s);return}this.exec(t)}),this.promise;if(this._transactions>0)return this._transactions-=1,ao.apply(this,arguments);this.nodeifiedPromise||(this.nodeifiedPromise=!0,(0,oo.default)(this.promise,t)),this._queue.length||this.resolve([]);let e;if(this.isCluster){let s=[];for(let i=0;i<this._queue.length;i++){let o=this._queue[i].getKeys();if(o.length&&s.push(o[0]),o.length&&qn.generateMulti(o)<0)return this.reject(new Error("All the keys in a pipeline command should belong to the same slot")),this.promise}if(s.length){if(e=pl(this.redis,s),e<0)return this.reject(new Error("All keys in the pipeline should belong to the same slots allocation group")),this.promise}else e=Math.random()*16384|0}let r=this;return n(),this.promise;function n(){let s=r.replyPending=r._queue.length,i;r.isCluster&&(i={slot:e,redis:r.redis.connectionPool.nodes.all[r.preferKey]});let o="",a,u={isPipeline:!0,destination:r.isCluster?i:{redis:r.redis},write(l){typeof l!="string"?(a||(a=[]),o&&(a.push(Buffer.from(o,"utf8")),o=""),a.push(l)):o+=l,--s||(a?(o&&a.push(Buffer.from(o,"utf8")),u.destination.redis.stream.write(Buffer.concat(a))):u.destination.redis.stream.write(o),s=r._queue.length,o="",a=void 0)}};for(let l=0;l<r._queue.length;++l)r.redis.sendCommand(r._queue[l],u,i);return r.promise}c(n,"execPipeline")}});var zn=C(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.addTransactionSupport=void 0;var Un=K(),Zn=Fe(),co=Qn();function gl(t){t.pipeline=function(n){let s=new co.default(this);return Array.isArray(n)&&s.addBatch(n),s};let{multi:e}=t;t.multi=function(n,s){if(typeof s>"u"&&!Array.isArray(n)&&(s=n,n=null),s&&s.pipeline===!1)return e.call(this);let i=new co.default(this);i.multi(),Array.isArray(n)&&i.addBatch(n);let o=i.exec;i.exec=function(u){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(Un.noop),(0,Zn.default)(new Promise((f,d)=>{this.redis.delayUntilReady(h=>{if(h){d(h);return}this.exec(i).then(f,d)})}),u);if(this._transactions>0&&o.call(i),this.nodeifiedPromise)return o.call(i);let l=o.call(i);return(0,Zn.default)(l.then(function(f){let d=f[f.length-1];if(typeof d>"u")throw new Error("Pipeline cannot be used to send any commands when the `exec()` has been called on it.");if(d[0]){d[0].previousErrors=[];for(let h=0;h<f.length-1;++h)f[h][0]&&d[0].previousErrors.push(f[h][0]);throw d[0]}return(0,Un.wrapMultiResult)(d[1])}),u)};let{execBuffer:a}=i;return i.execBuffer=function(u){return this._transactions>0&&a.call(i),i.exec(u)},i};let{exec:r}=t;t.exec=function(n){return(0,Zn.default)(r.call(this).then(function(s){return Array.isArray(s)&&(s=(0,Un.wrapMultiResult)(s)),s}),n)}}c(gl,"addTransactionSupport");Or.addTransactionSupport=gl});var Gn=C(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});function yl(t,e){Object.getOwnPropertyNames(e.prototype).forEach(r=>{Object.defineProperty(t.prototype,r,Object.getOwnPropertyDescriptor(e.prototype,r))})}c(yl,"applyMixin");Vn.default=yl});var lo=C(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.DEFAULT_CLUSTER_OPTIONS=void 0;var uo=require("dns");Mr.DEFAULT_CLUSTER_OPTIONS={clusterRetryStrategy:c(t=>Math.min(100+t*2,2e3),"clusterRetryStrategy"),enableOfflineQueue:!0,enableReadyCheck:!0,scaleReads:"master",maxRedirections:16,retryDelayOnMoved:0,retryDelayOnFailover:100,retryDelayOnClusterDown:100,retryDelayOnTryAgain:100,slotsRefreshTimeout:1e3,useSRVRecords:!1,resolveSrv:uo.resolveSrv,dnsLookup:uo.lookup,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[]}});var Rr=C($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.getConnectionName=$.weightSrvRecords=$.groupSrvRecords=$.getUniqueHostnamesFromOptions=$.normalizeNodeOptions=$.nodeKeyToRedisOptions=$.getNodeKey=void 0;var fo=K(),bl=require("net");function vl(t){return t.port=t.port||6379,t.host=t.host||"127.0.0.1",t.host+":"+t.port}c(vl,"getNodeKey");$.getNodeKey=vl;function _l(t){let e=t.lastIndexOf(":");if(e===-1)throw new Error(`Invalid node key ${t}`);return{host:t.slice(0,e),port:Number(t.slice(e+1))}}c(_l,"nodeKeyToRedisOptions");$.nodeKeyToRedisOptions=_l;function wl(t){return t.map(e=>{let r={};if(typeof e=="object")Object.assign(r,e);else if(typeof e=="string")Object.assign(r,(0,fo.parseURL)(e));else if(typeof e=="number")r.port=e;else throw new Error("Invalid argument "+e);return typeof r.port=="string"&&(r.port=parseInt(r.port,10)),delete r.db,r.port||(r.port=6379),r.host||(r.host="127.0.0.1"),(0,fo.resolveTLSProfile)(r)})}c(wl,"normalizeNodeOptions");$.normalizeNodeOptions=wl;function xl(t){let e={};return t.forEach(r=>{e[r.host]=!0}),Object.keys(e).filter(r=>!(0,bl.isIP)(r))}c(xl,"getUniqueHostnamesFromOptions");$.getUniqueHostnamesFromOptions=xl;function Cl(t){let e={};for(let r of t)e.hasOwnProperty(r.priority)?(e[r.priority].totalWeight+=r.weight,e[r.priority].records.push(r)):e[r.priority]={totalWeight:r.weight,records:[r]};return e}c(Cl,"groupSrvRecords");$.groupSrvRecords=Cl;function El(t){if(t.records.length===1)return t.totalWeight=0,t.records.shift();let e=Math.floor(Math.random()*(t.totalWeight+t.records.length)),r=0;for(let[n,s]of t.records.entries())if(r+=1+s.weight,r>e)return t.totalWeight-=s.weight,t.records.splice(n,1),s}c(El,"weightSrvRecords");$.weightSrvRecords=El;function Sl(t,e){let r=`ioredis-cluster(${t})`;return e?`${r}:${e}`:r}c(Sl,"getConnectionName");$.getConnectionName=Sl});var po=C(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});var ho=Rr(),Hn=K(),kl=Ze(),Ce=(0,Hn.Debug)("cluster:subscriber"),Wn=class{static{c(this,"ClusterSubscriber")}constructor(e,r){this.connectionPool=e,this.emitter=r,this.started=!1,this.subscriber=null,this.onSubscriberEnd=()=>{if(!this.started){Ce("subscriber has disconnected, but ClusterSubscriber is not started, so not reconnecting.");return}Ce("subscriber has disconnected, selecting a new one..."),this.selectSubscriber()},this.connectionPool.on("-node",(n,s)=>{!this.started||!this.subscriber||(0,ho.getNodeKey)(this.subscriber.options)===s&&(Ce("subscriber has left, selecting a new one..."),this.selectSubscriber())}),this.connectionPool.on("+node",()=>{!this.started||this.subscriber||(Ce("a new node is discovered and there is no subscriber, selecting a new one..."),this.selectSubscriber())})}getInstance(){return this.subscriber}start(){this.started=!0,this.selectSubscriber(),Ce("started")}stop(){this.started=!1,this.subscriber&&(this.subscriber.disconnect(),this.subscriber=null),Ce("stopped")}selectSubscriber(){let e=this.lastActiveSubscriber;e&&(e.off("end",this.onSubscriberEnd),e.disconnect()),this.subscriber&&(this.subscriber.off("end",this.onSubscriberEnd),this.subscriber.disconnect());let r=(0,Hn.sample)(this.connectionPool.getNodes());if(!r){Ce("selecting subscriber failed since there is no node discovered in the cluster yet"),this.subscriber=null;return}let{options:n}=r;Ce("selected a subscriber %s:%s",n.host,n.port),this.subscriber=new kl.default({port:n.port,host:n.host,username:n.username,password:n.password,enableReadyCheck:!0,connectionName:(0,ho.getConnectionName)("subscriber",n.connectionName),lazyConnect:!0,tls:n.tls,retryStrategy:null}),this.subscriber.on("error",Hn.noop),this.subscriber.once("end",this.onSubscriberEnd);let s={subscribe:[],psubscribe:[],ssubscribe:[]};if(e){let i=e.condition||e.prevCondition;i&&i.subscriber&&(s.subscribe=i.subscriber.channels("subscribe"),s.psubscribe=i.subscriber.channels("psubscribe"),s.ssubscribe=i.subscriber.channels("ssubscribe"))}if(s.subscribe.length||s.psubscribe.length||s.ssubscribe.length){let i=0;for(let o of["subscribe","psubscribe","ssubscribe"]){let a=s[o];a.length&&(i+=1,Ce("%s %d channels",o,a.length),this.subscriber[o](a).then(()=>{--i||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{Ce("failed to %s %d channels",o,a.length)}))}}else this.lastActiveSubscriber=this.subscriber;for(let i of["message","messageBuffer","smessage","smessageBuffer"])this.subscriber.on(i,(o,a)=>{this.emitter.emit(i,o,a)});for(let i of["pmessage","pmessageBuffer"])this.subscriber.on(i,(o,a,u)=>{this.emitter.emit(i,o,a,u)})}};Yn.default=Wn});var go=C($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});var Al=require("events"),Nr=K(),mo=Rr(),Tl=Ze(),Wt=(0,Nr.Debug)("cluster:connectionPool"),Kn=class extends Al.EventEmitter{static{c(this,"ConnectionPool")}constructor(e){super(),this.redisOptions=e,this.nodes={all:{},master:{},slave:{}},this.specifiedOptions={}}getNodes(e="all"){let r=this.nodes[e];return Object.keys(r).map(n=>r[n])}getInstanceByKey(e){return this.nodes.all[e]}getSampleInstance(e){let r=Object.keys(this.nodes[e]),n=(0,Nr.sample)(r);return this.nodes[e][n]}findOrCreate(e,r=!1){let n=(0,mo.getNodeKey)(e);r=!!r,this.specifiedOptions[n]?Object.assign(e,this.specifiedOptions[n]):this.specifiedOptions[n]=e;let s;return this.nodes.all[n]?(s=this.nodes.all[n],s.options.readOnly!==r&&(s.options.readOnly=r,Wt("Change role of %s to %s",n,r?"slave":"master"),s[r?"readonly":"readwrite"]().catch(Nr.noop),r?(delete this.nodes.master[n],this.nodes.slave[n]=s):(delete this.nodes.slave[n],this.nodes.master[n]=s))):(Wt("Connecting to %s as %s",n,r?"slave":"master"),s=new Tl.default((0,Nr.defaults)({retryStrategy:null,enableOfflineQueue:!0,readOnly:r},e,this.redisOptions,{lazyConnect:!0})),this.nodes.all[n]=s,this.nodes[r?"slave":"master"][n]=s,s.once("end",()=>{this.removeNode(n),this.emit("-node",s,n),Object.keys(this.nodes.all).length||this.emit("drain")}),this.emit("+node",s,n),s.on("error",function(i){this.emit("nodeError",i,n)})),s}reset(e){Wt("Reset with %O",e);let r={};e.forEach(n=>{let s=(0,mo.getNodeKey)(n);n.readOnly&&r[s]||(r[s]=n)}),Object.keys(this.nodes.all).forEach(n=>{r[n]||(Wt("Disconnect %s because the node does not hold any slot",n),this.nodes.all[n].disconnect(),this.removeNode(n))}),Object.keys(r).forEach(n=>{let s=r[n];this.findOrCreate(s,s.readOnly)})}removeNode(e){let{nodes:r}=this;r.all[e]&&(Wt("Remove %s from the pool",e),delete r.all[e]),delete r.master[e],delete r.slave[e]}};$n.default=Kn});var Ir=C((kp,yo)=>{"use strict";function q(t,r){var r=r||{};this._capacity=r.capacity,this._head=0,this._tail=0,Array.isArray(t)?this._fromArray(t):(this._capacityMask=3,this._list=new Array(4))}c(q,"Denque");q.prototype.peekAt=c(function(e){var r=e;if(r===(r|0)){var n=this.size();if(!(r>=n||r<-n))return r<0&&(r+=n),r=this._head+r&this._capacityMask,this._list[r]}},"peekAt");q.prototype.get=c(function(e){return this.peekAt(e)},"get");q.prototype.peek=c(function(){if(this._head!==this._tail)return this._list[this._head]},"peek");q.prototype.peekFront=c(function(){return this.peek()},"peekFront");q.prototype.peekBack=c(function(){return this.peekAt(-1)},"peekBack");Object.defineProperty(q.prototype,"length",{get:c(function(){return this.size()},"length")});q.prototype.size=c(function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},"size");q.prototype.unshift=c(function(e){if(arguments.length===0)return this.size();var r=this._list.length;return this._head=this._head-1+r&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},"unshift");q.prototype.shift=c(function(){var e=this._head;if(e!==this._tail){var r=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),r}},"shift");q.prototype.push=c(function(e){if(arguments.length===0)return this.size();var r=this._tail;return this._list[r]=e,this._tail=r+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},"push");q.prototype.pop=c(function(){var e=this._tail;if(e!==this._head){var r=this._list.length;this._tail=e-1+r&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=r>>>2&&this._shrinkArray(),n}},"pop");q.prototype.removeOne=c(function(e){var r=e;if(r===(r|0)&&this._head!==this._tail){var n=this.size(),s=this._list.length;if(!(r>=n||r<-n)){r<0&&(r+=n),r=this._head+r&this._capacityMask;var i=this._list[r],o;if(e<n/2){for(o=e;o>0;o--)this._list[r]=this._list[r=r-1+s&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+s&this._capacityMask}else{for(o=n-1-e;o>0;o--)this._list[r]=this._list[r=r+1+s&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+s&this._capacityMask}return i}}},"removeOne");q.prototype.remove=c(function(e,r){var n=e,s,i=r;if(n===(n|0)&&this._head!==this._tail){var o=this.size(),a=this._list.length;if(!(n>=o||n<-o||r<1)){if(n<0&&(n+=o),r===1||!r)return s=new Array(1),s[0]=this.removeOne(n),s;if(n===0&&n+r>=o)return s=this.toArray(),this.clear(),s;n+r>o&&(r=o-n);var u;for(s=new Array(r),u=0;u<r;u++)s[u]=this._list[this._head+n+u&this._capacityMask];if(n=this._head+n&this._capacityMask,e+r===o){for(this._tail=this._tail-r+a&this._capacityMask,u=r;u>0;u--)this._list[n=n+1+a&this._capacityMask]=void 0;return s}if(e===0){for(this._head=this._head+r+a&this._capacityMask,u=r-1;u>0;u--)this._list[n=n+1+a&this._capacityMask]=void 0;return s}if(n<o/2){for(this._head=this._head+e+r+a&this._capacityMask,u=e;u>0;u--)this.unshift(this._list[n=n-1+a&this._capacityMask]);for(n=this._head-1+a&this._capacityMask;i>0;)this._list[n=n-1+a&this._capacityMask]=void 0,i--;e<0&&(this._tail=n)}else{for(this._tail=n,n=n+r+a&this._capacityMask,u=o-(r+e);u>0;u--)this.push(this._list[n++]);for(n=this._tail;i>0;)this._list[n=n+1+a&this._capacityMask]=void 0,i--}return this._head<2&&this._tail>1e4&&this._tail<=a>>>2&&this._shrinkArray(),s}}},"remove");q.prototype.splice=c(function(e,r){var n=e;if(n===(n|0)){var s=this.size();if(n<0&&(n+=s),!(n>s))if(arguments.length>2){var i,o,a,u=arguments.length,l=this._list.length,f=2;if(!s||n<s/2){for(o=new Array(n),i=0;i<n;i++)o[i]=this._list[this._head+i&this._capacityMask];for(r===0?(a=[],n>0&&(this._head=this._head+n+l&this._capacityMask)):(a=this.remove(n,r),this._head=this._head+n+l&this._capacityMask);u>f;)this.unshift(arguments[--u]);for(i=n;i>0;i--)this.unshift(o[i-1])}else{o=new Array(s-(n+r));var d=o.length;for(i=0;i<d;i++)o[i]=this._list[this._head+n+r+i&this._capacityMask];for(r===0?(a=[],n!=s&&(this._tail=this._head+n+l&this._capacityMask)):(a=this.remove(n,r),this._tail=this._tail-d+l&this._capacityMask);f<u;)this.push(arguments[f++]);for(i=0;i<d;i++)this.push(o[i])}return a}else return this.remove(n,r)}},"splice");q.prototype.clear=c(function(){this._list=new Array(this._list.length),this._head=0,this._tail=0},"clear");q.prototype.isEmpty=c(function(){return this._head===this._tail},"isEmpty");q.prototype.toArray=c(function(){return this._copyArray(!1)},"toArray");q.prototype._fromArray=c(function(e){var r=e.length,n=this._nextPowerOf2(r);this._list=new Array(n),this._capacityMask=n-1,this._tail=r;for(var s=0;s<r;s++)this._list[s]=e[s]},"_fromArray");q.prototype._copyArray=c(function(e,r){var n=this._list,s=n.length,i=this.length;if(r=r|i,r==i&&this._head<this._tail)return this._list.slice(this._head,this._tail);var o=new Array(r),a=0,u;if(e||this._head>this._tail){for(u=this._head;u<s;u++)o[a++]=n[u];for(u=0;u<this._tail;u++)o[a++]=n[u]}else for(u=this._head;u<this._tail;u++)o[a++]=n[u];return o},"_copyArray");q.prototype._growArray=c(function(){if(this._head!=0){var e=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=e}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1},"_growArray");q.prototype._shrinkArray=c(function(){this._list.length>>>=1,this._capacityMask>>>=1},"_shrinkArray");q.prototype._nextPowerOf2=c(function(e){var r=Math.log(e)/Math.log(2),n=1<<r+1;return Math.max(n,4)},"_nextPowerOf2");yo.exports=q});var bo=C(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});var Ol=K(),Ml=Ir(),Rl=(0,Ol.Debug)("delayqueue"),Jn=class{static{c(this,"DelayQueue")}constructor(){this.queues={},this.timeouts={}}push(e,r,n){let s=n.callback||process.nextTick;this.queues[e]||(this.queues[e]=new Ml),this.queues[e].push(r),this.timeouts[e]||(this.timeouts[e]=setTimeout(()=>{s(()=>{this.timeouts[e]=null,this.execute(e)})},n.timeout))}execute(e){let r=this.queues[e];if(!r)return;let{length:n}=r;if(n)for(Rl("send %d commands in %s queue",n,e),this.queues[e]=null;r.length>0;)r.shift()()}};Xn.default=Jn});var rs=C(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});var vo=xt(),Eo=require("events"),Br=tt(),_o=Fe(),wo=Te(),es=Ki(),Nl=Ze(),Il=kr(),Bl=zn(),ce=K(),Pl=Gn(),jl=Tr(),Dl=lo(),Fl=po(),ql=go(),Ll=bo(),Ot=Rr(),xo=Ir(),Q=(0,ce.Debug)("cluster"),Co=new WeakSet,Yt=class t extends jl.default{static{c(this,"Cluster")}constructor(e,r={}){if(super(),this.slots=[],this._groupsIds={},this._groupsBySlot=Array(16384),this.isCluster=!0,this.retryAttempts=0,this.delayQueue=new Ll.default,this.offlineQueue=new xo,this.isRefreshing=!1,this._refreshSlotsCacheCallbacks=[],this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this._readyDelayedCallbacks=[],this.connectionEpoch=0,Eo.EventEmitter.call(this),this.startupNodes=e,this.options=(0,ce.defaults)({},r,Dl.DEFAULT_CLUSTER_OPTIONS,this.options),this.options.redisOptions&&this.options.redisOptions.keyPrefix&&!this.options.keyPrefix&&(this.options.keyPrefix=this.options.redisOptions.keyPrefix),typeof this.options.scaleReads!="function"&&["all","master","slave"].indexOf(this.options.scaleReads)===-1)throw new Error('Invalid option scaleReads "'+this.options.scaleReads+'". Expected "all", "master", "slave" or a custom function');this.connectionPool=new ql.default(this.options.redisOptions),this.connectionPool.on("-node",(n,s)=>{this.emit("-node",n)}),this.connectionPool.on("+node",n=>{this.emit("+node",n)}),this.connectionPool.on("drain",()=>{this.setStatus("close")}),this.connectionPool.on("nodeError",(n,s)=>{this.emit("node error",n,s)}),this.subscriber=new Fl.default(this.connectionPool,this),this.options.scripts&&Object.entries(this.options.scripts).forEach(([n,s])=>{this.defineCommand(n,s)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(n=>{Q("connecting failed: %s",n)})}connect(){return new Promise((e,r)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){r(new Error("Redis is already connecting/connected"));return}let n=++this.connectionEpoch;this.setStatus("connecting"),this.resolveStartupNodeHostnames().then(s=>{if(this.connectionEpoch!==n){Q("discard connecting after resolving startup nodes because epoch not match: %d != %d",n,this.connectionEpoch),r(new Br.RedisError("Connection is discarded because a new connection is made"));return}if(this.status!=="connecting"){Q("discard connecting after resolving startup nodes because the status changed to %s",this.status),r(new Br.RedisError("Connection is aborted"));return}this.connectionPool.reset(s);let i=c(()=>{this.setStatus("ready"),this.retryAttempts=0,this.executeOfflineCommands(),this.resetNodesRefreshInterval(),e()},"readyHandler"),o,a=c(()=>{this.invokeReadyDelayedCallbacks(void 0),this.removeListener("close",o),this.manuallyClosing=!1,this.setStatus("connect"),this.options.enableReadyCheck?this.readyCheck((u,l)=>{u||l?(Q("Ready check failed (%s). Reconnecting...",u||l),this.status==="connect"&&this.disconnect(!0)):i()}):i()},"refreshListener");o=c(()=>{let u=new Error("None of startup nodes is available");this.removeListener("refresh",a),this.invokeReadyDelayedCallbacks(u),r(u)},"closeListener"),this.once("refresh",a),this.once("close",o),this.once("close",this.handleCloseEvent.bind(this)),this.refreshSlotsCache(u=>{u&&u.message===es.default.defaultMessage&&(Nl.default.prototype.silentEmit.call(this,"error",u),this.connectionPool.reset([]))}),this.subscriber.start()}).catch(s=>{this.setStatus("close"),this.handleCloseEvent(s),this.invokeReadyDelayedCallbacks(s),r(s)})})}disconnect(e=!1){let r=this.status;this.setStatus("disconnecting"),e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null,Q("Canceled reconnecting attempts")),this.clearNodesRefreshInterval(),this.subscriber.stop(),r==="wait"?(this.setStatus("close"),this.handleCloseEvent()):this.connectionPool.reset([])}quit(e){let r=this.status;if(this.setStatus("disconnecting"),this.manuallyClosing=!0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.clearNodesRefreshInterval(),this.subscriber.stop(),r==="wait"){let n=(0,_o.default)(Promise.resolve("OK"),e);return setImmediate(function(){this.setStatus("close"),this.handleCloseEvent()}.bind(this)),n}return(0,_o.default)(Promise.all(this.nodes().map(n=>n.quit().catch(s=>{if(s.message===ce.CONNECTION_CLOSED_ERROR_MSG)return"OK";throw s}))).then(()=>"OK"),e)}duplicate(e=[],r={}){let n=e.length>0?e:this.startupNodes.slice(0),s=Object.assign({},this.options,r);return new t(n,s)}nodes(e="all"){if(e!=="all"&&e!=="master"&&e!=="slave")throw new Error('Invalid role "'+e+'". Expected "all", "master" or "slave"');return this.connectionPool.getNodes(e)}delayUntilReady(e){this._readyDelayedCallbacks.push(e)}get autoPipelineQueueSize(){let e=0;for(let r of this._autoPipelines.values())e+=r.length;return e}refreshSlotsCache(e){if(e&&this._refreshSlotsCacheCallbacks.push(e),this.isRefreshing)return;this.isRefreshing=!0;let r=this,n=c(a=>{this.isRefreshing=!1;for(let u of this._refreshSlotsCacheCallbacks)u(a);this._refreshSlotsCacheCallbacks=[]},"wrapper"),s=(0,ce.shuffle)(this.connectionPool.getNodes()),i=null;function o(a){if(a===s.length){let f=new es.default(es.default.defaultMessage,i);return n(f)}let u=s[a],l=`${u.options.host}:${u.options.port}`;Q("getting slot cache from %s",l),r.getInfoFromNode(u,function(f){switch(r.status){case"close":case"end":return n(new Error("Cluster is disconnected."));case"disconnecting":return n(new Error("Cluster is disconnecting."))}f?(r.emit("node error",f,l),i=f,o(a+1)):(r.emit("refresh"),n())})}c(o,"tryNode"),o(0)}sendCommand(e,r,n){if(this.status==="wait"&&this.connect().catch(ce.noop),this.status==="end")return e.reject(new Error(ce.CONNECTION_CLOSED_ERROR_MSG)),e.promise;let s=this.options.scaleReads;s!=="master"&&(e.isReadOnly||(0,vo.exists)(e.name)&&(0,vo.hasFlag)(e.name,"readonly")||(s="master"));let i=n?n.slot:e.getSlot(),o={},a=this;if(!n&&!Co.has(e)){Co.add(e);let l=e.reject;e.reject=function(f){let d=u.bind(null,!0);a.handleError(f,o,{moved:c(function(h,p){Q("command %s is moved to %s",e.name,p),i=Number(h),a.slots[h]?a.slots[h][0]=p:a.slots[h]=[p],a._groupsBySlot[h]=a._groupsIds[a.slots[h].join(";")],a.connectionPool.findOrCreate(a.natMapper(p)),u(),Q("refreshing slot caches... (triggered by MOVED error)"),a.refreshSlotsCache()},"moved"),ask:c(function(h,p){Q("command %s is required to ask %s:%s",e.name,p);let v=a.natMapper(p);a.connectionPool.findOrCreate(v),u(!1,`${v.host}:${v.port}`)},"ask"),tryagain:d,clusterDown:d,connectionClosed:d,maxRedirections:c(function(h){l.call(e,h)},"maxRedirections"),defaults:c(function(){l.call(e,f)},"defaults")})}}u();function u(l,f){if(a.status==="end"){e.reject(new Br.AbortError("Cluster is ended."));return}let d;if(a.status==="ready"||e.name==="cluster"){if(n&&n.redis)d=n.redis;else if(wo.default.checkFlag("ENTER_SUBSCRIBER_MODE",e.name)||wo.default.checkFlag("EXIT_SUBSCRIBER_MODE",e.name)){if(d=a.subscriber.getInstance(),!d){e.reject(new Br.AbortError("No subscriber for the cluster"));return}}else{if(!l){if(typeof i=="number"&&a.slots[i]){let h=a.slots[i];if(typeof s=="function"){let p=h.map(function(v){return a.connectionPool.getInstanceByKey(v)});d=s(p,e),Array.isArray(d)&&(d=(0,ce.sample)(d)),d||(d=p[0])}else{let p;s==="all"?p=(0,ce.sample)(h):s==="slave"&&h.length>1?p=(0,ce.sample)(h,1):p=h[0],d=a.connectionPool.getInstanceByKey(p)}}f&&(d=a.connectionPool.getInstanceByKey(f),d.asking())}d||(d=(typeof s=="function"?null:a.connectionPool.getSampleInstance(s))||a.connectionPool.getSampleInstance("all"))}n&&!n.redis&&(n.redis=d)}d?d.sendCommand(e,r):a.options.enableOfflineQueue?a.offlineQueue.push({command:e,stream:r,node:n}):e.reject(new Error("Cluster isn't ready and enableOfflineQueue options is false"))}return c(u,"tryConnection"),e.promise}sscanStream(e,r){return this.createScanStream("sscan",{key:e,options:r})}sscanBufferStream(e,r){return this.createScanStream("sscanBuffer",{key:e,options:r})}hscanStream(e,r){return this.createScanStream("hscan",{key:e,options:r})}hscanBufferStream(e,r){return this.createScanStream("hscanBuffer",{key:e,options:r})}zscanStream(e,r){return this.createScanStream("zscan",{key:e,options:r})}zscanBufferStream(e,r){return this.createScanStream("zscanBuffer",{key:e,options:r})}handleError(e,r,n){if(typeof r.value>"u"?r.value=this.options.maxRedirections:r.value-=1,r.value<=0){n.maxRedirections(new Error("Too many Cluster redirections. Last error: "+e));return}let s=e.message.split(" ");if(s[0]==="MOVED"){let i=this.options.retryDelayOnMoved;i&&typeof i=="number"?this.delayQueue.push("moved",n.moved.bind(null,s[1],s[2]),{timeout:i}):n.moved(s[1],s[2])}else s[0]==="ASK"?n.ask(s[1],s[2]):s[0]==="TRYAGAIN"?this.delayQueue.push("tryagain",n.tryagain,{timeout:this.options.retryDelayOnTryAgain}):s[0]==="CLUSTERDOWN"&&this.options.retryDelayOnClusterDown>0?this.delayQueue.push("clusterdown",n.connectionClosed,{timeout:this.options.retryDelayOnClusterDown,callback:this.refreshSlotsCache.bind(this)}):e.message===ce.CONNECTION_CLOSED_ERROR_MSG&&this.options.retryDelayOnFailover>0&&this.status==="ready"?this.delayQueue.push("failover",n.connectionClosed,{timeout:this.options.retryDelayOnFailover,callback:this.refreshSlotsCache.bind(this)}):n.defaults()}resetOfflineQueue(){this.offlineQueue=new xo}clearNodesRefreshInterval(){this.slotsTimer&&(clearTimeout(this.slotsTimer),this.slotsTimer=null)}resetNodesRefreshInterval(){if(this.slotsTimer||!this.options.slotsRefreshInterval)return;let e=c(()=>{this.slotsTimer=setTimeout(()=>{Q('refreshing slot caches... (triggered by "slotsRefreshInterval" option)'),this.refreshSlotsCache(()=>{e()})},this.options.slotsRefreshInterval)},"nextRound");e()}setStatus(e){Q("status: %s -> %s",this.status||"[empty]",e),this.status=e,process.nextTick(()=>{this.emit(e)})}handleCloseEvent(e){e&&Q("closed because %s",e);let r;!this.manuallyClosing&&typeof this.options.clusterRetryStrategy=="function"&&(r=this.options.clusterRetryStrategy.call(this,++this.retryAttempts,e)),typeof r=="number"?(this.setStatus("reconnecting"),this.reconnectTimeout=setTimeout(()=>{this.reconnectTimeout=null,Q("Cluster is disconnected. Retrying after %dms",r),this.connect().catch(function(n){Q("Got error %s when reconnecting. Ignoring...",n)})},r)):(this.setStatus("end"),this.flushQueue(new Error("None of startup nodes is available")))}flushQueue(e){let r;for(;r=this.offlineQueue.shift();)r.command.reject(e)}executeOfflineCommands(){if(this.offlineQueue.length){Q("send %d commands in offline queue",this.offlineQueue.length);let e=this.offlineQueue;this.resetOfflineQueue();let r;for(;r=e.shift();)this.sendCommand(r.command,r.stream,r.node)}}natMapper(e){if(this.options.natMap&&typeof this.options.natMap=="object"){let r=typeof e=="string"?e:`${e.host}:${e.port}`,n=this.options.natMap[r];if(n)return Q("NAT mapping %s -> %O",r,n),Object.assign({},n)}return typeof e=="string"?(0,Ot.nodeKeyToRedisOptions)(e):e}getInfoFromNode(e,r){if(!e)return r(new Error("Node is disconnected"));let n=e.duplicate({enableOfflineQueue:!0,enableReadyCheck:!1,retryStrategy:null,connectionName:(0,Ot.getConnectionName)("refresher",this.options.redisOptions&&this.options.redisOptions.connectionName)});n.on("error",ce.noop),n.cluster("SLOTS",(0,ce.timeout)((s,i)=>{if(n.disconnect(),s)return r(s);if(this.status==="disconnecting"||this.status==="close"||this.status==="end"){Q("ignore CLUSTER.SLOTS results (count: %d) since cluster status is %s",i.length,this.status),r();return}let o=[];Q("cluster slots result count: %d",i.length);for(let u=0;u<i.length;++u){let l=i[u],f=l[0],d=l[1],h=[];for(let p=2;p<l.length;p++){if(!l[p][0])continue;let v=this.natMapper({host:l[p][0],port:l[p][1]});v.readOnly=p!==2,o.push(v),h.push(v.host+":"+v.port)}Q("cluster slots result [%d]: slots %d~%d served by %s",u,f,d,h);for(let p=f;p<=d;p++)this.slots[p]=h}this._groupsIds=Object.create(null);let a=0;for(let u=0;u<16384;u++){let l=(this.slots[u]||[]).join(";");if(!l.length){this._groupsBySlot[u]=void 0;continue}this._groupsIds[l]||(this._groupsIds[l]=++a),this._groupsBySlot[u]=this._groupsIds[l]}this.connectionPool.reset(o),r()},this.options.slotsRefreshTimeout))}invokeReadyDelayedCallbacks(e){for(let r of this._readyDelayedCallbacks)process.nextTick(r,e);this._readyDelayedCallbacks=[]}readyCheck(e){this.cluster("INFO",(r,n)=>{if(r)return e(r);if(typeof n!="string")return e();let s,i=n.split(`\r
`);for(let o=0;o<i.length;++o){let a=i[o].split(":");if(a[0]==="cluster_state"){s=a[1];break}}s==="fail"?(Q("cluster state not ok (%s)",s),e(null,s)):e()})}resolveSrv(e){return new Promise((r,n)=>{this.options.resolveSrv(e,(s,i)=>{if(s)return n(s);let o=this,a=(0,Ot.groupSrvRecords)(i),u=Object.keys(a).sort((f,d)=>parseInt(f)-parseInt(d));function l(f){if(!u.length)return n(f);let d=u[0],h=a[d],p=(0,Ot.weightSrvRecords)(h);h.records.length||u.shift(),o.dnsLookup(p.name).then(v=>r({host:v,port:p.port}),l)}c(l,"tryFirstOne"),l()})})}dnsLookup(e){return new Promise((r,n)=>{this.options.dnsLookup(e,(s,i)=>{s?(Q("failed to resolve hostname %s to IP: %s",e,s.message),n(s)):(Q("resolved hostname %s to IP %s",e,i),r(i))})})}async resolveStartupNodeHostnames(){if(!Array.isArray(this.startupNodes)||this.startupNodes.length===0)throw new Error("`startupNodes` should contain at least one node.");let e=(0,Ot.normalizeNodeOptions)(this.startupNodes),r=(0,Ot.getUniqueHostnamesFromOptions)(e);if(r.length===0)return e;let n=await Promise.all(r.map((this.options.useSRVRecords?this.resolveSrv:this.dnsLookup).bind(this))),s=(0,ce.zipMap)(r,n);return e.map(i=>{let o=s.get(i.host);return o?this.options.useSRVRecords?Object.assign({},i,o):Object.assign({},i,{host:o}):i})}createScanStream(e,{key:r,options:n={}}){return new Il.default({objectMode:!0,key:r,redis:this,command:e,...n})}};(0,Pl.default)(Yt,Eo.EventEmitter);(0,Bl.addTransactionSupport)(Yt.prototype);ts.default=Yt});var Pr=C(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});var Ql=K(),Ul=(0,Ql.Debug)("AbstractConnector"),ns=class{static{c(this,"AbstractConnector")}constructor(e){this.connecting=!1,this.disconnectTimeout=e}check(e){return!0}disconnect(){if(this.connecting=!1,this.stream){let e=this.stream,r=setTimeout(()=>{Ul("stream %s:%s still open, destroying it",e.remoteAddress,e.remotePort),e.destroy()},this.disconnectTimeout);e.on("close",()=>clearTimeout(r)),e.end()}}};ss.default=ns});var So=C(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});var Zl=require("net"),zl=require("tls"),Vl=K(),Gl=Pr(),is=class extends Gl.default{static{c(this,"StandaloneConnector")}constructor(e){super(e.disconnectTimeout),this.options=e}connect(e){let{options:r}=this;this.connecting=!0;let n;return"path"in r&&r.path?n={path:r.path}:(n={},"port"in r&&r.port!=null&&(n.port=r.port),"host"in r&&r.host!=null&&(n.host=r.host),"family"in r&&r.family!=null&&(n.family=r.family)),r.tls&&Object.assign(n,r.tls),new Promise((s,i)=>{process.nextTick(()=>{if(!this.connecting){i(new Error(Vl.CONNECTION_CLOSED_ERROR_MSG));return}try{r.tls?this.stream=(0,zl.connect)(n):this.stream=(0,Zl.createConnection)(n)}catch(o){i(o);return}this.stream.once("error",o=>{this.firstError=o}),s(this.stream)})})}};os.default=is});var ko=C(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});function Hl(t,e){return(t.host||"127.0.0.1")===(e.host||"127.0.0.1")&&(t.port||26379)===(e.port||26379)}c(Hl,"isSentinelEql");var as=class{static{c(this,"SentinelIterator")}constructor(e){this.cursor=0,this.sentinels=e.slice(0)}next(){let e=this.cursor>=this.sentinels.length;return{done:e,value:e?void 0:this.sentinels[this.cursor++]}}reset(e){e&&this.sentinels.length>1&&this.cursor!==1&&this.sentinels.unshift(...this.sentinels.splice(this.cursor-1)),this.cursor=0}add(e){for(let r=0;r<this.sentinels.length;r++)if(Hl(e,this.sentinels[r]))return!1;return this.sentinels.push(e),!0}toString(){return`${JSON.stringify(this.sentinels)} @${this.cursor}`}};cs.default=as});var To=C(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.FailoverDetector=void 0;var Wl=K(),us=(0,Wl.Debug)("FailoverDetector"),Ao="+switch-master",ls=class{static{c(this,"FailoverDetector")}constructor(e,r){this.isDisconnected=!1,this.connector=e,this.sentinels=r}cleanup(){this.isDisconnected=!0;for(let e of this.sentinels)e.client.disconnect()}async subscribe(){us("Starting FailoverDetector");let e=[];for(let r of this.sentinels){let n=r.client.subscribe(Ao).catch(s=>{us("Failed to subscribe to failover messages on sentinel %s:%s (%s)",r.address.host||"127.0.0.1",r.address.port||26739,s.message)});e.push(n),r.client.on("message",s=>{!this.isDisconnected&&s===Ao&&this.disconnect()})}await Promise.all(e)}disconnect(){this.isDisconnected=!0,us("Failover detected, disconnecting"),this.connector.disconnect()}};jr.FailoverDetector=ls});var Dr=C($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.SentinelIterator=void 0;var Yl=require("net"),Kt=K(),Kl=require("tls"),Oo=ko();$t.SentinelIterator=Oo.default;var $l=Pr(),Jl=Ze(),Xl=To(),Mt=(0,Kt.Debug)("SentinelConnector"),fs=class extends $l.default{static{c(this,"SentinelConnector")}constructor(e){if(super(e.disconnectTimeout),this.options=e,this.emitter=null,this.failoverDetector=null,!this.options.sentinels.length)throw new Error("Requires at least one sentinel to connect to.");if(!this.options.name)throw new Error("Requires the name of master.");this.sentinelIterator=new Oo.default(this.options.sentinels)}check(e){let r=!e.role||this.options.role===e.role;return r||(Mt("role invalid, expected %s, but got %s",this.options.role,e.role),this.sentinelIterator.next(),this.sentinelIterator.next(),this.sentinelIterator.reset(!0)),r}disconnect(){super.disconnect(),this.failoverDetector&&this.failoverDetector.cleanup()}connect(e){this.connecting=!0,this.retryAttempts=0;let r,n=c(async()=>{let s=this.sentinelIterator.next();if(s.done){this.sentinelIterator.reset(!1);let u=typeof this.options.sentinelRetryStrategy=="function"?this.options.sentinelRetryStrategy(++this.retryAttempts):null,l=typeof u!="number"?"All sentinels are unreachable and retry is disabled.":`All sentinels are unreachable. Retrying from scratch after ${u}ms.`;r&&(l+=` Last error: ${r.message}`),Mt(l);let f=new Error(l);if(typeof u=="number")return e("error",f),await new Promise(d=>setTimeout(d,u)),n();throw f}let i=null,o=null;try{i=await this.resolve(s.value)}catch(u){o=u}if(!this.connecting)throw new Error(Kt.CONNECTION_CLOSED_ERROR_MSG);let a=s.value.host+":"+s.value.port;if(i)return Mt("resolved: %s:%s from sentinel %s",i.host,i.port,a),this.options.enableTLSForSentinelMode&&this.options.tls?(Object.assign(i,this.options.tls),this.stream=(0,Kl.connect)(i),this.stream.once("secureConnect",this.initFailoverDetector.bind(this))):(this.stream=(0,Yl.createConnection)(i),this.stream.once("connect",this.initFailoverDetector.bind(this))),this.stream.once("error",u=>{this.firstError=u}),this.stream;{let u=o?"failed to connect to sentinel "+a+" because "+o.message:"connected to sentinel "+a+" successfully, but got an invalid reply: "+i;return Mt(u),e("sentinelError",new Error(u)),o&&(r=o),n()}},"connectToNext");return n()}async updateSentinels(e){if(!this.options.updateSentinels)return;let r=await e.sentinel("sentinels",this.options.name);Array.isArray(r)&&(r.map(Kt.packObject).forEach(n=>{if((n.flags?n.flags.split(","):[]).indexOf("disconnected")===-1&&n.ip&&n.port){let i=this.sentinelNatResolve(Mo(n));this.sentinelIterator.add(i)&&Mt("adding sentinel %s:%s",i.host,i.port)}}),Mt("Updated internal sentinels: %s",this.sentinelIterator))}async resolveMaster(e){let r=await e.sentinel("get-master-addr-by-name",this.options.name);return await this.updateSentinels(e),this.sentinelNatResolve(Array.isArray(r)?{host:r[0],port:Number(r[1])}:null)}async resolveSlave(e){let r=await e.sentinel("slaves",this.options.name);if(!Array.isArray(r))return null;let n=r.map(Kt.packObject).filter(s=>s.flags&&!s.flags.match(/(disconnected|s_down|o_down)/));return this.sentinelNatResolve(ef(n,this.options.preferredSlaves))}sentinelNatResolve(e){return!e||!this.options.natMap?e:this.options.natMap[`${e.host}:${e.port}`]||e}connectToSentinel(e,r){return new Jl.default({port:e.port||26379,host:e.host,username:this.options.sentinelUsername||null,password:this.options.sentinelPassword||null,family:e.family||("path"in this.options&&this.options.path?void 0:this.options.family),tls:this.options.sentinelTLS,retryStrategy:null,enableReadyCheck:!1,connectTimeout:this.options.connectTimeout,commandTimeout:this.options.sentinelCommandTimeout,...r})}async resolve(e){let r=this.connectToSentinel(e);r.on("error",tf);try{return this.options.role==="slave"?await this.resolveSlave(r):await this.resolveMaster(r)}finally{r.disconnect()}}async initFailoverDetector(){var e;if(!this.options.failoverDetector)return;this.sentinelIterator.reset(!0);let r=[];for(;r.length<this.options.sentinelMaxConnections;){let{done:n,value:s}=this.sentinelIterator.next();if(n)break;let i=this.connectToSentinel(s,{lazyConnect:!0,retryStrategy:this.options.sentinelReconnectStrategy});i.on("reconnecting",()=>{var o;(o=this.emitter)===null||o===void 0||o.emit("sentinelReconnecting")}),r.push({address:s,client:i})}this.sentinelIterator.reset(!1),this.failoverDetector&&this.failoverDetector.cleanup(),this.failoverDetector=new Xl.FailoverDetector(this,r),await this.failoverDetector.subscribe(),(e=this.emitter)===null||e===void 0||e.emit("failoverSubscribed")}};$t.default=fs;function ef(t,e){if(t.length===0)return null;let r;if(typeof e=="function")r=e(t);else if(e!==null&&typeof e=="object"){let n=Array.isArray(e)?e:[e];n.sort((s,i)=>(s.prio||(s.prio=1),i.prio||(i.prio=1),s.prio<i.prio?-1:s.prio>i.prio?1:0));for(let s=0;s<n.length;s++){for(let i=0;i<t.length;i++){let o=t[i];if(o.ip===n[s].ip&&o.port===n[s].port){r=o;break}}if(r)break}}return r||(r=(0,Kt.sample)(t)),Mo(r)}c(ef,"selectPreferredSentinel");function Mo(t){return{host:t.ip,port:Number(t.port)}}c(Mo,"addressResponseToAddress");function tf(){}c(tf,"noop")});var Ro=C(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.SentinelConnector=Rt.StandaloneConnector=void 0;var rf=So();Rt.StandaloneConnector=rf.default;var nf=Dr();Rt.SentinelConnector=nf.default});var No=C(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});var sf=tt(),ds=class extends sf.AbortError{static{c(this,"MaxRetriesPerRequestError")}constructor(e){let r=`Reached the max retries per request limit (which is ${e}). Refer to "maxRetriesPerRequest" option for details.`;super(r),Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}};hs.default=ds});var Io=C(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.MaxRetriesPerRequestError=void 0;var of=No();Fr.MaxRetriesPerRequestError=of.default});var Lo=C((Gp,qo)=>{"use strict";var vs=require("buffer").Buffer,af=require("string_decoder").StringDecoder,ps=new af,Bo=tt(),cf=Bo.ReplyError,uf=Bo.ParserError,be=vs.allocUnsafe(32*1024),ee=0,qr=null,Jt=0,ms=0;function lf(t){let e=t.buffer.length-1;var r=t.offset,n=0,s=1;for(t.buffer[r]===45&&(s=-1,r++);r<e;){let i=t.buffer[r++];if(i===13)return t.offset=r+1,s*n;n=n*10+(i-48)}}c(lf,"parseSimpleNumbers");function ff(t){let e=t.buffer.length-1;var r=t.offset,n=0,s="";for(t.buffer[r]===45&&(s+="-",r++);r<e;){var i=t.buffer[r++];if(i===13)return t.offset=r+1,n!==0&&(s+=n),s;n>429496728?(s+=n*10+(i-48),n=0):i===48&&n===0?s+=0:n=n*10+(i-48)}}c(ff,"parseStringNumbers");function Po(t){let e=t.offset,r=t.buffer,n=r.length-1;for(var s=e;s<n;)if(r[s++]===13)return t.offset=s+1,t.optionReturnBuffers===!0?t.buffer.slice(e,s-1):t.buffer.toString("utf8",e,s-1)}c(Po,"parseSimpleString");function jo(t){let e=t.buffer.length-1;for(var r=t.offset,n=0;r<e;){let s=t.buffer[r++];if(s===13)return t.offset=r+1,n;n=n*10+(s-48)}}c(jo,"parseLength");function df(t){return t.optionStringNumbers===!0?ff(t):lf(t)}c(df,"parseInteger");function hf(t){let e=jo(t);if(e===void 0)return;if(e<0)return null;let r=t.offset+e;if(r+2>t.buffer.length){t.bigStrSize=r+2,t.totalChunkSize=t.buffer.length,t.bufferCache.push(t.buffer);return}let n=t.offset;return t.offset=r+2,t.optionReturnBuffers===!0?t.buffer.slice(n,r):t.buffer.toString("utf8",n,r)}c(hf,"parseBulkString");function pf(t){var e=Po(t);if(e!==void 0)return t.optionReturnBuffers===!0&&(e=e.toString()),new cf(e)}c(pf,"parseError");function mf(t,e){let r=new uf("Protocol error, got "+JSON.stringify(String.fromCharCode(e))+" as reply type byte",JSON.stringify(t.buffer),t.offset);t.buffer=null,t.returnFatalError(r)}c(mf,"handleError");function gf(t){let e=jo(t);if(e===void 0)return;if(e<0)return null;let r=new Array(e);return Do(t,r,0)}c(gf,"parseArray");function gs(t,e,r){t.arrayCache.push(e),t.arrayPos.push(r)}c(gs,"pushArrayCache");function ys(t){let e=t.arrayCache.pop();var r=t.arrayPos.pop();if(t.arrayCache.length){let n=ys(t);if(n===void 0){gs(t,e,r);return}e[r++]=n}return Do(t,e,r)}c(ys,"parseArrayChunks");function Do(t,e,r){let n=t.buffer.length;for(;r<e.length;){let s=t.offset;if(t.offset>=n){gs(t,e,r);return}let i=Fo(t,t.buffer[t.offset++]);if(i===void 0){t.arrayCache.length||t.bufferCache.length||(t.offset=s),gs(t,e,r);return}e[r]=i,r++}return e}c(Do,"parseArrayElements");function Fo(t,e){switch(e){case 36:return hf(t);case 43:return Po(t);case 42:return gf(t);case 58:return df(t);case 45:return pf(t);default:return mf(t,e)}}c(Fo,"parseType");function yf(){if(be.length>50*1024)if(Jt===1||ms>Jt*2){let t=Math.floor(be.length/10),e=t<ee?ee:t;ee=0,be=be.slice(e,be.length)}else ms++,Jt--;else clearInterval(qr),Jt=0,ms=0,qr=null}c(yf,"decreaseBufferPool");function bf(t){if(be.length<t+ee){let e=t>78643200?2:3;ee>1024*1024*111&&(ee=1024*1024*50),be=vs.allocUnsafe(t*e+ee),ee=0,Jt++,qr===null&&(qr=setInterval(yf,50))}}c(bf,"resizeBuffer");function vf(t){let e=t.bufferCache,r=t.offset;var n=e.length,s=t.bigStrSize-t.totalChunkSize;if(t.offset=s,s<=2){if(n===2)return e[0].toString("utf8",r,e[0].length+s-2);n--,s=e[e.length-2].length+s}for(var i=ps.write(e[0].slice(r)),o=1;o<n-1;o++)i+=ps.write(e[o]);return i+=ps.end(e[o].slice(0,s-2)),i}c(vf,"concatBulkString");function _f(t){let e=t.bufferCache,r=t.offset,n=t.bigStrSize-r-2;var s=e.length,i=t.bigStrSize-t.totalChunkSize;if(t.offset=i,i<=2){if(s===2)return e[0].slice(r,e[0].length+i-2);s--,i=e[e.length-2].length+i}bf(n);let o=ee;e[0].copy(be,o,r,e[0].length),ee+=e[0].length-r;for(var a=1;a<s-1;a++)e[a].copy(be,ee),ee+=e[a].length;return e[a].copy(be,ee,0,i-2),ee+=i-2,be.slice(o,ee)}c(_f,"concatBulkBuffer");var bs=class{static{c(this,"JavascriptRedisParser")}constructor(e){if(!e)throw new TypeError("Options are mandatory.");if(typeof e.returnError!="function"||typeof e.returnReply!="function")throw new TypeError("The returnReply and returnError options have to be functions.");this.setReturnBuffers(!!e.returnBuffers),this.setStringNumbers(!!e.stringNumbers),this.returnError=e.returnError,this.returnFatalError=e.returnFatalError||e.returnError,this.returnReply=e.returnReply,this.reset()}reset(){this.offset=0,this.buffer=null,this.bigStrSize=0,this.totalChunkSize=0,this.bufferCache=[],this.arrayCache=[],this.arrayPos=[]}setReturnBuffers(e){if(typeof e!="boolean")throw new TypeError("The returnBuffers argument has to be a boolean");this.optionReturnBuffers=e}setStringNumbers(e){if(typeof e!="boolean")throw new TypeError("The stringNumbers argument has to be a boolean");this.optionStringNumbers=e}execute(e){if(this.buffer===null)this.buffer=e,this.offset=0;else if(this.bigStrSize===0){let n=this.buffer.length,s=n-this.offset,i=vs.allocUnsafe(s+e.length);if(this.buffer.copy(i,0,this.offset,n),e.copy(i,s,0,e.length),this.buffer=i,this.offset=0,this.arrayCache.length){let o=ys(this);if(o===void 0)return;this.returnReply(o)}}else if(this.totalChunkSize+e.length>=this.bigStrSize){this.bufferCache.push(e);var r=this.optionReturnBuffers?_f(this):vf(this);if(this.bigStrSize=0,this.bufferCache=[],this.buffer=e,this.arrayCache.length&&(this.arrayCache[0][this.arrayPos[0]++]=r,r=ys(this),r===void 0))return;this.returnReply(r)}else{this.bufferCache.push(e),this.totalChunkSize+=e.length;return}for(;this.offset<this.buffer.length;){let n=this.offset,s=this.buffer[this.offset++],i=Fo(this,s);if(i===void 0){this.arrayCache.length||this.bufferCache.length||(this.offset=n);return}s===45?this.returnError(i):this.returnReply(i)}this.buffer=null}};qo.exports=bs});var Uo=C((Wp,Qo)=>{"use strict";Qo.exports=Lo()});var Zo=C(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});var ws=class{static{c(this,"SubscriptionSet")}constructor(){this.set={subscribe:{},psubscribe:{},ssubscribe:{}}}add(e,r){this.set[_s(e)][r]=!0}del(e,r){delete this.set[_s(e)][r]}channels(e){return Object.keys(this.set[_s(e)])}isEmpty(){return this.channels("subscribe").length===0&&this.channels("psubscribe").length===0&&this.channels("ssubscribe").length===0}};xs.default=ws;function _s(t){return t==="unsubscribe"?"subscribe":t==="punsubscribe"?"psubscribe":t==="sunsubscribe"?"ssubscribe":t}c(_s,"mapSet")});var Ho=C(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});var zo=Te(),wf=K(),xf=Uo(),Cf=Zo(),Ef=(0,wf.Debug)("dataHandler"),Cs=class{static{c(this,"DataHandler")}constructor(e,r){this.redis=e;let n=new xf({stringNumbers:r.stringNumbers,returnBuffers:!0,returnError:c(s=>{this.returnError(s)},"returnError"),returnFatalError:c(s=>{this.returnFatalError(s)},"returnFatalError"),returnReply:c(s=>{this.returnReply(s)},"returnReply")});e.stream.on("data",s=>{n.execute(s)})}returnFatalError(e){e.message+=". Please report this.",this.redis.recoverFromFatalError(e,e,{offlineQueue:!1})}returnError(e){let r=this.shiftCommand(e);r&&(e.command={name:r.command.name,args:r.command.args},this.redis.handleReconnection(e,r))}returnReply(e){if(this.handleMonitorReply(e)||this.handleSubscriberReply(e))return;let r=this.shiftCommand(e);r&&(zo.default.checkFlag("ENTER_SUBSCRIBER_MODE",r.command.name)?(this.redis.condition.subscriber=new Cf.default,this.redis.condition.subscriber.add(r.command.name,e[1].toString()),Vo(r.command,e[2])||this.redis.commandQueue.unshift(r)):zo.default.checkFlag("EXIT_SUBSCRIBER_MODE",r.command.name)?Go(r.command,e[2])||this.redis.commandQueue.unshift(r):r.command.resolve(e))}handleSubscriberReply(e){if(!this.redis.condition.subscriber)return!1;let r=Array.isArray(e)?e[0].toString():null;switch(Ef('receive reply "%s" in subscriber mode',r),r){case"message":this.redis.listeners("message").length>0&&this.redis.emit("message",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("messageBuffer",e[1],e[2]);break;case"pmessage":{let n=e[1].toString();this.redis.listeners("pmessage").length>0&&this.redis.emit("pmessage",n,e[2].toString(),e[3].toString()),this.redis.emit("pmessageBuffer",n,e[2],e[3]);break}case"smessage":{this.redis.listeners("smessage").length>0&&this.redis.emit("smessage",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("smessageBuffer",e[1],e[2]);break}case"ssubscribe":case"subscribe":case"psubscribe":{let n=e[1].toString();this.redis.condition.subscriber.add(r,n);let s=this.shiftCommand(e);if(!s)return;Vo(s.command,e[2])||this.redis.commandQueue.unshift(s);break}case"sunsubscribe":case"unsubscribe":case"punsubscribe":{let n=e[1]?e[1].toString():null;n&&this.redis.condition.subscriber.del(r,n);let s=e[2];Number(s)===0&&(this.redis.condition.subscriber=!1);let i=this.shiftCommand(e);if(!i)return;Go(i.command,s)||this.redis.commandQueue.unshift(i);break}default:{let n=this.shiftCommand(e);if(!n)return;n.command.resolve(e)}}return!0}handleMonitorReply(e){if(this.redis.status!=="monitoring")return!1;let r=e.toString();if(r==="OK")return!1;let n=r.indexOf(" "),s=r.slice(0,n),i=r.indexOf('"'),o=r.slice(i+1,-1).split('" "').map(u=>u.replace(/\\"/g,'"')),a=r.slice(n+2,i-2).split(" ");return this.redis.emit("monitor",s,o,a[1],a[0]),!0}shiftCommand(e){let r=this.redis.commandQueue.shift();if(!r){let n="Command queue state error. If you can reproduce this, please report it.",s=new Error(n+(e instanceof Error?` Last error: ${e.message}`:` Last reply: ${e.toString()}`));return this.redis.emit("error",s),null}return r}};Es.default=Cs;var ze=new WeakMap;function Vo(t,e){let r=ze.has(t)?ze.get(t):t.args.length;return r-=1,r<=0?(t.resolve(e),ze.delete(t),!0):(ze.set(t,r),!1)}c(Vo,"fillSubCommand");function Go(t,e){let r=ze.has(t)?ze.get(t):t.args.length;return r===0?Number(e)===0?(ze.delete(t),t.resolve(e),!0):!1:(r-=1,r<=0?(t.resolve(e),!0):(ze.set(t,r),!1))}c(Go,"fillUnsubCommand")});var Wo=C(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.readyHandler=de.errorHandler=de.closeHandler=de.connectHandler=void 0;var Sf=tt(),kf=Te(),Af=Io(),Xt=K(),Tf=Ho(),J=(0,Xt.Debug)("connection");function Of(t){return function(){t.setStatus("connect"),t.resetCommandQueue();let e=!1,{connectionEpoch:r}=t;t.condition.auth&&t.auth(t.condition.auth,function(n){r===t.connectionEpoch&&n&&(n.message.indexOf("no password is set")!==-1?console.warn("[WARN] Redis server does not require a password, but a password was supplied."):n.message.indexOf("without any password configured for the default user")!==-1?console.warn("[WARN] This Redis server's `default` user does not require a password, but a password was supplied"):n.message.indexOf("wrong number of arguments for 'auth' command")!==-1?console.warn(`[ERROR] The server returned "wrong number of arguments for 'auth' command". You are probably passing both username and password to Redis version 5 or below. You should only pass the 'password' option for Redis version 5 and under.`):(e=!0,t.recoverFromFatalError(n,n)))}),t.condition.select&&t.select(t.condition.select).catch(n=>{t.silentEmit("error",n)}),t.options.enableReadyCheck||de.readyHandler(t)(),new Tf.default(t,{stringNumbers:t.options.stringNumbers}),t.options.enableReadyCheck&&t._readyCheck(function(n,s){r===t.connectionEpoch&&(n?e||t.recoverFromFatalError(new Error("Ready check failed: "+n.message),n):t.connector.check(s)?de.readyHandler(t)():t.disconnect(!0))})}}c(Of,"connectHandler");de.connectHandler=Of;function Ss(t){let e=new Sf.AbortError("Command aborted due to connection close");return e.command={name:t.name,args:t.args},e}c(Ss,"abortError");function Mf(t){var e;let r=0;for(let n=0;n<t.length;){let s=(e=t.peekAt(n))===null||e===void 0?void 0:e.command,i=s.pipelineIndex;if((i===void 0||i===0)&&(r=0),i!==void 0&&i!==r++){t.remove(n,1),s.reject(Ss(s));continue}n++}}c(Mf,"abortIncompletePipelines");function Rf(t){var e;for(let r=0;r<t.length;){let n=(e=t.peekAt(r))===null||e===void 0?void 0:e.command;if(n.name==="multi")break;if(n.name==="exec"){t.remove(r,1),n.reject(Ss(n));break}n.inTransaction?(t.remove(r,1),n.reject(Ss(n))):r++}}c(Rf,"abortTransactionFragments");function Nf(t){return function(){let r=t.status;if(t.setStatus("close"),t.commandQueue.length&&Mf(t.commandQueue),t.offlineQueue.length&&Rf(t.offlineQueue),r==="ready"&&(t.prevCondition||(t.prevCondition=t.condition),t.commandQueue.length&&(t.prevCommandQueue=t.commandQueue)),t.manuallyClosing)return t.manuallyClosing=!1,J("skip reconnecting since the connection is manually closed."),e();if(typeof t.options.retryStrategy!="function")return J("skip reconnecting because `retryStrategy` is not a function"),e();let n=t.options.retryStrategy(++t.retryAttempts);if(typeof n!="number")return J("skip reconnecting because `retryStrategy` doesn't return a number"),e();J("reconnect in %sms",n),t.setStatus("reconnecting",n),t.reconnectTimeout=setTimeout(function(){t.reconnectTimeout=null,t.connect().catch(Xt.noop)},n);let{maxRetriesPerRequest:s}=t.options;typeof s=="number"&&(s<0?J("maxRetriesPerRequest is negative, ignoring..."):t.retryAttempts%(s+1)===0&&(J("reach maxRetriesPerRequest limitation, flushing command queue..."),t.flushQueue(new Af.MaxRetriesPerRequestError(s))))};function e(){t.setStatus("end"),t.flushQueue(new Error(Xt.CONNECTION_CLOSED_ERROR_MSG))}}c(Nf,"closeHandler");de.closeHandler=Nf;function If(t){return function(e){J("error: %s",e),t.silentEmit("error",e)}}c(If,"errorHandler");de.errorHandler=If;function Bf(t){return function(){if(t.setStatus("ready"),t.retryAttempts=0,t.options.monitor){t.call("monitor").then(()=>t.setStatus("monitoring"),n=>t.emit("error",n));let{sendCommand:r}=t;t.sendCommand=function(n){return kf.default.checkFlag("VALID_IN_MONITOR_MODE",n.name)?r.call(t,n):(n.reject(new Error("Connection is in monitoring mode, can't process commands.")),n.promise)},t.once("close",function(){delete t.sendCommand});return}let e=t.prevCondition?t.prevCondition.select:t.condition.select;if(t.options.connectionName&&(J("set the connection name [%s]",t.options.connectionName),t.client("setname",t.options.connectionName).catch(Xt.noop)),t.options.readOnly&&(J("set the connection to readonly mode"),t.readonly().catch(Xt.noop)),t.prevCondition){let r=t.prevCondition;if(t.prevCondition=null,r.subscriber&&t.options.autoResubscribe){t.condition.select!==e&&(J("connect to db [%d]",e),t.select(e));let n=r.subscriber.channels("subscribe");n.length&&(J("subscribe %d channels",n.length),t.subscribe(n));let s=r.subscriber.channels("psubscribe");s.length&&(J("psubscribe %d channels",s.length),t.psubscribe(s));let i=r.subscriber.channels("ssubscribe");i.length&&(J("ssubscribe %d channels",i.length),t.ssubscribe(i))}}if(t.prevCommandQueue)if(t.options.autoResendUnfulfilledCommands)for(J("resend %d unfulfilled commands",t.prevCommandQueue.length);t.prevCommandQueue.length>0;){let r=t.prevCommandQueue.shift();r.select!==t.condition.select&&r.command.name!=="select"&&t.select(r.select),t.sendCommand(r.command,r.stream)}else t.prevCommandQueue=null;if(t.offlineQueue.length){J("send %d commands in offline queue",t.offlineQueue.length);let r=t.offlineQueue;for(t.resetOfflineQueue();r.length>0;){let n=r.shift();n.select!==t.condition.select&&n.command.name!=="select"&&t.select(n.select),t.sendCommand(n.command,n.stream)}}t.condition.select!==e&&(J("connect to db [%d]",e),t.select(e))}}c(Bf,"readyHandler");de.readyHandler=Bf});var Yo=C(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.DEFAULT_REDIS_OPTIONS=void 0;Lr.DEFAULT_REDIS_OPTIONS={port:6379,host:"localhost",family:4,connectTimeout:1e4,disconnectTimeout:2e3,retryStrategy:c(function(t){return Math.min(t*50,2e3)},"retryStrategy"),keepAlive:0,noDelay:!0,connectionName:null,sentinels:null,name:null,role:"master",sentinelRetryStrategy:c(function(t){return Math.min(t*10,1e3)},"sentinelRetryStrategy"),sentinelReconnectStrategy:c(function(){return 6e4},"sentinelReconnectStrategy"),natMap:null,enableTLSForSentinelMode:!1,updateSentinels:!0,failoverDetector:!1,username:null,password:null,db:0,enableOfflineQueue:!0,enableReadyCheck:!0,autoResubscribe:!0,autoResendUnfulfilledCommands:!0,lazyConnect:!1,keyPrefix:"",reconnectOnError:null,readOnly:!1,stringNumbers:!1,maxRetriesPerRequest:20,maxLoadingRetryTime:1e4,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],sentinelMaxConnections:10}});var Ze=C(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});var Ko=xt(),Jo=require("events"),ks=Fe(),Pf=rs(),As=Te(),jf=Ro(),Df=Dr(),Ve=Wo(),Ff=Yo(),qf=kr(),Lf=zn(),st=K(),Qf=Gn(),Uf=Tr(),Ge=_r(),$o=Ir(),He=(0,st.Debug)("redis"),We=class t extends Uf.default{static{c(this,"Redis")}constructor(e,r,n){if(super(),this.status="wait",this.isCluster=!1,this.reconnectTimeout=null,this.connectionEpoch=0,this.retryAttempts=0,this.manuallyClosing=!1,this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this.parseOptions(e,r,n),Jo.EventEmitter.call(this),this.resetCommandQueue(),this.resetOfflineQueue(),this.options.Connector)this.connector=new this.options.Connector(this.options);else if(this.options.sentinels){let s=new Df.default(this.options);s.emitter=this,this.connector=s}else this.connector=new jf.StandaloneConnector(this.options);this.options.scripts&&Object.entries(this.options.scripts).forEach(([s,i])=>{this.defineCommand(s,i)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(Ge.noop)}static createClient(...e){return new t(...e)}get autoPipelineQueueSize(){let e=0;for(let r of this._autoPipelines.values())e+=r.length;return e}connect(e){let r=new Promise((n,s)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){s(new Error("Redis is already connecting/connected"));return}this.connectionEpoch+=1,this.setStatus("connecting");let{options:i}=this;this.condition={select:i.db,auth:i.username?[i.username,i.password]:i.password,subscriber:!1};let o=this;(0,ks.default)(this.connector.connect(function(a,u){o.silentEmit(a,u)}),function(a,u){if(a){o.flushQueue(a),o.silentEmit("error",a),s(a),o.setStatus("end");return}let l=i.tls?"secureConnect":"connect";if("sentinels"in i&&i.sentinels&&!i.enableTLSForSentinelMode&&(l="connect"),o.stream=u,i.noDelay&&u.setNoDelay(!0),typeof i.keepAlive=="number"&&(u.connecting?u.once(l,()=>{u.setKeepAlive(!0,i.keepAlive)}):u.setKeepAlive(!0,i.keepAlive)),u.connecting){if(u.once(l,Ve.connectHandler(o)),i.connectTimeout){let h=!1;u.setTimeout(i.connectTimeout,function(){if(h)return;u.setTimeout(0),u.destroy();let p=new Error("connect ETIMEDOUT");p.errorno="ETIMEDOUT",p.code="ETIMEDOUT",p.syscall="connect",Ve.errorHandler(o)(p)}),u.once(l,function(){h=!0,u.setTimeout(0)})}}else if(u.destroyed){let h=o.connector.firstError;h&&process.nextTick(()=>{Ve.errorHandler(o)(h)}),process.nextTick(Ve.closeHandler(o))}else process.nextTick(Ve.connectHandler(o));u.destroyed||(u.once("error",Ve.errorHandler(o)),u.once("close",Ve.closeHandler(o)));let f=c(function(){o.removeListener("close",d),n()},"connectionReadyHandler");var d=c(function(){o.removeListener("ready",f),s(new Error(st.CONNECTION_CLOSED_ERROR_MSG))},"connectionCloseHandler");o.once("ready",f),o.once("close",d)})});return(0,ks.default)(r,e)}disconnect(e=!1){e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.status==="wait"?Ve.closeHandler(this)():this.connector.disconnect()}end(){this.disconnect()}duplicate(e){return new t({...this.options,...e})}get mode(){var e;return this.options.monitor?"monitor":!((e=this.condition)===null||e===void 0)&&e.subscriber?"subscriber":"normal"}monitor(e){let r=this.duplicate({monitor:!0,lazyConnect:!1});return(0,ks.default)(new Promise(function(n,s){r.once("error",s),r.once("monitoring",function(){n(r)})}),e)}sendCommand(e,r){var n,s;if(this.status==="wait"&&this.connect().catch(Ge.noop),this.status==="end")return e.reject(new Error(st.CONNECTION_CLOSED_ERROR_MSG)),e.promise;if(!((n=this.condition)===null||n===void 0)&&n.subscriber&&!As.default.checkFlag("VALID_IN_SUBSCRIBER_MODE",e.name))return e.reject(new Error("Connection in subscriber mode, only subscriber commands may be used")),e.promise;typeof this.options.commandTimeout=="number"&&e.setTimeout(this.options.commandTimeout);let i=this.status==="ready"||!r&&this.status==="connect"&&(0,Ko.exists)(e.name)&&(0,Ko.hasFlag)(e.name,"loading");if(this.stream&&this.stream.writable?this.stream._writableState&&this.stream._writableState.ended&&(i=!1):i=!1,i)He.enabled&&He("write command[%s]: %d -> %s(%o)",this._getDescription(),(s=this.condition)===null||s===void 0?void 0:s.select,e.name,e.args),r?"isPipeline"in r&&r.isPipeline?r.write(e.toWritable(r.destination.redis.stream)):r.write(e.toWritable(r)):this.stream.write(e.toWritable(this.stream)),this.commandQueue.push({command:e,stream:r,select:this.condition.select}),As.default.checkFlag("WILL_DISCONNECT",e.name)&&(this.manuallyClosing=!0),this.options.socketTimeout!==void 0&&this.socketTimeoutTimer===void 0&&this.setSocketTimeout();else{if(!this.options.enableOfflineQueue)return e.reject(new Error("Stream isn't writeable and enableOfflineQueue options is false")),e.promise;if(e.name==="quit"&&this.offlineQueue.length===0)return this.disconnect(),e.resolve(Buffer.from("OK")),e.promise;He.enabled&&He("queue command[%s]: %d -> %s(%o)",this._getDescription(),this.condition.select,e.name,e.args),this.offlineQueue.push({command:e,stream:r,select:this.condition.select})}if(e.name==="select"&&(0,st.isInt)(e.args[0])){let o=parseInt(e.args[0],10);this.condition.select!==o&&(this.condition.select=o,this.emit("select",o),He("switch to db [%d]",this.condition.select))}return e.promise}setSocketTimeout(){this.socketTimeoutTimer=setTimeout(()=>{this.stream.destroy(new Error(`Socket timeout. Expecting data, but didn't receive any in ${this.options.socketTimeout}ms.`)),this.socketTimeoutTimer=void 0},this.options.socketTimeout),this.stream.once("data",()=>{clearTimeout(this.socketTimeoutTimer),this.socketTimeoutTimer=void 0,this.commandQueue.length!==0&&this.setSocketTimeout()})}scanStream(e){return this.createScanStream("scan",{options:e})}scanBufferStream(e){return this.createScanStream("scanBuffer",{options:e})}sscanStream(e,r){return this.createScanStream("sscan",{key:e,options:r})}sscanBufferStream(e,r){return this.createScanStream("sscanBuffer",{key:e,options:r})}hscanStream(e,r){return this.createScanStream("hscan",{key:e,options:r})}hscanBufferStream(e,r){return this.createScanStream("hscanBuffer",{key:e,options:r})}zscanStream(e,r){return this.createScanStream("zscan",{key:e,options:r})}zscanBufferStream(e,r){return this.createScanStream("zscanBuffer",{key:e,options:r})}silentEmit(e,r){let n;if(!(e==="error"&&(n=r,this.status==="end"||this.manuallyClosing&&n instanceof Error&&(n.message===st.CONNECTION_CLOSED_ERROR_MSG||n.syscall==="connect"||n.syscall==="read"))))return this.listeners(e).length>0?this.emit.apply(this,arguments):(n&&n instanceof Error&&console.error("[ioredis] Unhandled error event:",n.stack),!1)}recoverFromFatalError(e,r,n){this.flushQueue(r,n),this.silentEmit("error",r),this.disconnect(!0)}handleReconnection(e,r){var n;let s=!1;switch(this.options.reconnectOnError&&(s=this.options.reconnectOnError(e)),s){case 1:case!0:this.status!=="reconnecting"&&this.disconnect(!0),r.command.reject(e);break;case 2:this.status!=="reconnecting"&&this.disconnect(!0),((n=this.condition)===null||n===void 0?void 0:n.select)!==r.select&&r.command.name!=="select"&&this.select(r.select),this.sendCommand(r.command);break;default:r.command.reject(e)}}_getDescription(){let e;return"path"in this.options&&this.options.path?e=this.options.path:this.stream&&this.stream.remoteAddress&&this.stream.remotePort?e=this.stream.remoteAddress+":"+this.stream.remotePort:"host"in this.options&&this.options.host?e=this.options.host+":"+this.options.port:e="",this.options.connectionName&&(e+=` (${this.options.connectionName})`),e}resetCommandQueue(){this.commandQueue=new $o}resetOfflineQueue(){this.offlineQueue=new $o}parseOptions(...e){let r={},n=!1;for(let s=0;s<e.length;++s){let i=e[s];if(!(i===null||typeof i>"u"))if(typeof i=="object")(0,Ge.defaults)(r,i);else if(typeof i=="string")(0,Ge.defaults)(r,(0,st.parseURL)(i)),i.startsWith("rediss://")&&(n=!0);else if(typeof i=="number")r.port=i;else throw new Error("Invalid argument "+i)}n&&(0,Ge.defaults)(r,{tls:!0}),(0,Ge.defaults)(r,t.defaultOptions),typeof r.port=="string"&&(r.port=parseInt(r.port,10)),typeof r.db=="string"&&(r.db=parseInt(r.db,10)),this.options=(0,st.resolveTLSProfile)(r)}setStatus(e,r){He.enabled&&He("status[%s]: %s -> %s",this._getDescription(),this.status||"[empty]",e),this.status=e,process.nextTick(this.emit.bind(this,e,r))}createScanStream(e,{key:r,options:n={}}){return new qf.default({objectMode:!0,key:r,redis:this,command:e,...n})}flushQueue(e,r){r=(0,Ge.defaults)({},r,{offlineQueue:!0,commandQueue:!0});let n;if(r.offlineQueue)for(;n=this.offlineQueue.shift();)n.command.reject(e);if(r.commandQueue&&this.commandQueue.length>0)for(this.stream&&this.stream.removeAllListeners("data");n=this.commandQueue.shift();)n.command.reject(e)}_readyCheck(e){let r=this;this.info(function(n,s){if(n)return n.message&&n.message.includes("NOPERM")?(console.warn(`Skipping the ready check because INFO command fails: "${n.message}". You can disable ready check with "enableReadyCheck". More: https://github.com/luin/ioredis/wiki/Disable-ready-check.`),e(null,{})):e(n);if(typeof s!="string")return e(null,s);let i={},o=s.split(`\r
`);for(let a=0;a<o.length;++a){let[u,...l]=o[a].split(":"),f=l.join(":");f&&(i[u]=f)}if(!i.loading||i.loading==="0")e(null,i);else{let a=(i.loading_eta_seconds||1)*1e3,u=r.options.maxLoadingRetryTime&&r.options.maxLoadingRetryTime<a?r.options.maxLoadingRetryTime:a;He("Redis server still loading, trying again in "+u+"ms"),setTimeout(function(){r._readyCheck(e)},u)}}).catch(Ge.noop)}};We.Cluster=Pf.default;We.Command=As.default;We.defaultOptions=Ff.DEFAULT_REDIS_OPTIONS;(0,Qf.default)(We,Jo.EventEmitter);(0,Lf.addTransactionSupport)(We.prototype);Ts.default=We});var ta=C((F,ea)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.print=F.ReplyError=F.SentinelIterator=F.SentinelConnector=F.AbstractConnector=F.Pipeline=F.ScanStream=F.Command=F.Cluster=F.Redis=F.default=void 0;F=ea.exports=Ze().default;var Zf=Ze();Object.defineProperty(F,"default",{enumerable:!0,get:c(function(){return Zf.default},"get")});var zf=Ze();Object.defineProperty(F,"Redis",{enumerable:!0,get:c(function(){return zf.default},"get")});var Vf=rs();Object.defineProperty(F,"Cluster",{enumerable:!0,get:c(function(){return Vf.default},"get")});var Gf=Te();Object.defineProperty(F,"Command",{enumerable:!0,get:c(function(){return Gf.default},"get")});var Hf=kr();Object.defineProperty(F,"ScanStream",{enumerable:!0,get:c(function(){return Hf.default},"get")});var Wf=Qn();Object.defineProperty(F,"Pipeline",{enumerable:!0,get:c(function(){return Wf.default},"get")});var Yf=Pr();Object.defineProperty(F,"AbstractConnector",{enumerable:!0,get:c(function(){return Yf.default},"get")});var Xo=Dr();Object.defineProperty(F,"SentinelConnector",{enumerable:!0,get:c(function(){return Xo.default},"get")});Object.defineProperty(F,"SentinelIterator",{enumerable:!0,get:c(function(){return Xo.SentinelIterator},"get")});F.ReplyError=tt().ReplyError;Object.defineProperty(F,"Promise",{get(){return console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used."),Promise},set(t){console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used.")}});function Kf(t,e){console.log(t?"Error: "+t:"Reply: "+e)}c(Kf,"print");F.print=Kf});var th={};wa(th,{GeneralBank:()=>nn,SimpleTable:()=>on,Stopwatch:()=>cn,TSRedis:()=>Ps,UserError:()=>an});module.exports=xa(th);var _t=9e15,je=1e9,Kr="0123456789abcdef",ur="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",lr="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",$r={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-_t,maxE:_t,crypto:!1},Ls,ke,A=!0,dr="[DecimalError] ",Pe=dr+"Invalid argument: ",Qs=dr+"Precision limit exceeded",Us=dr+"crypto unavailable",Zs="[object Decimal]",Y=Math.floor,Z=Math.pow,Ca=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Ea=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Sa=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,zs=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ye=1e7,E=7,ka=9007199254740991,Aa=ur.length-1,Jr=lr.length-1,m={toStringTag:Zs};m.absoluteValue=m.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),w(t)};m.ceil=function(){return w(new this.constructor(this),this.e+1,2)};m.clampedTo=m.clamp=function(t,e){var r,n=this,s=n.constructor;if(t=new s(t),e=new s(e),!t.s||!e.s)return new s(NaN);if(t.gt(e))throw Error(Pe+e);return r=n.cmp(t),r<0?t:n.cmp(e)>0?e:new s(n)};m.comparedTo=m.cmp=function(t){var e,r,n,s,i=this,o=i.d,a=(t=new i.constructor(t)).d,u=i.s,l=t.s;if(!o||!a)return!u||!l?NaN:u!==l?u:o===a?0:!o^u<0?1:-1;if(!o[0]||!a[0])return o[0]?u:a[0]?-l:0;if(u!==l)return u;if(i.e!==t.e)return i.e>t.e^u<0?1:-1;for(n=o.length,s=a.length,e=0,r=n<s?n:s;e<r;++e)if(o[e]!==a[e])return o[e]>a[e]^u<0?1:-1;return n===s?0:n>s^u<0?1:-1};m.cosine=m.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+E,n.rounding=1,r=Ta(n,Ys(n,r)),n.precision=t,n.rounding=e,w(ke==2||ke==3?r.neg():r,t,e,!0)):new n(1):new n(NaN)};m.cubeRoot=m.cbrt=function(){var t,e,r,n,s,i,o,a,u,l,f=this,d=f.constructor;if(!f.isFinite()||f.isZero())return new d(f);for(A=!1,i=f.s*Z(f.s*f,1/3),!i||Math.abs(i)==1/0?(r=V(f.d),t=f.e,(i=(t-r.length+1)%3)&&(r+=i==1||i==-2?"0":"00"),i=Z(r,1/3),t=Y((t+1)/3)-(t%3==(t<0?-1:2)),i==1/0?r="5e"+t:(r=i.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new d(r),n.s=f.s):n=new d(i.toString()),o=(t=d.precision)+3;;)if(a=n,u=a.times(a).times(a),l=u.plus(f),n=j(l.plus(f).times(a),l.plus(u),o+2,1),V(a.d).slice(0,o)===(r=V(n.d)).slice(0,o))if(r=r.slice(o-3,o+1),r=="9999"||!s&&r=="4999"){if(!s&&(w(a,t+1,0),a.times(a).times(a).eq(f))){n=a;break}o+=4,s=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(w(n,t+1,1),e=!n.times(n).times(n).eq(f));break}return A=!0,w(n,t,d.rounding,e)};m.decimalPlaces=m.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-Y(this.e/E))*E,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};m.dividedBy=m.div=function(t){return j(this,new this.constructor(t))};m.dividedToIntegerBy=m.divToInt=function(t){var e=this,r=e.constructor;return w(j(e,new r(t),0,1,1),r.precision,r.rounding)};m.equals=m.eq=function(t){return this.cmp(t)===0};m.floor=function(){return w(new this.constructor(this),this.e+1,3)};m.greaterThan=m.gt=function(t){return this.cmp(t)>0};m.greaterThanOrEqualTo=m.gte=function(t){var e=this.cmp(t);return e==1||e===0};m.hyperbolicCosine=m.cosh=function(){var t,e,r,n,s,i=this,o=i.constructor,a=new o(1);if(!i.isFinite())return new o(i.s?1/0:NaN);if(i.isZero())return a;r=o.precision,n=o.rounding,o.precision=r+Math.max(i.e,i.sd())+4,o.rounding=1,s=i.d.length,s<32?(t=Math.ceil(s/3),e=(1/pr(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),i=wt(o,1,i.times(e),new o(1),!0);for(var u,l=t,f=new o(8);l--;)u=i.times(i),i=a.minus(u.times(f.minus(u.times(f))));return w(i,o.precision=r,o.rounding=n,!0)};m.hyperbolicSine=m.sinh=function(){var t,e,r,n,s=this,i=s.constructor;if(!s.isFinite()||s.isZero())return new i(s);if(e=i.precision,r=i.rounding,i.precision=e+Math.max(s.e,s.sd())+4,i.rounding=1,n=s.d.length,n<3)s=wt(i,2,s,s,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,s=s.times(1/pr(5,t)),s=wt(i,2,s,s,!0);for(var o,a=new i(5),u=new i(16),l=new i(20);t--;)o=s.times(s),s=s.times(a.plus(o.times(u.times(o).plus(l))))}return i.precision=e,i.rounding=r,w(s,e,r,!0)};m.hyperbolicTangent=m.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,j(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)};m.inverseCosine=m.acos=function(){var t,e=this,r=e.constructor,n=e.abs().cmp(1),s=r.precision,i=r.rounding;return n!==-1?n===0?e.isNeg()?ge(r,s,i):new r(0):new r(NaN):e.isZero()?ge(r,s+4,i).times(.5):(r.precision=s+6,r.rounding=1,e=e.asin(),t=ge(r,s+4,i).times(.5),r.precision=s,r.rounding=i,t.minus(e))};m.inverseHyperbolicCosine=m.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,A=!1,r=r.times(r).minus(1).sqrt().plus(r),A=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)};m.inverseHyperbolicSine=m.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,A=!1,r=r.times(r).plus(1).sqrt().plus(r),A=!0,n.precision=t,n.rounding=e,r.ln())};m.inverseHyperbolicTangent=m.atanh=function(){var t,e,r,n,s=this,i=s.constructor;return s.isFinite()?s.e>=0?new i(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(t=i.precision,e=i.rounding,n=s.sd(),Math.max(n,t)<2*-s.e-1?w(new i(s),t,e,!0):(i.precision=r=n-s.e,s=j(s.plus(1),new i(1).minus(s),r+t,1),i.precision=t+4,i.rounding=1,s=s.ln(),i.precision=t,i.rounding=e,s.times(.5))):new i(NaN)};m.inverseSine=m.asin=function(){var t,e,r,n,s=this,i=s.constructor;return s.isZero()?new i(s):(e=s.abs().cmp(1),r=i.precision,n=i.rounding,e!==-1?e===0?(t=ge(i,r+4,n).times(.5),t.s=s.s,t):new i(NaN):(i.precision=r+6,i.rounding=1,s=s.div(new i(1).minus(s.times(s)).sqrt().plus(1)).atan(),i.precision=r,i.rounding=n,s.times(2)))};m.inverseTangent=m.atan=function(){var t,e,r,n,s,i,o,a,u,l=this,f=l.constructor,d=f.precision,h=f.rounding;if(l.isFinite()){if(l.isZero())return new f(l);if(l.abs().eq(1)&&d+4<=Jr)return o=ge(f,d+4,h).times(.25),o.s=l.s,o}else{if(!l.s)return new f(NaN);if(d+4<=Jr)return o=ge(f,d+4,h).times(.5),o.s=l.s,o}for(f.precision=a=d+10,f.rounding=1,r=Math.min(28,a/E+2|0),t=r;t;--t)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(A=!1,e=Math.ceil(a/E),n=1,u=l.times(l),o=new f(l),s=l;t!==-1;)if(s=s.times(u),i=o.minus(s.div(n+=2)),s=s.times(u),o=i.plus(s.div(n+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===i.d[t]&&t--;);return r&&(o=o.times(2<<r-1)),A=!0,w(o,f.precision=d,f.rounding=h,!0)};m.isFinite=function(){return!!this.d};m.isInteger=m.isInt=function(){return!!this.d&&Y(this.e/E)>this.d.length-2};m.isNaN=function(){return!this.s};m.isNegative=m.isNeg=function(){return this.s<0};m.isPositive=m.isPos=function(){return this.s>0};m.isZero=function(){return!!this.d&&this.d[0]===0};m.lessThan=m.lt=function(t){return this.cmp(t)<0};m.lessThanOrEqualTo=m.lte=function(t){return this.cmp(t)<1};m.logarithm=m.log=function(t){var e,r,n,s,i,o,a,u,l=this,f=l.constructor,d=f.precision,h=f.rounding,p=5;if(t==null)t=new f(10),e=!0;else{if(t=new f(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new f(NaN);e=t.eq(10)}if(r=l.d,l.s<0||!r||!r[0]||l.eq(1))return new f(r&&!r[0]?-1/0:l.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)i=!0;else{for(s=r[0];s%10===0;)s/=10;i=s!==1}if(A=!1,a=d+p,o=Be(l,a),n=e?fr(f,a+10):Be(t,a),u=j(o,n,a,1),Zt(u.d,s=d,h))do if(a+=10,o=Be(l,a),n=e?fr(f,a+10):Be(t,a),u=j(o,n,a,1),!i){+V(u.d).slice(s+1,s+15)+1==1e14&&(u=w(u,d+1,0));break}while(Zt(u.d,s+=10,h));return A=!0,w(u,d,h)};m.minus=m.sub=function(t){var e,r,n,s,i,o,a,u,l,f,d,h,p=this,v=p.constructor;if(t=new v(t),!p.d||!t.d)return!p.s||!t.s?t=new v(NaN):p.d?t.s=-t.s:t=new v(t.d||p.s!==t.s?p:NaN),t;if(p.s!=t.s)return t.s=-t.s,p.plus(t);if(l=p.d,h=t.d,a=v.precision,u=v.rounding,!l[0]||!h[0]){if(h[0])t.s=-t.s;else if(l[0])t=new v(p);else return new v(u===3?-0:0);return A?w(t,a,u):t}if(r=Y(t.e/E),f=Y(p.e/E),l=l.slice(),i=f-r,i){for(d=i<0,d?(e=l,i=-i,o=h.length):(e=h,r=f,o=l.length),n=Math.max(Math.ceil(a/E),o)+2,i>n&&(i=n,e.length=1),e.reverse(),n=i;n--;)e.push(0);e.reverse()}else{for(n=l.length,o=h.length,d=n<o,d&&(o=n),n=0;n<o;n++)if(l[n]!=h[n]){d=l[n]<h[n];break}i=0}for(d&&(e=l,l=h,h=e,t.s=-t.s),o=l.length,n=h.length-o;n>0;--n)l[o++]=0;for(n=h.length;n>i;){if(l[--n]<h[n]){for(s=n;s&&l[--s]===0;)l[s]=ye-1;--l[s],l[n]+=ye}l[n]-=h[n]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(t.d=l,t.e=hr(l,r),A?w(t,a,u):t):new v(u===3?-0:0)};m.modulo=m.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?w(new n(r),n.precision,n.rounding):(A=!1,n.modulo==9?(e=j(r,t.abs(),0,3,1),e.s*=t.s):e=j(r,t,0,n.modulo,1),e=e.times(t),A=!0,r.minus(e))};m.naturalExponential=m.exp=function(){return Xr(this)};m.naturalLogarithm=m.ln=function(){return Be(this)};m.negated=m.neg=function(){var t=new this.constructor(this);return t.s=-t.s,w(t)};m.plus=m.add=function(t){var e,r,n,s,i,o,a,u,l,f,d=this,h=d.constructor;if(t=new h(t),!d.d||!t.d)return!d.s||!t.s?t=new h(NaN):d.d||(t=new h(t.d||d.s===t.s?d:NaN)),t;if(d.s!=t.s)return t.s=-t.s,d.minus(t);if(l=d.d,f=t.d,a=h.precision,u=h.rounding,!l[0]||!f[0])return f[0]||(t=new h(d)),A?w(t,a,u):t;if(i=Y(d.e/E),n=Y(t.e/E),l=l.slice(),s=i-n,s){for(s<0?(r=l,s=-s,o=f.length):(r=f,n=i,o=l.length),i=Math.ceil(a/E),o=i>o?i+1:o+1,s>o&&(s=o,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(o=l.length,s=f.length,o-s<0&&(s=o,r=f,f=l,l=r),e=0;s;)e=(l[--s]=l[s]+f[s]+e)/ye|0,l[s]%=ye;for(e&&(l.unshift(e),++n),o=l.length;l[--o]==0;)l.pop();return t.d=l,t.e=hr(l,n),A?w(t,a,u):t};m.precision=m.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Pe+t);return r.d?(e=Vs(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};m.round=function(){var t=this,e=t.constructor;return w(new e(t),t.e+1,e.rounding)};m.sine=m.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+E,n.rounding=1,r=Ma(n,Ys(n,r)),n.precision=t,n.rounding=e,w(ke>2?r.neg():r,t,e,!0)):new n(NaN)};m.squareRoot=m.sqrt=function(){var t,e,r,n,s,i,o=this,a=o.d,u=o.e,l=o.s,f=o.constructor;if(l!==1||!a||!a[0])return new f(!l||l<0&&(!a||a[0])?NaN:a?o:1/0);for(A=!1,l=Math.sqrt(+o),l==0||l==1/0?(e=V(a),(e.length+u)%2==0&&(e+="0"),l=Math.sqrt(e),u=Y((u+1)/2)-(u<0||u%2),l==1/0?e="5e"+u:(e=l.toExponential(),e=e.slice(0,e.indexOf("e")+1)+u),n=new f(e)):n=new f(l.toString()),r=(u=f.precision)+3;;)if(i=n,n=i.plus(j(o,i,r+2,1)).times(.5),V(i.d).slice(0,r)===(e=V(n.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!s&&e=="4999"){if(!s&&(w(i,u+1,0),i.times(i).eq(o))){n=i;break}r+=4,s=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(w(n,u+1,1),t=!n.times(n).eq(o));break}return A=!0,w(n,u,f.rounding,t)};m.tangent=m.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,r=r.sin(),r.s=1,r=j(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,w(ke==2||ke==4?r.neg():r,t,e,!0)):new n(NaN)};m.times=m.mul=function(t){var e,r,n,s,i,o,a,u,l,f=this,d=f.constructor,h=f.d,p=(t=new d(t)).d;if(t.s*=f.s,!h||!h[0]||!p||!p[0])return new d(!t.s||h&&!h[0]&&!p||p&&!p[0]&&!h?NaN:!h||!p?t.s/0:t.s*0);for(r=Y(f.e/E)+Y(t.e/E),u=h.length,l=p.length,u<l&&(i=h,h=p,p=i,o=u,u=l,l=o),i=[],o=u+l,n=o;n--;)i.push(0);for(n=l;--n>=0;){for(e=0,s=u+n;s>n;)a=i[s]+p[n]*h[s-n-1]+e,i[s--]=a%ye|0,e=a/ye|0;i[s]=(i[s]+e)%ye|0}for(;!i[--o];)i.pop();return e?++r:i.shift(),t.d=i,t.e=hr(i,r),A?w(t,d.precision,d.rounding):t};m.toBinary=function(t,e){return tn(this,2,t,e)};m.toDecimalPlaces=m.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(re(t,0,je),e===void 0?e=n.rounding:re(e,0,8),w(r,t+r.e+1,e))};m.toExponential=function(t,e){var r,n=this,s=n.constructor;return t===void 0?r=we(n,!0):(re(t,0,je),e===void 0?e=s.rounding:re(e,0,8),n=w(new s(n),t+1,e),r=we(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r};m.toFixed=function(t,e){var r,n,s=this,i=s.constructor;return t===void 0?r=we(s):(re(t,0,je),e===void 0?e=i.rounding:re(e,0,8),n=w(new i(s),t+s.e+1,e),r=we(n,!1,t+n.e+1)),s.isNeg()&&!s.isZero()?"-"+r:r};m.toFraction=function(t){var e,r,n,s,i,o,a,u,l,f,d,h,p=this,v=p.d,x=p.constructor;if(!v)return new x(p);if(l=r=new x(1),n=u=new x(0),e=new x(n),i=e.e=Vs(v)-p.e-1,o=i%E,e.d[0]=Z(10,o<0?E+o:o),t==null)t=i>0?e:l;else{if(a=new x(t),!a.isInt()||a.lt(l))throw Error(Pe+a);t=a.gt(e)?i>0?e:l:a}for(A=!1,a=new x(V(v)),f=x.precision,x.precision=i=v.length*E*2;d=j(a,e,0,1,1),s=r.plus(d.times(n)),s.cmp(t)!=1;)r=n,n=s,s=l,l=u.plus(d.times(s)),u=s,s=e,e=a.minus(d.times(s)),a=s;return s=j(t.minus(r),n,0,1,1),u=u.plus(s.times(l)),r=r.plus(s.times(n)),u.s=l.s=p.s,h=j(l,n,i,1).minus(p).abs().cmp(j(u,r,i,1).minus(p).abs())<1?[l,n]:[u,r],x.precision=f,A=!0,h};m.toHexadecimal=m.toHex=function(t,e){return tn(this,16,t,e)};m.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),t==null){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),e===void 0?e=n.rounding:re(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(A=!1,r=j(r,t,0,e,1).times(t),A=!0,w(r)):(t.s=r.s,r=t),r};m.toNumber=function(){return+this};m.toOctal=function(t,e){return tn(this,8,t,e)};m.toPower=m.pow=function(t){var e,r,n,s,i,o,a=this,u=a.constructor,l=+(t=new u(t));if(!a.d||!t.d||!a.d[0]||!t.d[0])return new u(Z(+a,l));if(a=new u(a),a.eq(1))return a;if(n=u.precision,i=u.rounding,t.eq(1))return w(a,n,i);if(e=Y(t.e/E),e>=t.d.length-1&&(r=l<0?-l:l)<=ka)return s=Gs(u,a,r,n),t.s<0?new u(1).div(s):w(s,n,i);if(o=a.s,o<0){if(e<t.d.length-1)return new u(NaN);if(t.d[e]&1||(o=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=o,a}return r=Z(+a,l),e=r==0||!isFinite(r)?Y(l*(Math.log("0."+V(a.d))/Math.LN10+a.e+1)):new u(r+"").e,e>u.maxE+1||e<u.minE-1?new u(e>0?o/0:0):(A=!1,u.rounding=a.s=1,r=Math.min(12,(e+"").length),s=Xr(t.times(Be(a,n+r)),n),s.d&&(s=w(s,n+5,1),Zt(s.d,n,i)&&(e=n+10,s=w(Xr(t.times(Be(a,e+r)),e),e+5,1),+V(s.d).slice(n+1,n+15)+1==1e14&&(s=w(s,n+1,0)))),s.s=o,A=!0,u.rounding=i,w(s,n,i))};m.toPrecision=function(t,e){var r,n=this,s=n.constructor;return t===void 0?r=we(n,n.e<=s.toExpNeg||n.e>=s.toExpPos):(re(t,1,je),e===void 0?e=s.rounding:re(e,0,8),n=w(new s(n),t,e),r=we(n,t<=n.e||n.e<=s.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r};m.toSignificantDigits=m.toSD=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(re(t,1,je),e===void 0?e=n.rounding:re(e,0,8)),w(new n(r),t,e)};m.toString=function(){var t=this,e=t.constructor,r=we(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};m.truncated=m.trunc=function(){return w(new this.constructor(this),this.e+1,1)};m.valueOf=m.toJSON=function(){var t=this,e=t.constructor,r=we(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function V(t){var e,r,n,s=t.length-1,i="",o=t[0];if(s>0){for(i+=o,e=1;e<s;e++)n=t[e]+"",r=E-n.length,r&&(i+=Ie(r)),i+=n;o=t[e],n=o+"",r=E-n.length,r&&(i+=Ie(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}c(V,"digitsToString");function re(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Pe+t)}c(re,"checkInt32");function Zt(t,e,r,n){var s,i,o,a;for(i=t[0];i>=10;i/=10)--e;return--e<0?(e+=E,s=0):(s=Math.ceil((e+1)/E),e%=E),i=Z(10,E-e),a=t[s]%i|0,n==null?e<3?(e==0?a=a/100|0:e==1&&(a=a/10|0),o=r<4&&a==99999||r>3&&a==49999||a==5e4||a==0):o=(r<4&&a+1==i||r>3&&a+1==i/2)&&(t[s+1]/i/100|0)==Z(10,e-2)-1||(a==i/2||a==0)&&(t[s+1]/i/100|0)==0:e<4?(e==0?a=a/1e3|0:e==1?a=a/100|0:e==2&&(a=a/10|0),o=(n||r<4)&&a==9999||!n&&r>3&&a==4999):o=((n||r<4)&&a+1==i||!n&&r>3&&a+1==i/2)&&(t[s+1]/i/1e3|0)==Z(10,e-3)-1,o}c(Zt,"checkRoundingDigits");function cr(t,e,r){for(var n,s=[0],i,o=0,a=t.length;o<a;){for(i=s.length;i--;)s[i]*=e;for(s[0]+=Kr.indexOf(t.charAt(o++)),n=0;n<s.length;n++)s[n]>r-1&&(s[n+1]===void 0&&(s[n+1]=0),s[n+1]+=s[n]/r|0,s[n]%=r)}return s.reverse()}c(cr,"convertBase");function Ta(t,e){var r,n,s;if(e.isZero())return e;n=e.d.length,n<32?(r=Math.ceil(n/3),s=(1/pr(4,r)).toString()):(r=16,s="2.3283064365386962890625e-10"),t.precision+=r,e=wt(t,1,e.times(s),new t(1));for(var i=r;i--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=r,e}c(Ta,"cosine");var j=function(){function t(n,s,i){var o,a=0,u=n.length;for(n=n.slice();u--;)o=n[u]*s+a,n[u]=o%i|0,a=o/i|0;return a&&n.unshift(a),n}c(t,"multiplyInteger");function e(n,s,i,o){var a,u;if(i!=o)u=i>o?1:-1;else for(a=u=0;a<i;a++)if(n[a]!=s[a]){u=n[a]>s[a]?1:-1;break}return u}c(e,"compare");function r(n,s,i,o){for(var a=0;i--;)n[i]-=a,a=n[i]<s[i]?1:0,n[i]=a*o+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return c(r,"subtract"),function(n,s,i,o,a,u){var l,f,d,h,p,v,x,P,I,H,B,U,Lt,ie,Qt,Xe,et,Hr,me,or,ar=n.constructor,Wr=n.s==s.s?1:-1,W=n.d,D=s.d;if(!W||!W[0]||!D||!D[0])return new ar(!n.s||!s.s||(W?D&&W[0]==D[0]:!D)?NaN:W&&W[0]==0||!D?Wr*0:Wr/0);for(u?(p=1,f=n.e-s.e):(u=ye,p=E,f=Y(n.e/p)-Y(s.e/p)),me=D.length,et=W.length,I=new ar(Wr),H=I.d=[],d=0;D[d]==(W[d]||0);d++);if(D[d]>(W[d]||0)&&f--,i==null?(ie=i=ar.precision,o=ar.rounding):a?ie=i+(n.e-s.e)+1:ie=i,ie<0)H.push(1),v=!0;else{if(ie=ie/p+2|0,d=0,me==1){for(h=0,D=D[0],ie++;(d<et||h)&&ie--;d++)Qt=h*u+(W[d]||0),H[d]=Qt/D|0,h=Qt%D|0;v=h||d<et}else{for(h=u/(D[0]+1)|0,h>1&&(D=t(D,h,u),W=t(W,h,u),me=D.length,et=W.length),Xe=me,B=W.slice(0,me),U=B.length;U<me;)B[U++]=0;or=D.slice(),or.unshift(0),Hr=D[0],D[1]>=u/2&&++Hr;do h=0,l=e(D,B,me,U),l<0?(Lt=B[0],me!=U&&(Lt=Lt*u+(B[1]||0)),h=Lt/Hr|0,h>1?(h>=u&&(h=u-1),x=t(D,h,u),P=x.length,U=B.length,l=e(x,B,P,U),l==1&&(h--,r(x,me<P?or:D,P,u))):(h==0&&(l=h=1),x=D.slice()),P=x.length,P<U&&x.unshift(0),r(B,x,U,u),l==-1&&(U=B.length,l=e(D,B,me,U),l<1&&(h++,r(B,me<U?or:D,U,u))),U=B.length):l===0&&(h++,B=[0]),H[d++]=h,l&&B[0]?B[U++]=W[Xe]||0:(B=[W[Xe]],U=1);while((Xe++<et||B[0]!==void 0)&&ie--);v=B[0]!==void 0}H[0]||H.shift()}if(p==1)I.e=f,Ls=v;else{for(d=1,h=H[0];h>=10;h/=10)d++;I.e=d+f*p-1,w(I,a?i+I.e+1:i,o,v)}return I}}();function w(t,e,r,n){var s,i,o,a,u,l,f,d,h,p=t.constructor;e:if(e!=null){if(d=t.d,!d)return t;for(s=1,a=d[0];a>=10;a/=10)s++;if(i=e-s,i<0)i+=E,o=e,f=d[h=0],u=f/Z(10,s-o-1)%10|0;else if(h=Math.ceil((i+1)/E),a=d.length,h>=a)if(n){for(;a++<=h;)d.push(0);f=u=0,s=1,i%=E,o=i-E+1}else break e;else{for(f=a=d[h],s=1;a>=10;a/=10)s++;i%=E,o=i-E+s,u=o<0?0:f/Z(10,s-o-1)%10|0}if(n=n||e<0||d[h+1]!==void 0||(o<0?f:f%Z(10,s-o-1)),l=r<4?(u||n)&&(r==0||r==(t.s<0?3:2)):u>5||u==5&&(r==4||n||r==6&&(i>0?o>0?f/Z(10,s-o):0:d[h-1])%10&1||r==(t.s<0?8:7)),e<1||!d[0])return d.length=0,l?(e-=t.e+1,d[0]=Z(10,(E-e%E)%E),t.e=-e||0):d[0]=t.e=0,t;if(i==0?(d.length=h,a=1,h--):(d.length=h+1,a=Z(10,E-i),d[h]=o>0?(f/Z(10,s-o)%Z(10,o)|0)*a:0),l)for(;;)if(h==0){for(i=1,o=d[0];o>=10;o/=10)i++;for(o=d[0]+=a,a=1;o>=10;o/=10)a++;i!=a&&(t.e++,d[0]==ye&&(d[0]=1));break}else{if(d[h]+=a,d[h]!=ye)break;d[h--]=0,a=1}for(i=d.length;d[--i]===0;)d.pop()}return A&&(t.e>p.maxE?(t.d=null,t.e=NaN):t.e<p.minE&&(t.e=0,t.d=[0])),t}c(w,"finalise");function we(t,e,r){if(!t.isFinite())return Ws(t);var n,s=t.e,i=V(t.d),o=i.length;return e?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Ie(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(t.e<0?"e":"e+")+t.e):s<0?(i="0."+Ie(-s-1)+i,r&&(n=r-o)>0&&(i+=Ie(n))):s>=o?(i+=Ie(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+Ie(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=Ie(n))),i}c(we,"finiteToString");function hr(t,e){var r=t[0];for(e*=E;r>=10;r/=10)e++;return e}c(hr,"getBase10Exponent");function fr(t,e,r){if(e>Aa)throw A=!0,r&&(t.precision=r),Error(Qs);return w(new t(ur),e,1,!0)}c(fr,"getLn10");function ge(t,e,r){if(e>Jr)throw Error(Qs);return w(new t(lr),e,r,!0)}c(ge,"getPi");function Vs(t){var e=t.length-1,r=e*E+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}c(Vs,"getPrecision");function Ie(t){for(var e="";t--;)e+="0";return e}c(Ie,"getZeroString");function Gs(t,e,r,n){var s,i=new t(1),o=Math.ceil(n/E+4);for(A=!1;;){if(r%2&&(i=i.times(e),Fs(i.d,o)&&(s=!0)),r=Y(r/2),r===0){r=i.d.length-1,s&&i.d[r]===0&&++i.d[r];break}e=e.times(e),Fs(e.d,o)}return A=!0,i}c(Gs,"intPow");function Ds(t){return t.d[t.d.length-1]&1}c(Ds,"isOdd");function Hs(t,e,r){for(var n,s=new t(e[0]),i=0;++i<e.length;)if(n=new t(e[i]),n.s)s[r](n)&&(s=n);else{s=n;break}return s}c(Hs,"maxOrMin");function Xr(t,e){var r,n,s,i,o,a,u,l=0,f=0,d=0,h=t.constructor,p=h.rounding,v=h.precision;if(!t.d||!t.d[0]||t.e>17)return new h(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(A=!1,u=v):u=e,a=new h(.03125);t.e>-2;)t=t.times(a),d+=5;for(n=Math.log(Z(2,d))/Math.LN10*2+5|0,u+=n,r=i=o=new h(1),h.precision=u;;){if(i=w(i.times(t),u,1),r=r.times(++f),a=o.plus(j(i,r,u,1)),V(a.d).slice(0,u)===V(o.d).slice(0,u)){for(s=d;s--;)o=w(o.times(o),u,1);if(e==null)if(l<3&&Zt(o.d,u-n,p,l))h.precision=u+=10,r=i=a=new h(1),f=0,l++;else return w(o,h.precision=v,p,A=!0);else return h.precision=v,o}o=a}}c(Xr,"naturalExponential");function Be(t,e){var r,n,s,i,o,a,u,l,f,d,h,p=1,v=10,x=t,P=x.d,I=x.constructor,H=I.rounding,B=I.precision;if(x.s<0||!P||!P[0]||!x.e&&P[0]==1&&P.length==1)return new I(P&&!P[0]?-1/0:x.s!=1?NaN:P?0:x);if(e==null?(A=!1,f=B):f=e,I.precision=f+=v,r=V(P),n=r.charAt(0),Math.abs(i=x.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(t),r=V(x.d),n=r.charAt(0),p++;i=x.e,n>1?(x=new I("0."+r),i++):x=new I(n+"."+r.slice(1))}else return l=fr(I,f+2,B).times(i+""),x=Be(new I(n+"."+r.slice(1)),f-v).plus(l),I.precision=B,e==null?w(x,B,H,A=!0):x;for(d=x,u=o=x=j(x.minus(1),x.plus(1),f,1),h=w(x.times(x),f,1),s=3;;){if(o=w(o.times(h),f,1),l=u.plus(j(o,new I(s),f,1)),V(l.d).slice(0,f)===V(u.d).slice(0,f))if(u=u.times(2),i!==0&&(u=u.plus(fr(I,f+2,B).times(i+""))),u=j(u,new I(p),f,1),e==null)if(Zt(u.d,f-v,H,a))I.precision=f+=v,l=o=x=j(d.minus(1),d.plus(1),f,1),h=w(x.times(x),f,1),s=a=1;else return w(u,I.precision=B,H,A=!0);else return I.precision=B,u;u=l,s+=2}}c(Be,"naturalLogarithm");function Ws(t){return String(t.s*t.s/0)}c(Ws,"nonFiniteToString");function en(t,e){var r,n,s;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;n++);for(s=e.length;e.charCodeAt(s-1)===48;--s);if(e=e.slice(n,s),e){if(s-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%E,r<0&&(n+=E),n<s){for(n&&t.d.push(+e.slice(0,n)),s-=E;n<s;)t.d.push(+e.slice(n,n+=E));e=e.slice(n),n=E-e.length}else n-=s;for(;n--;)e+="0";t.d.push(+e),A&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}c(en,"parseDecimal");function Oa(t,e){var r,n,s,i,o,a,u,l,f;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),zs.test(e))return en(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(Ea.test(e))r=16,e=e.toLowerCase();else if(Ca.test(e))r=2;else if(Sa.test(e))r=8;else throw Error(Pe+e);for(i=e.search(/p/i),i>0?(u=+e.slice(i+1),e=e.substring(2,i)):e=e.slice(2),i=e.indexOf("."),o=i>=0,n=t.constructor,o&&(e=e.replace(".",""),a=e.length,i=a-i,s=Gs(n,new n(r),i,i*2)),l=cr(e,r,ye),f=l.length-1,i=f;l[i]===0;--i)l.pop();return i<0?new n(t.s*0):(t.e=hr(l,f),t.d=l,A=!1,o&&(t=j(t,s,a*4)),u&&(t=t.times(Math.abs(u)<54?Z(2,u):zt.pow(2,u))),A=!0,t)}c(Oa,"parseOther");function Ma(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:wt(t,2,e,e);r=1.4*Math.sqrt(n),r=r>16?16:r|0,e=e.times(1/pr(5,r)),e=wt(t,2,e,e);for(var s,i=new t(5),o=new t(16),a=new t(20);r--;)s=e.times(e),e=e.times(i.plus(s.times(o.times(s).minus(a))));return e}c(Ma,"sine");function wt(t,e,r,n,s){var i,o,a,u,l=1,f=t.precision,d=Math.ceil(f/E);for(A=!1,u=r.times(r),a=new t(n);;){if(o=j(a.times(u),new t(e++*e++),f,1),a=s?n.plus(o):n.minus(o),n=j(o.times(u),new t(e++*e++),f,1),o=a.plus(n),o.d[d]!==void 0){for(i=d;o.d[i]===a.d[i]&&i--;);if(i==-1)break}i=a,a=n,n=o,o=i,l++}return A=!0,o.d.length=d+1,o}c(wt,"taylorSeries");function pr(t,e){for(var r=t;--e;)r*=t;return r}c(pr,"tinyPow");function Ys(t,e){var r,n=e.s<0,s=ge(t,t.precision,1),i=s.times(.5);if(e=e.abs(),e.lte(i))return ke=n?4:1,e;if(r=e.divToInt(s),r.isZero())ke=n?3:2;else{if(e=e.minus(r.times(s)),e.lte(i))return ke=Ds(r)?n?2:3:n?4:1,e;ke=Ds(r)?n?1:4:n?3:2}return e.minus(s).abs()}c(Ys,"toLessThanHalfPi");function tn(t,e,r,n){var s,i,o,a,u,l,f,d,h,p=t.constructor,v=r!==void 0;if(v?(re(r,1,je),n===void 0?n=p.rounding:re(n,0,8)):(r=p.precision,n=p.rounding),!t.isFinite())f=Ws(t);else{for(f=we(t),o=f.indexOf("."),v?(s=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):s=e,o>=0&&(f=f.replace(".",""),h=new p(1),h.e=f.length-o,h.d=cr(we(h),10,s),h.e=h.d.length),d=cr(f,10,s),i=u=d.length;d[--u]==0;)d.pop();if(!d[0])f=v?"0p+0":"0";else{if(o<0?i--:(t=new p(t),t.d=d,t.e=i,t=j(t,h,r,n,0,s),d=t.d,i=t.e,l=Ls),o=d[r],a=s/2,l=l||d[r+1]!==void 0,l=n<4?(o!==void 0||l)&&(n===0||n===(t.s<0?3:2)):o>a||o===a&&(n===4||l||n===6&&d[r-1]&1||n===(t.s<0?8:7)),d.length=r,l)for(;++d[--r]>s-1;)d[r]=0,r||(++i,d.unshift(1));for(u=d.length;!d[u-1];--u);for(o=0,f="";o<u;o++)f+=Kr.charAt(d[o]);if(v){if(u>1)if(e==16||e==8){for(o=e==16?4:3,--u;u%o;u++)f+="0";for(d=cr(f,s,e),u=d.length;!d[u-1];--u);for(o=1,f="1.";o<u;o++)f+=Kr.charAt(d[o])}else f=f.charAt(0)+"."+f.slice(1);f=f+(i<0?"p":"p+")+i}else if(i<0){for(;++i;)f="0"+f;f="0."+f}else if(++i>u)for(i-=u;i--;)f+="0";else i<u&&(f=f.slice(0,i)+"."+f.slice(i))}f=(e==16?"0x":e==2?"0b":e==8?"0o":"")+f}return t.s<0?"-"+f:f}c(tn,"toStringBinary");function Fs(t,e){if(t.length>e)return t.length=e,!0}c(Fs,"truncate");function Ra(t){return new this(t).abs()}c(Ra,"abs");function Na(t){return new this(t).acos()}c(Na,"acos");function Ia(t){return new this(t).acosh()}c(Ia,"acosh");function Ba(t,e){return new this(t).plus(e)}c(Ba,"add");function Pa(t){return new this(t).asin()}c(Pa,"asin");function ja(t){return new this(t).asinh()}c(ja,"asinh");function Da(t){return new this(t).atan()}c(Da,"atan");function Fa(t){return new this(t).atanh()}c(Fa,"atanh");function qa(t,e){t=new this(t),e=new this(e);var r,n=this.precision,s=this.rounding,i=n+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=ge(this,i,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?ge(this,n,s):new this(0),r.s=t.s):!t.d||e.isZero()?(r=ge(this,i,1).times(.5),r.s=t.s):e.s<0?(this.precision=i,this.rounding=1,r=this.atan(j(t,e,i,1)),e=ge(this,i,1),this.precision=n,this.rounding=s,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(j(t,e,i,1)),r}c(qa,"atan2");function La(t){return new this(t).cbrt()}c(La,"cbrt");function Qa(t){return w(t=new this(t),t.e+1,2)}c(Qa,"ceil");function Ua(t,e,r){return new this(t).clamp(e,r)}c(Ua,"clamp");function Za(t){if(!t||typeof t!="object")throw Error(dr+"Object expected");var e,r,n,s=t.defaults===!0,i=["precision",1,je,"rounding",0,8,"toExpNeg",-_t,0,"toExpPos",0,_t,"maxE",0,_t,"minE",-_t,0,"modulo",0,9];for(e=0;e<i.length;e+=3)if(r=i[e],s&&(this[r]=$r[r]),(n=t[r])!==void 0)if(Y(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(Pe+r+": "+n);if(r="crypto",s&&(this[r]=$r[r]),(n=t[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(Us);else this[r]=!1;else throw Error(Pe+r+": "+n);return this}c(Za,"config");function za(t){return new this(t).cos()}c(za,"cos");function Va(t){return new this(t).cosh()}c(Va,"cosh");function Ks(t){var e,r,n;function s(i){var o,a,u,l=this;if(!(l instanceof s))return new s(i);if(l.constructor=s,qs(i)){l.s=i.s,A?!i.d||i.e>s.maxE?(l.e=NaN,l.d=null):i.e<s.minE?(l.e=0,l.d=[0]):(l.e=i.e,l.d=i.d.slice()):(l.e=i.e,l.d=i.d?i.d.slice():i.d);return}if(u=typeof i,u==="number"){if(i===0){l.s=1/i<0?-1:1,l.e=0,l.d=[0];return}if(i<0?(i=-i,l.s=-1):l.s=1,i===~~i&&i<1e7){for(o=0,a=i;a>=10;a/=10)o++;A?o>s.maxE?(l.e=NaN,l.d=null):o<s.minE?(l.e=0,l.d=[0]):(l.e=o,l.d=[i]):(l.e=o,l.d=[i]);return}else if(i*0!==0){i||(l.s=NaN),l.e=NaN,l.d=null;return}return en(l,i.toString())}else if(u!=="string")throw Error(Pe+i);return(a=i.charCodeAt(0))===45?(i=i.slice(1),l.s=-1):(a===43&&(i=i.slice(1)),l.s=1),zs.test(i)?en(l,i):Oa(l,i)}if(c(s,"Decimal"),s.prototype=m,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=Za,s.clone=Ks,s.isDecimal=qs,s.abs=Ra,s.acos=Na,s.acosh=Ia,s.add=Ba,s.asin=Pa,s.asinh=ja,s.atan=Da,s.atanh=Fa,s.atan2=qa,s.cbrt=La,s.ceil=Qa,s.clamp=Ua,s.cos=za,s.cosh=Va,s.div=Ga,s.exp=Ha,s.floor=Wa,s.hypot=Ya,s.ln=Ka,s.log=$a,s.log10=Xa,s.log2=Ja,s.max=ec,s.min=tc,s.mod=rc,s.mul=nc,s.pow=sc,s.random=ic,s.round=oc,s.sign=ac,s.sin=cc,s.sinh=uc,s.sqrt=lc,s.sub=fc,s.sum=dc,s.tan=hc,s.tanh=pc,s.trunc=mc,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return s.config(t),s}c(Ks,"clone");function Ga(t,e){return new this(t).div(e)}c(Ga,"div");function Ha(t){return new this(t).exp()}c(Ha,"exp");function Wa(t){return w(t=new this(t),t.e+1,3)}c(Wa,"floor");function Ya(){var t,e,r=new this(0);for(A=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return A=!0,new this(1/0);r=e}return A=!0,r.sqrt()}c(Ya,"hypot");function qs(t){return t instanceof zt||t&&t.toStringTag===Zs||!1}c(qs,"isDecimalInstance");function Ka(t){return new this(t).ln()}c(Ka,"ln");function $a(t,e){return new this(t).log(e)}c($a,"log");function Ja(t){return new this(t).log(2)}c(Ja,"log2");function Xa(t){return new this(t).log(10)}c(Xa,"log10");function ec(){return Hs(this,arguments,"lt")}c(ec,"max");function tc(){return Hs(this,arguments,"gt")}c(tc,"min");function rc(t,e){return new this(t).mod(e)}c(rc,"mod");function nc(t,e){return new this(t).mul(e)}c(nc,"mul");function sc(t,e){return new this(t).pow(e)}c(sc,"pow");function ic(t){var e,r,n,s,i=0,o=new this(1),a=[];if(t===void 0?t=this.precision:re(t,1,je),n=Math.ceil(t/E),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));i<n;)s=e[i],s>=429e7?e[i]=crypto.getRandomValues(new Uint32Array(1))[0]:a[i++]=s%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);i<n;)s=e[i]+(e[i+1]<<8)+(e[i+2]<<16)+((e[i+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(e,i):(a.push(s%1e7),i+=4);i=n/4}else throw Error(Us);else for(;i<n;)a[i++]=Math.random()*1e7|0;for(n=a[--i],t%=E,n&&t&&(s=Z(10,E-t),a[i]=(n/s|0)*s);a[i]===0;i--)a.pop();if(i<0)r=0,a=[0];else{for(r=-1;a[0]===0;r-=E)a.shift();for(n=1,s=a[0];s>=10;s/=10)n++;n<E&&(r-=E-n)}return o.e=r,o.d=a,o}c(ic,"random");function oc(t){return w(t=new this(t),t.e+1,this.rounding)}c(oc,"round");function ac(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}c(ac,"sign");function cc(t){return new this(t).sin()}c(cc,"sin");function uc(t){return new this(t).sinh()}c(uc,"sinh");function lc(t){return new this(t).sqrt()}c(lc,"sqrt");function fc(t,e){return new this(t).sub(e)}c(fc,"sub");function dc(){var t=0,e=arguments,r=new this(e[t]);for(A=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return A=!0,w(r,this.precision,this.rounding)}c(dc,"sum");function hc(t){return new this(t).tan()}c(hc,"tan");function pc(t){return new this(t).tanh()}c(pc,"tanh");function mc(t){return w(t=new this(t),t.e+1,1)}c(mc,"trunc");m[Symbol.for("nodejs.util.inspect.custom")]=m.toString;m[Symbol.toStringTag]="Decimal";var zt=m.constructor=Ks($r);ur=new zt(ur);lr=new zt(lr);var rn=zt;function mr(t,e){if(!t)throw new Error(e??"Failed assertion")}c(mr,"assert");var nn=class t{static{c(this,"GeneralBank")}bank;allowedKeys;validator;valueSchema;constructor({allowedKeys:e,validator:r,initialBank:n,valueSchema:s}={}){if(this.bank=n??{},this.allowedKeys=e?new Set(e):void 0,this.validator=r,this.valueSchema=s??{min:1,max:Number.MAX_SAFE_INTEGER,floats:!1},this.valueSchema.min<0)throw new Error("Value schema min must be non-negative.");if(this.valueSchema.max<this.valueSchema.min)throw new Error("Value schema max must be greater than min.");this.validate()}get _bank(){return this.bank}clone(){return new t({allowedKeys:this.allowedKeys?Array.from(this.allowedKeys):void 0,validator:this.validator,initialBank:{...this.bank},valueSchema:this.valueSchema})}validate(){for(let e of Object.keys(this.bank)){let r=this.bank[e];if(this.allowedKeys&&(typeof Array.from(this.allowedKeys.values())[0]=="number"&&(e=Number.parseInt(e)),!this.allowedKeys.has(e)))throw new Error(`Key ${e} (${typeof e}) is not allowed, only these are allowed: ${Array.from(this.allowedKeys).join(", ")}`);mr(typeof r=="number"&&r>=this.valueSchema.min&&r<=this.valueSchema.max,`Invalid value (not within minmax ${this.valueSchema.min}-${this.valueSchema.max}) for ${e}: ${r}`),this.valueSchema.floats||mr(Number.isInteger(r),`Value for ${e} is not an integer: ${r}`),this.validator?.(e,r,this.bank)}}entries(){return Object.entries(this.bank)}length(){return Object.keys(this.bank).length}amount(e){return this.bank[e]??0}has(e){return this.amount(e)>=1}toString(){let e=Object.entries(this.bank);return e.length===0?"Bank is empty":e.map(([r,n])=>`${r}: ${n}`).join(", ")}addItem(e,r){mr(r>=0,"Quantity must be non-negative.");let n=rn.add(this.amount(e),r).toNumber();if(n>this.valueSchema.max)throw new Error(`Value for ${e} exceeds the maximum of ${this.valueSchema.max}.`);return this.bank[e]=n,this.validate(),this}removeItem(e,r){mr(r>=0,"Quantity must be non-negative.");let n=this.amount(e);if(n<r)throw new Error(`Not enough ${e} to remove.`);let s=rn.sub(n,r).toNumber();return this.bank[e]=s,s===0&&delete this.bank[e],this.validate(),this}add(e,r=1){if(e instanceof t)for(let[n,s]of e.entries())this.addItem(n,s);else this.addItem(e,r);return this}remove(e,r=1){if(e instanceof t)for(let[n,s]of Object.entries(e.bank))this.removeItem(n,s);else this.removeItem(e,r);return this}};var ri=Yr(sn());var on=class{static{c(this,"SimpleTable")}length;table;totalWeight;constructor(){this.table=[],this.length=0,this.totalWeight=0}add(e,r=1){return this.length+=1,this.totalWeight+=r,this.table.push({item:e,weight:r}),this}delete(e){let r=this.table.find(n=>n.item===e);if(!r)throw new Error(`${e} doesn't exist in this SimpleTable.`);return this.length-=1,this.totalWeight-=r.weight,this.table=this.table.filter(n=>n!==r),this}roll(){let e=(0,ri.randInt)(1,this.totalWeight),r=-1,n=0;for(let i=0;i<this.table.length;i++){let o=this.table[i];if(n+=o.weight,e<=n){r=i;break}}return this.table[r]?.item??null}rollOrThrow(){let e=this.roll();if(e===null)throw new Error("Received null from SimpleTable, but expect not-null.");return e}};var an=class extends Error{static{c(this,"UserError")}constructor(e){super(e),Error.captureStackTrace(this,this.constructor)}};var gc=Yr(sn());function ni(t,e=!1,r=!1){t<0&&(t=-t);let n={day:Math.floor(t/864e5),hour:Math.floor(t/36e5)%24,minute:Math.floor(t/6e4)%60,second:Math.floor(t/1e3)%60},s={d:Math.floor(t/864e5),h:Math.floor(t/36e5)%24,m:Math.floor(t/6e4)%60,s:Math.floor(t/1e3)%60},i=Object.entries(e?s:n).filter(o=>o[1]!==0);return i.length===0?r?`${t}ms`:"less than 1 second":i.map(([o,a])=>`${a}${e?"":" "}${o}${a===1||e?"":"s"}`).join(e?"":", ")}c(ni,"formatDuration");var cn=class{static{c(this,"Stopwatch")}digits;#e;#t;constructor(e=2){this.digits=e,this.#e=performance.now(),this.#t=null}get duration(){return this.#t?this.#t-this.#e:performance.now()-this.#e}get running(){return!this.#t}restart(){return this.#e=performance.now(),this.#t=null,this}reset(){return this.#e=performance.now(),this.#t=this.#e,this}start(){return this.running||(this.#e=performance.now()-this.duration,this.#t=null),this}stop(e){return this.running&&(this.#t=performance.now()),e&&console.log(`${this.toString()}: ${e}`),this}toString(){let e=this.duration;return e>=1e3?`${(e/1e3).toFixed(this.digits)}s`:e>=1?`${e.toFixed(this.digits)}ms`:`${(e*1e3).toFixed(this.digits)}\u03BCs`}lastCheckpoint=null;check(e){let r=performance.now()-(this.lastCheckpoint??this.#e),n=r>0?`${ni(r,!0,!0)}`:"";console.log(`${this.toString()}: ${e} in ${n}`),this.lastCheckpoint=performance.now()}};var ma=Yr(ta());var N;(function(t){t.assertEqual=s=>s;function e(s){}c(e,"assertIs"),t.assertIs=e;function r(s){throw new Error}c(r,"assertNever"),t.assertNever=r,t.arrayToEnum=s=>{let i={};for(let o of s)i[o]=o;return i},t.getValidEnumValues=s=>{let i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(let a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{let i=[];for(let o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(let o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}c(n,"joinValues"),t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(N||(N={}));var Ms;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Ms||(Ms={}));var b=N.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ye=c(t=>{switch(typeof t){case"undefined":return b.undefined;case"string":return b.string;case"number":return isNaN(t)?b.nan:b.number;case"boolean":return b.boolean;case"function":return b.function;case"bigint":return b.bigint;case"symbol":return b.symbol;case"object":return Array.isArray(t)?b.array:t===null?b.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?b.promise:typeof Map<"u"&&t instanceof Map?b.map:typeof Set<"u"&&t instanceof Set?b.set:typeof Date<"u"&&t instanceof Date?b.date:b.object;default:return b.unknown}},"getParsedType"),g=N.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),$f=c(t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),"quotelessJson"),ue=class t extends Error{static{c(this,"ZodError")}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(i){return i.message},n={_errors:[]},s=c(i=>{for(let o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,u=0;for(;u<o.path.length;){let l=o.path[u];u===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(r(o))):a[l]=a[l]||{_errors:[]},a=a[l],u++}}},"processError");return s(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,N.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};ue.create=t=>new ue(t);var Bt=c((t,e)=>{let r;switch(t.code){case g.invalid_type:t.received===b.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case g.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,N.jsonStringifyReplacer)}`;break;case g.unrecognized_keys:r=`Unrecognized key(s) in object: ${N.joinValues(t.keys,", ")}`;break;case g.invalid_union:r="Invalid input";break;case g.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${N.joinValues(t.options)}`;break;case g.invalid_enum_value:r=`Invalid enum value. Expected ${N.joinValues(t.options)}, received '${t.received}'`;break;case g.invalid_arguments:r="Invalid function arguments";break;case g.invalid_return_type:r="Invalid function return type";break;case g.invalid_date:r="Invalid date";break;case g.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:N.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case g.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case g.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case g.custom:r="Invalid input";break;case g.invalid_intersection_types:r="Intersection results could not be merged";break;case g.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case g.not_finite:r="Number must be finite";break;default:r=e.defaultError,N.assertNever(t)}return{message:r}},"errorMap"),sa=Bt;function Jf(t){sa=t}c(Jf,"setErrorMap");function Qr(){return sa}c(Qr,"getErrorMap");var Ur=c(t=>{let{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="",u=n.filter(l=>!!l).slice().reverse();for(let l of u)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}},"makeIssue"),Xf=[];function y(t,e){let r=Qr(),n=Ur({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Bt?void 0:Bt].filter(s=>!!s)});t.common.issues.push(n)}c(y,"addIssueToContext");var X=class t{static{c(this,"ParseStatus")}constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let s of r){if(s.status==="aborted")return k;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let s of r){let i=await s.key,o=await s.value;n.push({key:i,value:o})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let s of r){let{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return k;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}},k=Object.freeze({status:"aborted"}),It=c(t=>({status:"dirty",value:t}),"DIRTY"),te=c(t=>({status:"valid",value:t}),"OK"),Rs=c(t=>t.status==="aborted","isAborted"),Ns=c(t=>t.status==="dirty","isDirty"),rr=c(t=>t.status==="valid","isValid"),nr=c(t=>typeof Promise<"u"&&t instanceof Promise,"isAsync");function Zr(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}c(Zr,"__classPrivateFieldGet");function ia(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}c(ia,"__classPrivateFieldSet");var _;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(_||(_={}));var er,tr,pe=class{static{c(this,"ParseInputLazyPath")}constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},ra=c((t,e)=>{if(rr(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new ue(t.common.issues);return this._error=r,this._error}}},"handleResult");function T(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:c((o,a)=>{var u,l;let{message:f}=t;return o.code==="invalid_enum_value"?{message:f??a.defaultError}:typeof a.data>"u"?{message:(u=f??n)!==null&&u!==void 0?u:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(l=f??r)!==null&&l!==void 0?l:a.defaultError}},"customMap"),description:s}}c(T,"processCreateParams");var O=class{static{c(this,"ZodType")}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ye(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Ye(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new X,ctx:{common:e.parent.common,data:e.data,parsedType:Ye(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(nr(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let s={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ye(e)},i=this._parseSync({data:e,path:s.path,parent:s});return ra(s,i)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ye(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(nr(s)?s:Promise.resolve(s));return ra(n,i)}refine(e,r){let n=c(s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r,"getIssueProperties");return this._refinement((s,i)=>{let o=e(s),a=c(()=>i.addIssue({code:g.custom,...n(s)}),"setError");return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new le({schema:this,typeName:S.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return he.create(this,this._def)}nullable(){return Se.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ne.create(this,this._def)}promise(){return Je.create(this,this._def)}or(e){return ft.create([this,e],this._def)}and(e){return dt.create(this,e,this._def)}transform(e){return new le({...T(this._def),schema:this,typeName:S.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new yt({...T(this._def),innerType:this,defaultValue:r,typeName:S.ZodDefault})}brand(){return new sr({typeName:S.ZodBranded,type:this,...T(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new bt({...T(this._def),innerType:this,catchValue:r,typeName:S.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return ir.create(this,e)}readonly(){return vt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},ed=/^c[^\s-]{8,}$/i,td=/^[0-9a-z]+$/,rd=/^[0-9A-HJKMNP-TV-Z]{26}$/,nd=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,sd=/^[a-z0-9_-]{21}$/i,id=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,od=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ad="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Os,cd=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ud=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ld=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,oa="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",fd=new RegExp(`^${oa}$`);function aa(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}c(aa,"timeRegexSource");function dd(t){return new RegExp(`^${aa(t)}$`)}c(dd,"timeRegex");function ca(t){let e=`${oa}T${aa(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}c(ca,"datetimeRegex");function hd(t,e){return!!((e==="v4"||!e)&&cd.test(t)||(e==="v6"||!e)&&ud.test(t))}c(hd,"isValidIP");var Ke=class t extends O{static{c(this,"ZodString")}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==b.string){let i=this._getOrReturnCtx(e);return y(i,{code:g.invalid_type,expected:b.string,received:i.parsedType}),k}let n=new X,s;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),y(s,{code:g.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),y(s,{code:g.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){let o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?y(s,{code:g.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&y(s,{code:g.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")od.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"email",code:g.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Os||(Os=new RegExp(ad,"u")),Os.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"emoji",code:g.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")nd.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"uuid",code:g.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")sd.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"nanoid",code:g.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")ed.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"cuid",code:g.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")td.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"cuid2",code:g.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")rd.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"ulid",code:g.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),y(s,{validation:"url",code:g.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"regex",code:g.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),y(s,{code:g.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),y(s,{code:g.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),y(s,{code:g.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?ca(i).test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{code:g.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?fd.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{code:g.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?dd(i).test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{code:g.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?id.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"duration",code:g.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?hd(e.data,i.version)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"ip",code:g.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?ld.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"base64",code:g.invalid_string,message:i.message}),n.dirty()):N.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:g.invalid_string,..._.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",..._.errToObj(e)})}url(e){return this._addCheck({kind:"url",..._.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",..._.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",..._.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",..._.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",..._.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",..._.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",..._.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",..._.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",..._.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,..._.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,..._.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",..._.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,..._.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,..._.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,..._.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,..._.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,..._.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,..._.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,..._.errToObj(r)})}nonempty(e){return this.min(1,_.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Ke.create=t=>{var e;return new Ke({checks:[],typeName:S.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...T(t)})};function pd(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}c(pd,"floatSafeRemainder");var it=class t extends O{static{c(this,"ZodNumber")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==b.number){let i=this._getOrReturnCtx(e);return y(i,{code:g.invalid_type,expected:b.number,received:i.parsedType}),k}let n,s=new X;for(let i of this._def.checks)i.kind==="int"?N.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),y(n,{code:g.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),y(n,{code:g.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),y(n,{code:g.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?pd(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),y(n,{code:g.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),y(n,{code:g.not_finite,message:i.message}),s.dirty()):N.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,_.toString(r))}gt(e,r){return this.setLimit("min",e,!1,_.toString(r))}lte(e,r){return this.setLimit("max",e,!0,_.toString(r))}lt(e,r){return this.setLimit("max",e,!1,_.toString(r))}setLimit(e,r,n,s){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:_.toString(s)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:_.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:_.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:_.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:_.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:_.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:_.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:_.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:_.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:_.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&N.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};it.create=t=>new it({checks:[],typeName:S.ZodNumber,coerce:t?.coerce||!1,...T(t)});var ot=class t extends O{static{c(this,"ZodBigInt")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==b.bigint){let i=this._getOrReturnCtx(e);return y(i,{code:g.invalid_type,expected:b.bigint,received:i.parsedType}),k}let n,s=new X;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),y(n,{code:g.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),y(n,{code:g.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),y(n,{code:g.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):N.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,_.toString(r))}gt(e,r){return this.setLimit("min",e,!1,_.toString(r))}lte(e,r){return this.setLimit("max",e,!0,_.toString(r))}lt(e,r){return this.setLimit("max",e,!1,_.toString(r))}setLimit(e,r,n,s){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:_.toString(s)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:_.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:_.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:_.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:_.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:_.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};ot.create=t=>{var e;return new ot({checks:[],typeName:S.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...T(t)})};var at=class extends O{static{c(this,"ZodBoolean")}_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==b.boolean){let n=this._getOrReturnCtx(e);return y(n,{code:g.invalid_type,expected:b.boolean,received:n.parsedType}),k}return te(e.data)}};at.create=t=>new at({typeName:S.ZodBoolean,coerce:t?.coerce||!1,...T(t)});var ct=class t extends O{static{c(this,"ZodDate")}_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==b.date){let i=this._getOrReturnCtx(e);return y(i,{code:g.invalid_type,expected:b.date,received:i.parsedType}),k}if(isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return y(i,{code:g.invalid_date}),k}let n=new X,s;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),y(s,{code:g.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),y(s,{code:g.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):N.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:_.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:_.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};ct.create=t=>new ct({checks:[],coerce:t?.coerce||!1,typeName:S.ZodDate,...T(t)});var Pt=class extends O{static{c(this,"ZodSymbol")}_parse(e){if(this._getType(e)!==b.symbol){let n=this._getOrReturnCtx(e);return y(n,{code:g.invalid_type,expected:b.symbol,received:n.parsedType}),k}return te(e.data)}};Pt.create=t=>new Pt({typeName:S.ZodSymbol,...T(t)});var ut=class extends O{static{c(this,"ZodUndefined")}_parse(e){if(this._getType(e)!==b.undefined){let n=this._getOrReturnCtx(e);return y(n,{code:g.invalid_type,expected:b.undefined,received:n.parsedType}),k}return te(e.data)}};ut.create=t=>new ut({typeName:S.ZodUndefined,...T(t)});var lt=class extends O{static{c(this,"ZodNull")}_parse(e){if(this._getType(e)!==b.null){let n=this._getOrReturnCtx(e);return y(n,{code:g.invalid_type,expected:b.null,received:n.parsedType}),k}return te(e.data)}};lt.create=t=>new lt({typeName:S.ZodNull,...T(t)});var $e=class extends O{static{c(this,"ZodAny")}constructor(){super(...arguments),this._any=!0}_parse(e){return te(e.data)}};$e.create=t=>new $e({typeName:S.ZodAny,...T(t)});var Re=class extends O{static{c(this,"ZodUnknown")}constructor(){super(...arguments),this._unknown=!0}_parse(e){return te(e.data)}};Re.create=t=>new Re({typeName:S.ZodUnknown,...T(t)});var ve=class extends O{static{c(this,"ZodNever")}_parse(e){let r=this._getOrReturnCtx(e);return y(r,{code:g.invalid_type,expected:b.never,received:r.parsedType}),k}};ve.create=t=>new ve({typeName:S.ZodNever,...T(t)});var jt=class extends O{static{c(this,"ZodVoid")}_parse(e){if(this._getType(e)!==b.undefined){let n=this._getOrReturnCtx(e);return y(n,{code:g.invalid_type,expected:b.void,received:n.parsedType}),k}return te(e.data)}};jt.create=t=>new jt({typeName:S.ZodVoid,...T(t)});var Ne=class t extends O{static{c(this,"ZodArray")}_parse(e){let{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==b.array)return y(r,{code:g.invalid_type,expected:b.array,received:r.parsedType}),k;if(s.exactLength!==null){let o=r.data.length>s.exactLength.value,a=r.data.length<s.exactLength.value;(o||a)&&(y(r,{code:o?g.too_big:g.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(y(r,{code:g.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(y(r,{code:g.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>s.type._parseAsync(new pe(r,o,r.path,a)))).then(o=>X.mergeArray(n,o));let i=[...r.data].map((o,a)=>s.type._parseSync(new pe(r,o,r.path,a)));return X.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:_.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:_.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:_.toString(r)}})}nonempty(e){return this.min(1,e)}};Ne.create=(t,e)=>new Ne({type:t,minLength:null,maxLength:null,exactLength:null,typeName:S.ZodArray,...T(e)});function Nt(t){if(t instanceof se){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=he.create(Nt(n))}return new se({...t._def,shape:c(()=>e,"shape")})}else return t instanceof Ne?new Ne({...t._def,type:Nt(t.element)}):t instanceof he?he.create(Nt(t.unwrap())):t instanceof Se?Se.create(Nt(t.unwrap())):t instanceof Ee?Ee.create(t.items.map(e=>Nt(e))):t}c(Nt,"deepPartialify");var se=class t extends O{static{c(this,"ZodObject")}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=N.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==b.object){let l=this._getOrReturnCtx(e);return y(l,{code:g.invalid_type,expected:b.object,received:l.parsedType}),k}let{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ve&&this._def.unknownKeys==="strip"))for(let l in s.data)o.includes(l)||a.push(l);let u=[];for(let l of o){let f=i[l],d=s.data[l];u.push({key:{status:"valid",value:l},value:f._parse(new pe(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof ve){let l=this._def.unknownKeys;if(l==="passthrough")for(let f of a)u.push({key:{status:"valid",value:f},value:{status:"valid",value:s.data[f]}});else if(l==="strict")a.length>0&&(y(s,{code:g.unrecognized_keys,keys:a}),n.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let l=this._def.catchall;for(let f of a){let d=s.data[f];u.push({key:{status:"valid",value:f},value:l._parse(new pe(s,d,s.path,f)),alwaysSet:f in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let l=[];for(let f of u){let d=await f.key,h=await f.value;l.push({key:d,value:h,alwaysSet:f.alwaysSet})}return l}).then(l=>X.mergeObjectSync(n,l)):X.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return _.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:c((r,n)=>{var s,i,o,a;let u=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=_.errToObj(e).message)!==null&&a!==void 0?a:u}:{message:u}},"errorMap")}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:c(()=>({...this._def.shape(),...e}),"shape")})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:c(()=>({...this._def.shape(),...e._def.shape()}),"shape"),typeName:S.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return N.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:c(()=>r,"shape")})}omit(e){let r={};return N.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:c(()=>r,"shape")})}deepPartial(){return Nt(this)}partial(e){let r={};return N.objectKeys(this.shape).forEach(n=>{let s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}),new t({...this._def,shape:c(()=>r,"shape")})}required(e){let r={};return N.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof he;)i=i._def.innerType;r[n]=i}}),new t({...this._def,shape:c(()=>r,"shape")})}keyof(){return ua(N.objectKeys(this.shape))}};se.create=(t,e)=>new se({shape:c(()=>t,"shape"),unknownKeys:"strip",catchall:ve.create(),typeName:S.ZodObject,...T(e)});se.strictCreate=(t,e)=>new se({shape:c(()=>t,"shape"),unknownKeys:"strict",catchall:ve.create(),typeName:S.ZodObject,...T(e)});se.lazycreate=(t,e)=>new se({shape:t,unknownKeys:"strip",catchall:ve.create(),typeName:S.ZodObject,...T(e)});var ft=class extends O{static{c(this,"ZodUnion")}_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(let a of i)if(a.result.status==="valid")return a.result;for(let a of i)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;let o=i.map(a=>new ue(a.ctx.common.issues));return y(r,{code:g.invalid_union,unionErrors:o}),k}if(c(s,"handleResults"),r.common.async)return Promise.all(n.map(async i=>{let o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(s);{let i,o=[];for(let u of n){let l={...r,common:{...r.common,issues:[]},parent:null},f=u._parseSync({data:r.data,path:r.path,parent:l});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;let a=o.map(u=>new ue(u));return y(r,{code:g.invalid_union,unionErrors:a}),k}}get options(){return this._def.options}};ft.create=(t,e)=>new ft({options:t,typeName:S.ZodUnion,...T(e)});var Me=c(t=>t instanceof ht?Me(t.schema):t instanceof le?Me(t.innerType()):t instanceof pt?[t.value]:t instanceof mt?t.options:t instanceof gt?N.objectValues(t.enum):t instanceof yt?Me(t._def.innerType):t instanceof ut?[void 0]:t instanceof lt?[null]:t instanceof he?[void 0,...Me(t.unwrap())]:t instanceof Se?[null,...Me(t.unwrap())]:t instanceof sr||t instanceof vt?Me(t.unwrap()):t instanceof bt?Me(t._def.innerType):[],"getDiscriminator"),zr=class t extends O{static{c(this,"ZodDiscriminatedUnion")}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==b.object)return y(r,{code:g.invalid_type,expected:b.object,received:r.parsedType}),k;let n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(y(r,{code:g.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),k)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let s=new Map;for(let i of r){let o=Me(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new t({typeName:S.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...T(n)})}};function Is(t,e){let r=Ye(t),n=Ye(e);if(t===e)return{valid:!0,data:t};if(r===b.object&&n===b.object){let s=N.objectKeys(e),i=N.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(let a of i){let u=Is(t[a],e[a]);if(!u.valid)return{valid:!1};o[a]=u.data}return{valid:!0,data:o}}else if(r===b.array&&n===b.array){if(t.length!==e.length)return{valid:!1};let s=[];for(let i=0;i<t.length;i++){let o=t[i],a=e[i],u=Is(o,a);if(!u.valid)return{valid:!1};s.push(u.data)}return{valid:!0,data:s}}else return r===b.date&&n===b.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}c(Is,"mergeValues");var dt=class extends O{static{c(this,"ZodIntersection")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),s=c((i,o)=>{if(Rs(i)||Rs(o))return k;let a=Is(i.value,o.value);return a.valid?((Ns(i)||Ns(o))&&r.dirty(),{status:r.value,value:a.data}):(y(n,{code:g.invalid_intersection_types}),k)},"handleParsed");return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};dt.create=(t,e,r)=>new dt({left:t,right:e,typeName:S.ZodIntersection,...T(r)});var Ee=class t extends O{static{c(this,"ZodTuple")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==b.array)return y(n,{code:g.invalid_type,expected:b.array,received:n.parsedType}),k;if(n.data.length<this._def.items.length)return y(n,{code:g.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),k;!this._def.rest&&n.data.length>this._def.items.length&&(y(n,{code:g.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let i=[...n.data].map((o,a)=>{let u=this._def.items[a]||this._def.rest;return u?u._parse(new pe(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>X.mergeArray(r,o)):X.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Ee.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ee({items:t,typeName:S.ZodTuple,rest:null,...T(e)})};var Vr=class t extends O{static{c(this,"ZodRecord")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==b.object)return y(n,{code:g.invalid_type,expected:b.object,received:n.parsedType}),k;let s=[],i=this._def.keyType,o=this._def.valueType;for(let a in n.data)s.push({key:i._parse(new pe(n,a,n.path,a)),value:o._parse(new pe(n,n.data[a],n.path,a)),alwaysSet:a in n.data});return n.common.async?X.mergeObjectAsync(r,s):X.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof O?new t({keyType:e,valueType:r,typeName:S.ZodRecord,...T(n)}):new t({keyType:Ke.create(),valueType:e,typeName:S.ZodRecord,...T(r)})}},Dt=class extends O{static{c(this,"ZodMap")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==b.map)return y(n,{code:g.invalid_type,expected:b.map,received:n.parsedType}),k;let s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([a,u],l)=>({key:s._parse(new pe(n,a,n.path,[l,"key"])),value:i._parse(new pe(n,u,n.path,[l,"value"]))}));if(n.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let u of o){let l=await u.key,f=await u.value;if(l.status==="aborted"||f.status==="aborted")return k;(l.status==="dirty"||f.status==="dirty")&&r.dirty(),a.set(l.value,f.value)}return{status:r.value,value:a}})}else{let a=new Map;for(let u of o){let l=u.key,f=u.value;if(l.status==="aborted"||f.status==="aborted")return k;(l.status==="dirty"||f.status==="dirty")&&r.dirty(),a.set(l.value,f.value)}return{status:r.value,value:a}}}};Dt.create=(t,e,r)=>new Dt({valueType:e,keyType:t,typeName:S.ZodMap,...T(r)});var Ft=class t extends O{static{c(this,"ZodSet")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==b.set)return y(n,{code:g.invalid_type,expected:b.set,received:n.parsedType}),k;let s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(y(n,{code:g.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(y(n,{code:g.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());let i=this._def.valueType;function o(u){let l=new Set;for(let f of u){if(f.status==="aborted")return k;f.status==="dirty"&&r.dirty(),l.add(f.value)}return{status:r.value,value:l}}c(o,"finalizeSet");let a=[...n.data.values()].map((u,l)=>i._parse(new pe(n,u,n.path,l)));return n.common.async?Promise.all(a).then(u=>o(u)):o(a)}min(e,r){return new t({...this._def,minSize:{value:e,message:_.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:_.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Ft.create=(t,e)=>new Ft({valueType:t,minSize:null,maxSize:null,typeName:S.ZodSet,...T(e)});var Gr=class t extends O{static{c(this,"ZodFunction")}constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==b.function)return y(r,{code:g.invalid_type,expected:b.function,received:r.parsedType}),k;function n(a,u){return Ur({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Qr(),Bt].filter(l=>!!l),issueData:{code:g.invalid_arguments,argumentsError:u}})}c(n,"makeArgsIssue");function s(a,u){return Ur({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Qr(),Bt].filter(l=>!!l),issueData:{code:g.invalid_return_type,returnTypeError:u}})}c(s,"makeReturnsIssue");let i={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof Je){let a=this;return te(async function(...u){let l=new ue([]),f=await a._def.args.parseAsync(u,i).catch(p=>{throw l.addIssue(n(u,p)),l}),d=await Reflect.apply(o,this,f);return await a._def.returns._def.type.parseAsync(d,i).catch(p=>{throw l.addIssue(s(d,p)),l})})}else{let a=this;return te(function(...u){let l=a._def.args.safeParse(u,i);if(!l.success)throw new ue([n(u,l.error)]);let f=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(f,i);if(!d.success)throw new ue([s(f,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Ee.create(e).rest(Re.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||Ee.create([]).rest(Re.create()),returns:r||Re.create(),typeName:S.ZodFunction,...T(n)})}},ht=class extends O{static{c(this,"ZodLazy")}get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};ht.create=(t,e)=>new ht({getter:t,typeName:S.ZodLazy,...T(e)});var pt=class extends O{static{c(this,"ZodLiteral")}_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return y(r,{received:r.data,code:g.invalid_literal,expected:this._def.value}),k}return{status:"valid",value:e.data}}get value(){return this._def.value}};pt.create=(t,e)=>new pt({value:t,typeName:S.ZodLiteral,...T(e)});function ua(t,e){return new mt({values:t,typeName:S.ZodEnum,...T(e)})}c(ua,"createZodEnum");var mt=class t extends O{static{c(this,"ZodEnum")}constructor(){super(...arguments),er.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return y(r,{expected:N.joinValues(n),received:r.parsedType,code:g.invalid_type}),k}if(Zr(this,er,"f")||ia(this,er,new Set(this._def.values),"f"),!Zr(this,er,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return y(r,{received:r.data,code:g.invalid_enum_value,options:n}),k}return te(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};er=new WeakMap;mt.create=ua;var gt=class extends O{static{c(this,"ZodNativeEnum")}constructor(){super(...arguments),tr.set(this,void 0)}_parse(e){let r=N.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==b.string&&n.parsedType!==b.number){let s=N.objectValues(r);return y(n,{expected:N.joinValues(s),received:n.parsedType,code:g.invalid_type}),k}if(Zr(this,tr,"f")||ia(this,tr,new Set(N.getValidEnumValues(this._def.values)),"f"),!Zr(this,tr,"f").has(e.data)){let s=N.objectValues(r);return y(n,{received:n.data,code:g.invalid_enum_value,options:s}),k}return te(e.data)}get enum(){return this._def.values}};tr=new WeakMap;gt.create=(t,e)=>new gt({values:t,typeName:S.ZodNativeEnum,...T(e)});var Je=class extends O{static{c(this,"ZodPromise")}unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==b.promise&&r.common.async===!1)return y(r,{code:g.invalid_type,expected:b.promise,received:r.parsedType}),k;let n=r.parsedType===b.promise?r.data:Promise.resolve(r.data);return te(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}};Je.create=(t,e)=>new Je({type:t,typeName:S.ZodPromise,...T(e)});var le=class extends O{static{c(this,"ZodEffects")}innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===S.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:c(o=>{y(n,o),o.fatal?r.abort():r.dirty()},"addIssue"),get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){let o=s.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async a=>{if(r.value==="aborted")return k;let u=await this._def.schema._parseAsync({data:a,path:n.path,parent:n});return u.status==="aborted"?k:u.status==="dirty"||r.value==="dirty"?It(u.value):u});{if(r.value==="aborted")return k;let a=this._def.schema._parseSync({data:o,path:n.path,parent:n});return a.status==="aborted"?k:a.status==="dirty"||r.value==="dirty"?It(a.value):a}}if(s.type==="refinement"){let o=c(a=>{let u=s.refinement(a,i);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a},"executeRefinement");if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?k:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?k:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){let o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!rr(o))return o;let a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>rr(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:r.value,value:a})):o);N.assertNever(s)}};le.create=(t,e,r)=>new le({schema:t,typeName:S.ZodEffects,effect:e,...T(r)});le.createWithPreprocess=(t,e,r)=>new le({schema:e,effect:{type:"preprocess",transform:t},typeName:S.ZodEffects,...T(r)});var he=class extends O{static{c(this,"ZodOptional")}_parse(e){return this._getType(e)===b.undefined?te(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};he.create=(t,e)=>new he({innerType:t,typeName:S.ZodOptional,...T(e)});var Se=class extends O{static{c(this,"ZodNullable")}_parse(e){return this._getType(e)===b.null?te(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Se.create=(t,e)=>new Se({innerType:t,typeName:S.ZodNullable,...T(e)});var yt=class extends O{static{c(this,"ZodDefault")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===b.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};yt.create=(t,e)=>new yt({innerType:t,typeName:S.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...T(e)});var bt=class extends O{static{c(this,"ZodCatch")}_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return nr(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ue(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ue(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};bt.create=(t,e)=>new bt({innerType:t,typeName:S.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...T(e)});var qt=class extends O{static{c(this,"ZodNaN")}_parse(e){if(this._getType(e)!==b.nan){let n=this._getOrReturnCtx(e);return y(n,{code:g.invalid_type,expected:b.nan,received:n.parsedType}),k}return{status:"valid",value:e.data}}};qt.create=t=>new qt({typeName:S.ZodNaN,...T(t)});var md=Symbol("zod_brand"),sr=class extends O{static{c(this,"ZodBranded")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},ir=class t extends O{static{c(this,"ZodPipeline")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return c(async()=>{let i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?k:i.status==="dirty"?(r.dirty(),It(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})},"handleAsync")();{let s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?k:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:S.ZodPipeline})}},vt=class extends O{static{c(this,"ZodReadonly")}_parse(e){let r=this._def.innerType._parse(e),n=c(s=>(rr(s)&&(s.value=Object.freeze(s.value)),s),"freeze");return nr(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}};vt.create=(t,e)=>new vt({innerType:t,typeName:S.ZodReadonly,...T(e)});function la(t,e={},r){return t?$e.create().superRefine((n,s)=>{var i,o;if(!t(n)){let a=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,u=(o=(i=a.fatal)!==null&&i!==void 0?i:r)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:u})}}):$e.create()}c(la,"custom");var gd={object:se.lazycreate},S;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(S||(S={}));var yd=c((t,e={message:`Input not instance of ${t.name}`})=>la(r=>r instanceof t,e),"instanceOfType"),fa=Ke.create,da=it.create,bd=qt.create,vd=ot.create,ha=at.create,_d=ct.create,wd=Pt.create,xd=ut.create,Cd=lt.create,Ed=$e.create,Sd=Re.create,kd=ve.create,Ad=jt.create,Td=Ne.create,Od=se.create,Md=se.strictCreate,Rd=ft.create,Nd=zr.create,Id=dt.create,Bd=Ee.create,Pd=Vr.create,jd=Dt.create,Dd=Ft.create,Fd=Gr.create,qd=ht.create,Ld=pt.create,Qd=mt.create,Ud=gt.create,Zd=Je.create,na=le.create,zd=he.create,Vd=Se.create,Gd=le.createWithPreprocess,Hd=ir.create,Wd=c(()=>fa().optional(),"ostring"),Yd=c(()=>da().optional(),"onumber"),Kd=c(()=>ha().optional(),"oboolean"),$d={string:c(t=>Ke.create({...t,coerce:!0}),"string"),number:c(t=>it.create({...t,coerce:!0}),"number"),boolean:c(t=>at.create({...t,coerce:!0}),"boolean"),bigint:c(t=>ot.create({...t,coerce:!0}),"bigint"),date:c(t=>ct.create({...t,coerce:!0}),"date")},Jd=k,_e=Object.freeze({__proto__:null,defaultErrorMap:Bt,setErrorMap:Jf,getErrorMap:Qr,makeIssue:Ur,EMPTY_PATH:Xf,addIssueToContext:y,ParseStatus:X,INVALID:k,DIRTY:It,OK:te,isAborted:Rs,isDirty:Ns,isValid:rr,isAsync:nr,get util(){return N},get objectUtil(){return Ms},ZodParsedType:b,getParsedType:Ye,ZodType:O,datetimeRegex:ca,ZodString:Ke,ZodNumber:it,ZodBigInt:ot,ZodBoolean:at,ZodDate:ct,ZodSymbol:Pt,ZodUndefined:ut,ZodNull:lt,ZodAny:$e,ZodUnknown:Re,ZodNever:ve,ZodVoid:jt,ZodArray:Ne,ZodObject:se,ZodUnion:ft,ZodDiscriminatedUnion:zr,ZodIntersection:dt,ZodTuple:Ee,ZodRecord:Vr,ZodMap:Dt,ZodSet:Ft,ZodFunction:Gr,ZodLazy:ht,ZodLiteral:pt,ZodEnum:mt,ZodNativeEnum:gt,ZodPromise:Je,ZodEffects:le,ZodTransformer:le,ZodOptional:he,ZodNullable:Se,ZodDefault:yt,ZodCatch:bt,ZodNaN:qt,BRAND:md,ZodBranded:sr,ZodPipeline:ir,ZodReadonly:vt,custom:la,Schema:O,ZodSchema:O,late:gd,get ZodFirstPartyTypeKind(){return S},coerce:$d,any:Ed,array:Td,bigint:vd,boolean:ha,date:_d,discriminatedUnion:Nd,effect:na,enum:Qd,function:Fd,instanceof:yd,intersection:Id,lazy:qd,literal:Ld,map:jd,nan:bd,nativeEnum:Ud,never:kd,null:Cd,nullable:Vd,number:da,object:Od,oboolean:Kd,onumber:Yd,optional:zd,ostring:Wd,pipeline:Hd,preprocess:Gd,promise:Zd,record:Pd,set:Dd,strictObject:Md,string:fa,symbol:wd,transformer:na,tuple:Bd,undefined:xd,union:Rd,unknown:Sd,void:Ad,NEVER:Jd,ZodIssueCode:g,quotelessJson:$f,ZodError:ue});var Xd=_e.object({type:_e.literal("patron_tier_change"),new_tier:_e.number().int(),old_tier:_e.number().int(),discord_ids:_e.array(_e.string()),first_time_patron:_e.boolean()}),eh=_e.object({type:_e.literal("ping")}),pa=_e.union([eh,Xd]),Bs="main",Ps=class{static{c(this,"TSRedis")}redis;isMocked;constructor(e={mocked:!1}){this.redis=e.mocked?null:new ma.default(e),this.isMocked=e.mocked}disconnect(){return this.isMocked?Promise.resolve():this.redis.disconnect(!1)}subscribe(e){if(this.isMocked)return Promise.resolve();this.redis.subscribe(Bs,r=>{r&&console.error("Failed to subscribe: ",r)}),this.redis.on("message",(r,n)=>{if(r===Bs)try{let s=JSON.parse(n),i=pa.parse(s);e(i)}catch(s){console.error("Failed to parse message: ",s)}})}publish(e){if(this.isMocked)return Promise.resolve();let r=pa.parse(e);return this.redis.publish(Bs,JSON.stringify(r))}};0&&(module.exports={GeneralBank,SimpleTable,Stopwatch,TSRedis,UserError});
/*! Bundled license information:

decimal.js/decimal.mjs:
  (*!
   *  decimal.js v10.4.3
   *  An arbitrary-precision Decimal type for JavaScript.
   *  https://github.com/MikeMcl/decimal.js
   *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
   *  MIT Licence
   *)
*/
